<!DOCTYPE html>

<html lang="en"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="keyword1, keyword2">
    
    
    <meta name="description" content="description for this article">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <script src="/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/search/style.css" type="text/css"/>
        
    
    
    <title>FFTéŸ³å¾‹ç¯ - Hdochub</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-ad-hint": {"type": "hint", "label": "â˜†", "content": "è¿™é‡Œæ˜¯è€æ€ªé¸½çš„ä¸ªäººæŠ€æœ¯æ–‡æ¡£è®°å½•ä¸­å¿ƒ</br>å–œæ¬¢é¡¹ç›®è¯·<a target=\"_blank\" href=\"https://github.com/LaoGuaiGe/laoguaige.github.io\">ç‚¹ä¸‹ â˜† star </a>å“¦~ğŸ¦€ğŸ¦€", "show_times": 2, "show_after_s": 432000, "date": "2021-11-16 14:40", "color": "#a0421d", "link_color": "#e53935", "link_bg_color": "#e6ae5c", "bg_color": "#ffcf89", "color_hover": "white", "bg_color_hover": "#f57c00", "close_color": "#eab971"}}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": "2024-12-05", "update": [{"date": "2024-12-05", "author": "è€æ€ªé¸½", "version": "1.0.1", "content": "æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£"}], "ts": 1733356800, "author": "", "brief": "", "cover": "", "show_source": false}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/">
                
                    <img class="site_logo" src="/static/images/logo.png" alt="HDocHub logo">
                
                
                    <h2>HDocHub</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/">é¦–é¡µ</a></li>
<li class=""><a  href="/c-basics/">Cè¯­è¨€</a></li>
<li class=""><a  href="/python/">Python</a></li>
<li class=""><a  href="/linux/">Linux</a></li>
<li class=""><a  href="/markdown/">MarkDown</a></li>
<li class=""><a  href="/git/">Git</a></li>
<li class=""><a  href="/mcu/">å•ç‰‡æœº</a></li>
<li class=""><a  href="/module/">ç”µå­æ¨¡å—é©±åŠ¨åˆé›†</a></li>
<li class="active"><a  href="/diy/">DIYé¡¹ç›®</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a target="_blank" href="https://github.com/LaoGuaiGe/laoguaige.github.io">github</a></li>
</ul>

                <ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">æœç´¢</span>
                            <div id="search_hints">
                                <span id="search_input_hint">è¾“å…¥å…³é”®è¯ï¼Œå¤šå…³é”®è¯ç©ºæ ¼éš”å¼€</span>
                                <span id="search_loading_hint">æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™ã€‚ã€‚ã€‚</span>
                                <span id="search_download_err_hint">ä¸‹è½½æ–‡ä»¶å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•æˆ–æ£€æŸ¥ç½‘ç»œ</span>
                                <span id="search_other_docs_result_hint">æ¥è‡ªå…¶å®ƒæ–‡æ¡£çš„ç»“æœ</span>
                                <span id="search_curr_doc_result_hint">å½“å‰æ–‡æ¡£æœç´¢ç»“æœ</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/diy/index.html"><span class="label">é¡¹ç›®é›†åˆ</span><span class=""></span></a></li>
<li class="active_parent with_link"><a href="/diy/picxel-clock/basic.html"><span class="label">ç‰©è”ç½‘åƒç´ æ—¶é’Ÿâ°</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/diy/picxel-clock/basic.html"><span class="label">âœ¨é¡¹ç›®ä¿¡æ¯</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/diy/picxel-clock/download.html"><span class="label">â¬‡ï¸èµ„æ–™ä¸‹è½½</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/diy/picxel-clock/hardware.html"><span class="label">0. ç¡¬ä»¶è®¾è®¡</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/diy/picxel-clock/install.html"><span class="label">1. è½¯ä»¶ç¯å¢ƒæ­å»º</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/diy/picxel-clock/ds1302.html"><span class="label">2. RTCæ—¶é’Ÿé©±åŠ¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/diy/picxel-clock/dht11.html"><span class="label">3. æ¸©æ¹¿åº¦é‡‡é›†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/diy/picxel-clock/ledmatrix.html"><span class="label">4. å½©ç¯é©±åŠ¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/diy/picxel-clock/ntptime.html"><span class="label">5. è·å–ç½‘ç»œæ—¶é—´</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/diy/picxel-clock/weather.html"><span class="label">6. è·å–å¤©æ°”æƒ…å†µ</span><span class=""></span></a></li>
<li class="active with_link"><a href="/diy/picxel-clock/led-oscillating.html"><span class="label">7. å®ç°FFTéŸ³å¾‹ç¯</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/diy/picxel-clock/voice.html"><span class="label">8. è¯­éŸ³è¯†åˆ«ä¸æ’­æŠ¥</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/diy/wiki-web/basic.html"><span class="label">WIKIç½‘ç«™æ­å»ºğŸŒ</span><span class=""></span></a></li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1>FFTéŸ³å¾‹ç¯</h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="Last modify date: 2024-12-05">
                                    2024-12-05
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                        
                        <details open>
                        
                            <summary>Update history</summary>
                            <div>
                                <table>
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Version</th>
                                                <th>Author</th>
                                                <th>Update content</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            
                                                <tr>
                                                    <td>2024-12-05</td>
                                                    <td>1.0.1</td>
                                                    <td>è€æ€ªé¸½</td>
                                                    <td>
                                                    
                                                        æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£
                                                    
                                                    </td>
                                                </tr>
                                            
                                        </tbody>
                                </table>
                            </div>
                        </details>
                        
                    </div>
                    <div id="article_content">
                        
                            <hr />
<blockquote class="spoiler warning">
<p> æœ¬æ–‡ç»§æ‰¿è‡ªä¹‹å‰çš„ğŸ‘‰<a href="ledmatrix.html"  >å½©ç¯é©±åŠ¨</a>ç« èŠ‚</p>
</blockquote>
<hr />
<p><strong>æœ¬æ–‡å®Œæˆçš„æ•ˆæœï¼š</strong></p>
<p><img src="../../static/images/docs/diy/picxel-clock/led-oscillating/led-oscillating-2024-12-06-00-05-00.gif" alt="å›¾ 0" /></p>
<h2 id="%E7%A1%AC%E4%BB%B6%E5%87%86%E5%A4%87">ç¡¬ä»¶å‡†å¤‡</h2>
<hr />
<h3 id="WS2812%E7%9F%A9%E9%98%B5%E5%BD%A9%E7%81%AF">WS2812çŸ©é˜µå½©ç¯</h3>
<p><img src="../../static/images/docs/diy/picxel-clock/ledmatrix/ledmatrix-2024-12-05-23-14-08.png" alt="å›¾ 0" /></p>
<p><strong>è´­ä¹°åœ°å€ï¼š</strong><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.24ee2e8dC5LwBl&amp;id=737696448369&amp;_u=r2t4uge57a73&amp;skuId=5263566850408"  target="_blank">WS2812Bå…¨å½©è½¯åƒç´ å±8X8 8X32 16X16å¹»å½©5Væ˜¾ç¤ºå¯ç¼–ç¨‹åƒç´ è½¯å±</a></p>
<h3 id="%E9%BA%A6%E5%85%8B%E9%A3%8E%E6%A8%A1%E5%9D%97">éº¦å…‹é£æ¨¡å—</h3>
<p><img src="../../static/images/docs/diy/picxel-clock/led-oscillating/led-oscillating-2024-12-06-00-05-36.png" alt="å›¾ 1" /></p>
<p>è´­ä¹°åœ°å€ï¼š<a href="https://item.taobao.com/item.htm?spm=a21n57.1.item.2.2af5523csIlNsa&amp;priceTId=2147bfce17220928379633421e49bd&amp;utparam=%7B%22aplus_abtest%22:%22c7a787e4caab2b1c51f9ce5bba439f54%22%7D&amp;id=619436010637&amp;ns=1&amp;abbucket=4"  target="_blank">GY-MAX4466 å£°éŸ³ä¼ æ„Ÿå™¨æ¨¡å— MAX4466éº¦å…‹é£å‰ç½®æ”¾å¤§å™¨ æä¾›ç¨‹åº</a></p>
<h3 id="ESP32S3%E5%BC%80%E5%8F%91%E6%9D%BF">ESP32S3å¼€å‘æ¿</h3>
<p><img src="../../static/images/docs/diy/picxel-clock/ledmatrix/ledmatrix-2024-12-05-23-14-24.png" alt="å›¾ 1" /></p>
<p><strong>è´­ä¹°åœ°å€ï¼š</strong><a href="https://item.szlcsc.com/22034693.html?fromZone=s_s__%2522%25E7%25AB%258B%25E5%2588%259B%25E5%25BC%2580%25E5%258F%2591%25E6%259D%25BF%2522"  target="_blank">ç«‹åˆ›Â·ESP32S3R8N8 å¼€å‘æ¿</a></p>
<h2 id="%E5%B7%A5%E7%A8%8B%E5%88%9B%E5%BB%BA">å·¥ç¨‹åˆ›å»º</h2>
<hr />
<p>åœ¨VSCodeä¸­æ‰“å¼€PlatformIOæ‰©å±•åˆ›å»ºåä¸º<code>OscillatingLED</code>çš„ <code>Espressif ESP32-S3-DevKitM-1</code> å·¥ç¨‹ã€‚</p>
<p>å…³äºè¯¦ç»†å›¾æ–‡åˆ›å»ºå·¥ç¨‹çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰<a href="ds1302.html"  >RTCæ—¶é’Ÿé©±åŠ¨</a>ç« èŠ‚çš„å·¥ç¨‹åˆ›å»ºå°èŠ‚ã€‚</p>
<h2 id="%E5%AE%89%E8%A3%85%E9%A9%B1%E5%8A%A8%E5%BA%93">å®‰è£…é©±åŠ¨åº“</h2>
<hr />
<p>åˆ›å»ºå®Œæˆä¹‹åï¼Œæ‰“å¼€é©±åŠ¨åº“ä¸‹è½½ç•Œé¢ã€‚å®ç°åŠŸèƒ½çš„æœ€åº•å±‚çš„é©±åŠ¨ï¼Œéœ€è¦åˆ†åˆ«å®‰è£…ä¸‰ä¸ªåº“ï¼š</p>
<ol>
<li><p>æœç´¢<code>Adafruit NeoMatrix</code>ï¼Œå®‰è£…æ¥è‡ª<code>Adafruit</code>çš„<code>Adafruit NeoMatrix</code>åº“ã€‚</p>
</li>
<li><p>æœç´¢<code>Adafruit GFX Library</code>ï¼Œå®‰è£…æ¥è‡ª<code>Adafruit</code>çš„<code>Adafruit GFX Library</code>åº“ã€‚</p>
</li>
<li><p>æœç´¢<code>arduinoFFT</code>ï¼Œå®‰è£…æ¥è‡ª<code>Enrique Condes</code>çš„<code>arduinoFFT</code>åº“ã€‚</p>
</li>
</ol>
<p>å°†å®ƒä»¬éƒ½å®‰è£…åˆ°æˆ‘ä»¬çš„å·¥ç¨‹å½“ä¸­ã€‚</p>
<blockquote>
<p>å…³äºè¯¦ç»†å›¾æ–‡å®‰è£…é©±åŠ¨åº“çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰<a href="ds1302.html"  >RTCæ—¶é’Ÿé©±åŠ¨</a>ç« èŠ‚çš„å®‰è£…é©±åŠ¨åº“å°èŠ‚ã€‚</p>
</blockquote>
<p>éƒ½å®‰è£…å®Œæˆä¹‹åï¼Œæ‰“å¼€<code>platformio.ini</code>æ–‡ä»¶ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…ä¸Šäº†ä¸‰ä¸ªé©±åŠ¨åº“ã€‚</p>
<p><img src="../../static/images/docs/diy/picxel-clock/led-oscillating/led-oscillating-2024-12-06-00-07-06.png" alt="å›¾ 2" /></p>
<h2 id="%E7%BC%96%E8%BE%91%E4%BB%A3%E7%A0%81">ç¼–è¾‘ä»£ç </h2>
<hr />
<p>åœ¨å·¥ç¨‹ä¸‹çš„<code>include</code>æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª <code>musicfft.h</code>æ–‡ä»¶ã€‚</p>
<p>æ¥ä¸‹æ¥å¾€ <code>musicfft.h</code> æ–‡ä»¶å†™å…¥ä»£ç ï¼š</p>

<pre class="language-c"><code class="language-c">#include &lt;Adafruit_NeoMatrix.h&gt;
#include &lt;arduinoFFT.h&gt;

#define CHANNEL 1  //éŸ³é¢‘è¾“å…¥å¼•è„š
#define xres 32   
#define yres 8            


const uint16_t samples = 64; //é‡‡æ ·ç‚¹æ•°ï¼Œå¿…é¡»ä¸º2çš„æ•´æ•°æ¬¡å¹‚
const double samplingFrequency = 4000; //Hz, å£°éŸ³é‡‡æ ·é¢‘ç‡

unsigned int sampling_period_us;
unsigned long microseconds;
unsigned long lastTime = 0;
unsigned long fallingTime = 0;

double vReal[samples]; //FFTé‡‡æ ·è¾“å…¥æ ·æœ¬æ•°ç»„
double vImag[samples]; //FFTè¿ç®—è¾“å‡ºæ•°ç»„
int freq_gain2[xres] = {30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30};
int Intensity[xres] = {}; // initialize Frequency Intensity to zero
int FallingPoint[xres] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
int Displacement = 1;          // Create LED Object

//ArduinoFFT FFT = ArduinoFFT(); //åˆ›å»ºFFTå¯¹è±¡
ArduinoFFT&lt;double&gt; FFT = ArduinoFFT&lt;double&gt;(vReal, vImag, samples, samplingFrequency);


void getSamples(){
  microseconds = micros();
  for(int i = 0; i &lt; samples; i++){
    vReal[i] = analogRead(CHANNEL);
    vImag[i] = 0;
    microseconds += sampling_period_us;
  }
  bool reduce = false;
  if ((millis() - lastTime) &gt; 16) {
    lastTime = millis();
    reduce = true;
  }
  //FFT
  FFT.windowing(vReal, 1, FFT_WIN_TYP_HAMMING, FFT_FORWARD);
  FFT.compute(vReal, vImag, samples, FFT_FORWARD);
  FFT.complexToMagnitude(vReal, vImag, samples);
  //Update Intensity Array  
  int t = 16;
  for(int i = t; i &lt; (xres*Displacement)+t; i+=Displacement){
    vReal[i] = constrain(vReal[i], 0 ,3596);            // set max value for input data
    vReal[i] = map(vReal[i], freq_gain2[(i-t)/Displacement], 1548, 0, yres);        // map data to fit our display
    if(reduce){
      Intensity[(i-t)/Displacement] --;                      // Decrease displayed value
    }
    if (vReal[i] &gt; Intensity[(i-t)/Displacement])          // Match displayed value to measured value
      Intensity[(i-t)/Displacement] = vReal[i];
  }
}

void drawYLine(Adafruit_NeoMatrix *matrix, int16_t x, int16_t y, int16_t h, int16_t c){
  for(int i=y;i&lt;y+h;i++){
    matrix-&gt;drawPixel(x,7 - i,c);
  }
}

uint16_t hsv2rgb2(Adafruit_NeoMatrix *matrix, uint16_t hue, uint8_t saturation, uint8_t value)
{
    uint8_t red = 0;
    uint8_t green = 0;
    uint8_t blue = 0;
    uint16_t hi = (hue / 60) % 6;
    uint16_t F = 100 * hue / 60 - 100 * hi;
    uint16_t P = value * (100 - saturation) / 100;
    uint16_t Q = value * (10000 - F * saturation) / 10000;
    uint16_t T = value * (10000 - saturation * (100 - F)) / 10000;

    switch (hi)
    {
    case 0:
        red = value;
        green = T;
        blue = P;
        break;
    case 1:
        red = Q;
        green = value;
        blue = P;
        break;
    case 2:
        red = P;
        green = value;
        blue = T;
        break;
    case 3:
        red = P;
        green = Q;
        blue = value;
        break;
    case 4:
        red = T;
        green = P;
        blue = value;
        break;
    case 5:
        red = value;
        green = P;
        blue = Q;
        break;
    default:
        return matrix-&gt;Color(255, 0, 0);
    }
    red = red * 255 / 100;
    green = green * 255 / 100;
    blue = blue * 255 / 100;
    return matrix-&gt;Color(red, green, blue);
}

void displayUpdate(Adafruit_NeoMatrix *matrix, int displayPattern){
  int color = 0;
  switch(displayPattern){
    case 0:
      for(int i = 0; i &lt; xres; i++){
        drawYLine(matrix,i,yres-Intensity[i],Intensity[i],hsv2rgb2(matrix, color, 80, 80 ));
        drawYLine(matrix,i,0,yres-1-Intensity[i],hsv2rgb2(matrix, color, 80, 80 ));
        color += 360/xres;
      }
      break;
    case 1:
      if ((millis() - fallingTime) &gt; 130) {
        for(int i = 0; i &lt; xres; i++){
          if(FallingPoint[i]&gt;0){
            FallingPoint[i]--;
          }
        }
        fallingTime = millis();
      }
      for(int i = 0; i &lt; xres; i++){
        drawYLine(matrix,i,0,yres-1,matrix-&gt;Color(0,0,0));
        if(FallingPoint[i]&lt;Intensity[i]){
          FallingPoint[i] = Intensity[i];
        }
        drawYLine(matrix,i,yres-Intensity[i]+1,Intensity[i]-1,hsv2rgb2(matrix, color, 80, 80 ));
        if(FallingPoint[i]&gt;0){
          matrix-&gt;drawPixel(i,yres-FallingPoint[i],matrix-&gt;Color(255,255,255));
        }
        color += 360/xres;
      }
      break;
    case 2:
      for(int i = 0; i &lt; xres; i++){
        drawYLine(matrix,i,0,yres,matrix-&gt;Color(0,0,0));
        drawYLine(matrix,i,0,Intensity[i]+1,hsv2rgb2(matrix, color, 80, 80 ));
        color += 360/xres;
      }
      break;
  }
}

</code></pre>
<p>æ¥ä¸‹æ¥åœ¨ <code>main.cpp</code>ä¸­ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š</p>

<pre class="language-c"><code class="language-c">#include &lt;Arduino.h&gt;
#include &lt;Adafruit_NeoMatrix.h&gt; //ç‚¹äº®LEDçŸ©é˜µéœ€è¦çš„åº“
#include &quot;musicfft.h&quot; //éŸ³ä¹é¢‘è°±åº“

//åƒç´ é˜µåˆ—å®šä¹‰
#define kMatrixWidth   32             //å®½åº¦
#define kMatrixHeight  8              //é«˜åº¦
#define BRIGHTNESS     10            //é»˜è®¤äº®åº¦ 0-255
#define BRIGHTNESS_INTERVAL 30        //äº®åº¦è°ƒèŠ‚é—´éš”
#define LED_PIN        8              //åƒç´ é˜µåˆ—å¼•è„š

Adafruit_NeoMatrix *matrix;     //LEDçŸ©é˜µç±»æŒ‡é’ˆ

//åƒç´ çŸ©é˜µåˆå§‹åŒ–
void InitLED_Matrix(void)
{
  //è®¾ç½®åƒç´ çŸ©é˜µçš„æ–¹å‘ä»¥åŠæ’åˆ—æ–¹å¼
  matrix = new Adafruit_NeoMatrix(32, 8, LED_PIN, NEO_MATRIX_TOP + NEO_MATRIX_LEFT+
    NEO_MATRIX_COLUMNS +  NEO_MATRIX_ZIGZAG,
    NEO_GRB + NEO_KHZ800);
  matrix-&gt;setTextWrap(false);       //è®¾ç½®æ–‡å­—æ˜¯å¦è‡ªåŠ¨æ¢è¡Œ
  matrix-&gt;clear();                  //æ¸…é™¤å½“å‰æ˜¾ç¤ºå†…å®¹
  matrix-&gt;setBrightness(BRIGHTNESS);//è®¾ç½®äº®åº¦
}

void showFFT(void)
{
  //è¿›è¡Œé‡‡æ ·
  getSamples();
  //æ›´æ–°é¢‘è°±æŸ±
  displayUpdate(matrix, 2);
}

void setup() 
{
  //åˆå§‹åŒ–LEDçŸ©é˜µæ˜¾ç¤º
  InitLED_Matrix();    
}

void loop() 
{
  matrix-&gt;clear();
  showFFT();
  matrix-&gt;show();

  delay(50);
}
</code></pre>
<h2 id="%E7%A1%AC%E4%BB%B6%E8%BF%9E%E6%8E%A5">ç¡¬ä»¶è¿æ¥</h2>
<hr />
<p><img src="../../static/images/docs/diy/picxel-clock/led-oscillating/led-oscillating-2024-12-06-00-08-04.png" alt="å›¾ 3" /></p>
<h1 id="6.-%E4%BB%A3%E7%A0%81%E9%AA%8C%E8%AF%81">6. ä»£ç éªŒè¯</h1>
<hr />
<p>ä»£ç ç¼–å†™å®Œæˆä¹‹åï¼Œå°†ESP32S3å¼€å‘æ¿æ¥å…¥ç”µè„‘ä¸‹è½½ä»£ç ã€‚ç„¶åè§‚å¯Ÿå½©ç¯çŸ©é˜µçš„ç°è±¡ã€‚</p>
<p>å®ç‰©æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><strong>ä½¿ç”¨é»‘è‰²äºšå…‹åŠ›é¢æ¿+ç™½çº¸æ ¼æŒ¡å…‰çº¿æ˜¾ç¤º</strong></p>
<blockquote>
<p>å å±‚ä»ä¸Šåˆ°ä¸‹æ˜¯è¿™æ ·çš„ï¼šé»‘è‰²äºšå…‹åŠ›é¢æ¿ -&gt; ç™½çº¸ -&gt; LEDçŸ©é˜µ</p>
</blockquote>
<p><img src="../../static/images/docs/diy/picxel-clock/led-oscillating/led-oscillating-2024-12-06-00-05-00.gif" alt="å›¾ 0" /></p>
<blockquote class="spoiler warning">
<p> è¯´æ˜ï¼šå¦‚æœä½ æ ¹æ®ä»£ç æ“ä½œè¿è¡Œä¸èµ·æ¥ï¼Œå¯ä»¥ä¸‹è½½ğŸ‘‰<a href="https://gitee.com/laoguaige/esp32-s3-r8-n8-pixel-clock/tree/master/example/OscillatingLED"  target="_blank">ä¾‹ç¨‹</a>çœ‹çœ‹</p>
</blockquote>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/diy/picxel-clock/weather.html">
                            <span class="icon"></span>
                            <span class="label">6. è·å–å¤©æ°”æƒ…å†µ</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/diy/picxel-clock/voice.html">
                            <span class="label">8. è¯­éŸ³è¯†åˆ«ä¸æ’­æŠ¥</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>é“¾æ¥</a><ul><li><a target="_blank" href="https://github.com/teedoc/teedoc">æœ¬ç½‘ç«™ä½¿ç”¨ teedoc æ„å»º</a></li>
</ul>
</li>
<li><a>ç«™é•¿</a><ul><li><a target="_blank" href="https://laoguaige.github.io/">è€æ€ªé¸½</a></li>
<li><a>é‚®ç®±: liguoyi@hdochub.cn</a>
</li>
</ul>
</li>
<li><a>æºç </a><ul><li><a target="_blank" href="https://github.com/LaoGuaiGe/laoguaige.github.io">æœ¬ç«™æºæ–‡ä»¶</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://laoguaige.github.io/">Copyright Â© 2024 Hdochub</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script src="/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/static/js/theme_default/main.js"></script>
    
        <script src="/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/static/css/theme_default/prism.min.js"></script>
    
        <link rel="stylesheet" href="/static/js/add_hint/style.css" type="text/css"/>
    
        <script src="/static/js/add_hint/main.js"></script>
    
        <script src="/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/static/js/gitalk/main.js"></script>
    
        <script src="/static/js/custom.js"></script>
    
        <script src="/static/js/search/search_main.js"></script>
    
</body>

</html>
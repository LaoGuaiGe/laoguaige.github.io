{"/diy/wiki-web/basic.html":{"title":"wikiç½‘ç«™æ­å»º","content":" title: wikiç½‘ç«™æ­å»º keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## åŸºæœ¬æ¶æ„ ä½¿ç”¨ teedocæ¡†æ¶æ­å»ºï¼Œä½¿ç”¨githubçš„pageséƒ¨ç½²è€Œæˆã€‚ ## teedocä»‹ç» **ç®€è€Œå…¨çš„å¼€æºé™æ€ç½‘ç«™/æ–‡æ¡£/åšå®¢ç”Ÿæˆå™¨** 1. ä½¿ç”¨ Markdown æˆ–è€… jupyter notebook ä¹¦å†™ï¼Œè‡ªåŠ¨ç”Ÿæˆ HTML é¡µé¢ 2. ä½¿ç”¨ python ç¼–å†™ï¼Œ è·¨å¹³å°ï¼Œ ä½¿ç”¨ pip å³å¯å®‰è£…ï¼Œ æ”¯æŒæ’ä»¶å®‰è£…åŠè‡ªå®šä¹‰æ’ä»¶ 3. æ”¯æŒå¤šæ–‡æ¡£ï¼Œæ¯ç¯‡æ–‡æ¡£æœ‰å•ç‹¬çš„ç›®å½•ï¼Œä¹Ÿå¯ä»¥å¤šç‰ˆæœ¬ã€‚ä½ çš„å¤§é‡æ–‡æ¡£å†ä¹Ÿä¸ç”¨æ•£è½åœ¨å„ä¸ªåŸŸåä¸‹äº†ï¼åŒæ—¶æ”¯æŒè½»é‡åšå®¢ç³»ç»Ÿ 4. é»˜è®¤ä¸»é¢˜ä¸ºé«˜æ•ˆé˜…è¯»è€Œè®¾è®¡ï¼Œæä¾›ä¸»é¢˜æ’ä»¶æ”¯æŒï¼ŒåŒæ—¶æ”¯æŒè‡ªå®šä¹‰ cssã€jsï¼Œèƒ½é€šè¿‡é¡µé¢æŒ‡å®š id ç²¾ç¡®æ§åˆ¶ä»»ä½•ä¸€ä¸ªé¡µé¢å…ƒç´ çš„æ ·å¼ 5. å¹¶è¡Œæ„å»ºï¼Œå……åˆ†åˆ©ç”¨å¤„ç†å™¨æ€§èƒ½ï¼Œæ–‡æ¡£æ¸²æŸ“å°±åœ¨ä¸€ç¬é—´ï¼Œæ”¯æŒæµè§ˆå™¨å®æ—¶é¢„è§ˆä¿®æ”¹ 6. ç”Ÿæˆçš„éƒ½æ˜¯é™æ€é¡µé¢ï¼Œæ‹·è´åˆ°æœåŠ¡å™¨å³å¯å®Œæˆéƒ¨ç½²ï¼ŒSEO å‹å¥½ï¼Œæ¯”å¦‚ é¡µå…³é”®è¯è‡ªå®šä¹‰ã€sitemapè‡ªåŠ¨ç”Ÿæˆç­‰ ## teedocç›¸å…³èµ„æ–™ å®˜ç½‘: teedoc.neucrack.com æˆ– teedoc.github.io æœ¬æ–‡æ¡£æºæ–‡ä»¶: github.com/teedoc/teedoc.github.io æºç : https://github.com/teedoc/teedoc å¦‚æœä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œè¯·åŠ¡å¿…ç™»å½• github ç»™é¡¹ç›®ç‚¹ä¸ª star ä»¥ä¸‹åœºæ™¯å¯ä½¿ç”¨teedocï¼š * å»ºæ–‡æ¡£ç½‘ç«™ï¼Œå¹¶ä¸”æœ€å¥½æ”¯æŒæ”¾å¤šä»½æ–‡æ¡£ï¼ˆæ¯”å¦‚ä½ æœ‰ä¸€æœ¬å«Pythonå­¦ä¹ å’ŒC++å­¦ä¹ ä¸¤æœ¬ä¹¦ï¼Œå®ƒä»¬éƒ½æœ‰å•ç‹¬çš„ç›®å½•, teedocåˆ™æ˜¯ä¹¦åº“ï¼‰ * æ–‡æ¡£å’Œç½‘é¡µé¡µé¢å…±å­˜ï¼Œæ”¯æŒè‡ªå®šä¹‰HTMLé¡µé¢ * å»ºWiKiç½‘ç«™ * å»ºä¸ªäººæˆ–è€…ä¼ä¸šçŸ¥è¯†åº“ * å»ºä¸ªäººæˆ–è€…ä¼ä¸šç½‘ç«™ * åšå®¢ ## ä½¿ç”¨teedocçš„ä¼ä¸šæ¡ˆä¾‹ ç½‘ç«™ ç®€ä»‹ ç«™ç‚¹æºæ–‡æ¡£ [teedoc å®˜ç½‘](https://teedoc.github.io) å¥½ç”¨çš„æ–‡æ¡£ç½‘ç«™ç”Ÿæˆå·¥å…· [teedoc/teedoc.github.io](https://github.com/teedoc/teedoc.github.io) [MaixPy](https://maixpy.sipeed.com) è¾¹ç¼˜ AI è®¡ç®— Python SDK [sipeed/MaixPy_DOC](https://github.com/sipeed/MaixPy_DOC) [Sipeed Wiki](https://wiki.sipeed.com) Sipeed å®˜æ–¹Wiki [sipeed/sipeed_wiki](https://github.com/sipeed/sipeed_wiki) [teedoc.github.io/re0 web teedoc/](https://teedoc.github.io/re0 web teedoc/) ä» gitbook è½¬åˆ° teedoc çš„ç¤ºä¾‹ç½‘ç«™ [teedoc/re0 web teedoc](https://github.com/teedoc/re0 web teedoc) [QuecPython](https://python.quectel.com/doc/) QuecPython æ–‡æ¡£ä¸­å¿ƒ [gitee](https://gitee.com/quecpython/Community document) [github](https://github.com/quecpython/Community document) [BPI Steam Doc](https://bpi steam.com/) BananaPi, Steamå›¢é˜Ÿçš„æ–‡æ¡£ï¼ˆWikiï¼‰ï¼ŒåŒ…å«äº†å¼€æºè½¯ä»¶å’Œå¼€æºç¡¬ä»¶èµ„æ–™ï¼ŒAIOTèµ„æ–™ç­‰ç­‰ [BPI STEAM/BPI Doc](https://github.com/BPI STEAM/BPI Doc) [udbg](https://udbg.github.io/) åŸºäºLuaçš„äºŒè¿›åˆ¶è°ƒè¯•/åˆ†æå·¥å…· [udbg/udbg.github.io](https://github.com/udbg/udbg.github.io) [VastUtils](https://sakurajimamaii.github.io/VastDocs/) ä¸€æ¬¾åŠ å¿«ä½ å®‰å“å¼€å‘çš„å®‰å“å·¥å…·é›† [SakurajimaMaii/VastDocs](https://github.com/SakurajimaMaii/VastDocs) æœŸå¾…ä½ çš„ä½¿ç”¨ï¼Œ æ¬¢è¿[æäº¤ issue](https://github.com/teedoc/teedoc.github.io/issues) æˆ–è€… PR æ¥æ·»åŠ ä½ çš„ç½‘ç«™ ## å¿«é€Ÿæ­å»ºwikiç½‘ç«™ ### å®‰è£… python3 éœ€è¦å…ˆå®‰è£…Python3 ï¼ˆä»…æ”¯æŒ Python3ï¼‰ æ¯”å¦‚åœ¨Ubuntuä¸Šï¼š ```sh sudo apt install python3 python3 pip git ``` Windows å’Œ macOSè¯·åˆ°[å®˜ç½‘ä¸‹è½½](https://www.python.org/downloads/) ### å®‰è£… teedoc æ‰“å¼€ç»ˆç«¯(WindowsæŒ‰Ctrl+Rè¾“å…¥cmd)ï¼Œè¾“å…¥ï¼š ```sh pip3 install teedoc ``` ä»¥åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ›´æ–°è½¯ä»¶ï¼š ```sh pip3 install teedoc upgrade ``` å¦‚æœä½ çš„ç½‘ç»œä½¿ç”¨ pypi.org é€Ÿåº¦å¾ˆæ…¢ï¼Œå¯ä»¥é€‰æ‹©å…¶å®ƒæºï¼Œæ¯”å¦‚æ¸…å tuna æºï¼š `pip3 install teedoc i https://pypi.tuna.tsinghua.edu.cn/simple` ç°åœ¨ä½ å¯ä»¥åœ¨ç»ˆç«¯ä½¿ç”¨ `teedoc` å‘½ä»¤äº† å¦‚æœä¸èƒ½ï¼Œè¯·æ£€æŸ¥æ˜¯ä¸æ˜¯`Python`å¯æ‰§è¡Œç›®å½•æ²¡æœ‰åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ `PATH`, æ¯”å¦‚å¯èƒ½åœ¨ `~/.local/bin` ### æ–°å»ºå·¥ç¨‹ æ–°å»ºä¸€ä¸ªç©ºç›®å½•ç”¨æ¥æ”¾æ–‡æ¡£å·¥ç¨‹ ```sh mkdir my_site cd my_site teedoc init ``` é€‰æ‹©1ï¼Œä¹Ÿå°±æ˜¯minimalæ¨¡æ¿è¿›è¡Œç”Ÿæˆï¼Œ ä¹Ÿå¯ä»¥ç›´æ¥`teedoc d my_site template minimal init`è¿›è¡Œç”Ÿæˆ è¿™ä¼šåœ¨ `my_site` ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆä¸€äº›åŸºç¡€æ–‡ä»¶ ### å®‰è£…æ’ä»¶ è¿™ä¼šæ ¹æ®`site_config.json`ä¸­çš„`plugins`çš„æ’ä»¶è®¾ç½®å®‰è£…æ’ä»¶ ```sh cd my_site teedoc install ``` æ’ä»¶ä¹Ÿæ˜¯ä»¥ `python` åŒ…çš„å½¢å¼å‘å¸ƒçš„ï¼Œ æ‰€ä»¥è¿™ä¼šä» `pypi.org` ä¸‹è½½å¯¹åº”çš„æ’ä»¶ï¼ŒåŒæ ·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®ƒæºï¼Œæ¯”å¦‚æ¸…å tuna æºï¼š `teedoc i https://pypi.tuna.tsinghua.edu.cn/simple install` ### æ„å»º `HTML` é¡µé¢å¹¶èµ·ä¸€ä¸ª`HTTP`æœåŠ¡ ```sh teedoc serve ``` è¿™ä¸ªå‘½ä»¤ä¼šå…ˆæ„å»ºæ‰€æœ‰`HTML`é¡µé¢ä»¥åŠæ‹·è´èµ„æºæ–‡ä»¶ï¼Œç„¶åèµ·ä¸€ä¸ª`HTTP`æœåŠ¡ å¦‚æœåªéœ€è¦ç”Ÿæˆé¡µé¢ï¼Œä½¿ç”¨ ```sh teedoc build ``` åœ¨æ˜¾ç¤º `Starting server at 0.0.0.0:2333 ....` åï¼Œå°±å¯ä»¥äº† æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://127.0.0.1:2333` åŒæ—¶å¯ä»¥çœ‹åˆ°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª`out`ç›®å½•ï¼Œé‡Œé¢å°±æ˜¯ç”Ÿæˆçš„é™æ€ç½‘ç«™å†…å®¹ï¼Œç›´æ¥æ‹·è´åˆ°æœåŠ¡å™¨ä½¿ç”¨`nginx`æˆ–è€…`apache`è¿›è¡Œéƒ¨ç½²å³å¯"},"/diy/index.html":{"title":"DIYé¡¹ç›®åˆé›†","content":" title: DIYé¡¹ç›®åˆé›† keywords: keyword1, keyword2 desc: description for this article date: 2024 12 07 ## ç‰©è”ç½‘åƒç´ æ—¶é’Ÿ åŸºäºç«‹åˆ›Â·ESP32S3R8N8å¼€å‘æ¿åˆ¶ä½œçš„åƒç´ æ—¶é’Ÿï¼ŒåŒ…å«ç½‘ç»œæ—¶é’Ÿã€å¤©æ°”æ˜¾ç¤ºã€æ¸©æ¹¿åº¦æ˜¾ç¤ºã€é»‘å®¢å¸å›½æ•°å­—é›¨ç‰¹æ•ˆã€éŸ³å¾‹æ‹¾éŸ³ç¯ç­‰åŠŸèƒ½ã€‚ å¼€å‘æ–¹å¼ï¼šVSCodeä¸‹çš„platformIO + arduinoç¯å¢ƒã€‚ ![å›¾ 0](../../static/images/docs/diy/README/README 2024 12 06 00 38 54.png) ## å¤©çŒ›æ˜Ÿå¹³è¡¡è½¦ åŸºäºç«‹åˆ›Â·å¤©çŒ›æ˜ŸMSPM0G3507å¼€å‘æ¿åˆ¶ä½œçš„å°å¹³è¡¡è½¦ã€‚ > MSPM0G3507ä¸ºTIå¾·å·ä»ªå™¨åˆ¶ä½œçš„ARM 32ä½ Cortex M0+ CPUã€‚æœ€é«˜80MHz,128K FLASH + 32K SRAM. ![å›¾ 1](../../static/images/docs/diy/README/README 2024 12 06 00 51 20.jpg) ## ä¸ªäººWIKIç½‘ç«™æ­å»º åŸºäºå¼€æºçš„teedocæ¡†æ¶æ­å»ºçš„ä¸ªäººWIKIèµ„æ–™è®°å½•ç½‘ç«™ã€‚ ![å›¾ 2](../../static/images/docs/diy/README/README 2024 12 06 01 00 55.png) ## å¹´è½»äººçš„ç¬¬ä¸€å°èˆ°é˜²ç‚® K230 AIè§†è§‰è¯†åˆ«å¼€å‘æ¿ + ç”µåŠ¨ç©å…·æª ç»„æˆçš„ç›®æ ‡è‡ªåŠ¨è·Ÿè¸ªç‚®å°ã€‚ ## WIFIå›¾ä¼ å°è½¦ åŸºäºå˜‰ç«‹åˆ›EDAå’ŒESP32S3R8N8å¼€å‘æ¿è®¾è®¡çš„WIFIå›¾ä¼ å°è½¦ã€‚é€šè¿‡ESP32S3è‡ªå¸¦çš„WIFIåŠŸèƒ½ï¼Œå°†OV2640æ‘„åƒå¤´é‡‡é›†çš„å›¾åƒæ•°æ®é€šè¿‡WIFIè¿›è¡Œ10ç±³å·¦å³çš„å›¾ä¼ ã€‚ ## ç”µå­ç‰©æ–™æ”¶çº³ç›’"},"/diy/tracking-cannon/basic.html":{"title":"èˆ°é˜²ç‚®ä»‹ç»","content":" title: èˆ°é˜²ç‚®ä»‹ç» keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ "},"/diy/picxel-clock/weather.html":{"title":"è·å–å¤©æ°”æƒ…å†µ","content":" title: è·å–å¤©æ°”æƒ…å†µ keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## ç¡¬ä»¶å‡†å¤‡ ä½ åªéœ€è¦æœ‰ä¸€ä¸ªESP32S3å¼€å‘æ¿ã€‚æˆ‘ç›®å‰ä½¿ç”¨çš„æ˜¯ï¼šç«‹åˆ›å¼€å‘æ¿çš„ç«‹åˆ›Â·ESP32S3R8N8å¼€å‘æ¿ã€‚ > **è´­ä¹°åœ°å€ï¼š**[ç«‹åˆ›Â·ESP32S3R8N8 å¼€å‘æ¿](https://item.szlcsc.com/22034693.html?fromZone s_s__%2522%25E7%25AB%258B%25E5%2588%259B%25E5%25BC%2580%25E5%258F%2591%25E6%259D%25BF%2522) ## å’Œé£å¤©æ°”API ### å’Œé£å¤©æ°”ä»‹ç» > [å’Œâ»›å¤©æ°”](https://www.qweather.com/)æ˜¯ä¸­å›½é¢†å…ˆçš„æ°”è±¡ç§‘æŠ€æœåŠ¡å•†ã€å›½å®¶é«˜æ–°æŠ€æœ¯ ä¼ä¸šï¼Œè‡´åŠ›äºè¿ç”¨å…ˆè¿›æ°”è±¡æ¨¡å‹ç»“åˆå¤§æ•°æ®ã€äººå·¥æ™ºèƒ½ æŠ€æœ¯å‘å±•æ™ºæ…§å‹æ°”è±¡æœåŠ¡ã€‚ ä»–ä»¬çš„ä¸šåŠ¡åŒ…æ‹¬æ°”è±¡æ•°æ®åˆ†å‘ã€åœ°ç†ä¿¡æ¯ã€æ°”è±¡å¯è§† åŒ–ã€ä¸ªäººæ°”è±¡æœåŠ¡ç­‰ï¼Œåœ¨å…¨çƒ10ä¸ªå›½å®¶å»ºæœ‰æ•°æ®ä¸­å¿ƒï¼Œ ä¸º300ä½™å®¶ä¸­å›½åŠå…¨çƒä¼ä¸šã€50ä¸‡å¼€å‘è€…æä¾›ä¼˜è´¨çš„æ•° æ®æœåŠ¡ã€‚ **å¦å¤–çš„è¯** > å’Œé£å¤©æ°”æ”¯æŒç”¨æˆ·å…è´¹ä½¿ç”¨è®¢é˜…ï¼Œåªæ˜¯ä¸€ä¸ªç”¨æˆ·åªèƒ½åˆ›å»ºä¸€ä¸ªé¡¹ç›®APIï¼Œä½†æ˜¯å¯¹æˆ‘ä»¬æ¥è¯´å·²ç»è¶³å¤Ÿäº†ï¼Œæ„Ÿè°¢å’Œé£å¤©æ°”ï¼ ### åˆ›å»ºè‡ªå·±çš„å¤©æ°”API è¯·å‰å¾€ [å’Œé£å¤©æ°”API](https://dev.qweather.com/) å®˜ç½‘ï¼Œæ³¨å†Œè´¦å·å¹¶è¿›å…¥æ§åˆ¶å°ã€‚ ![å›¾ 0](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 51 48.png) å…³äºå’Œé£å¤©æ°”çš„APIä»‹ç»å’Œå¼€å‘æ–‡æ¡£ï¼Œå‚è€ƒæ§åˆ¶å°å¤„çš„ä»‹ç»ï¼š ![å›¾ 2](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 52 04.png) å¼€å§‹åˆ›å»ºå±äºæˆ‘ä»¬çš„API ! ![å›¾ 1](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 51 58.png) å’Œé£å¤©æ°”é¡¹ç›®åˆ›å»ºå‚æ•°å¡«å†™ï¼š ![å›¾ 3](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 52 18.png) å®Œæˆåˆ›å»ºï¼ ![å›¾ 4](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 52 23.png) ### APIä»‹ç» å’Œé£å¤©æ°”çš„ [APIä»‹ç»ç½‘é¡µ](https://dev.qweather.com/docs/api/) å¦‚ä¸‹ï¼š ![å›¾ 5](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 52 33.png) æœ¬æ–‡å°†ç”¨çš„APIæ˜¯``åŸå¸‚å¤©æ°” > æ¯æ—¥å¤©æ°”é¢„æŠ¥ > 3å¤©é¢„æŠ¥API`` ã€‚[ã€APIçš„è¯¦ç»†ä»‹ç»é¡µç‚¹æˆ‘ã€‘](https://dev.qweather.com/docs/api/weather/weather daily forecast/) ![å›¾ 6](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 52 38.png) >**éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ˜¯å…è´¹è®¢é˜…ï¼Œè¦å°†API Hostæ›´æ”¹ä¸º ``devapi.qweather.com``ã€‚** è¿™é‡Œä»¥è·å–æ·±åœ³``3å¤©çš„å¤©æ°”é¢„æŠ¥ä¸ºä¾‹``ï¼Œå…³é”®çš„APIå‚æ•°è¯´æ˜å¦‚ä¸‹ï¼š ```html https://devapi.qweather.com/v7/weather/3d?location 101280601&key YOUR_KEY ``` >è¯·æ±‚å‚æ•°åŒ…æ‹¬å¿…é€‰å’Œå¯é€‰å‚æ•°ï¼Œå‚æ•°ä¹‹é—´ä½¿ç”¨&è¿›è¡Œåˆ†éš”ã€‚è¿™é‡Œåªç»™å¤§å®¶ä»‹ç»å¿…å¡«é¡¹ã€‚ **1. key(å¿…é€‰)** ï¼š ç”¨æˆ·è®¤è¯keyï¼Œè¯·å‚è€ƒ[å¦‚ä½•è·å–ä½ çš„KEY](https://dev.qweather.com/docs/configuration/project and key/)ã€‚ **2. location(å¿…é€‰)** ï¼š éœ€è¦æŸ¥è¯¢åœ°åŒºçš„[LocationID](https://dev.qweather.com/docs/resource/glossary/#locationid)æˆ–ä»¥è‹±æ–‡é€—å·åˆ†éš”çš„ç»åº¦,çº¬åº¦åæ ‡ï¼ˆåè¿›åˆ¶ï¼Œæœ€å¤šæ”¯æŒå°æ•°ç‚¹åä¸¤ä½ï¼‰ï¼ŒLocationIDå¯é€šè¿‡GeoAPIè·å–ã€‚ä¾‹å¦‚ location 101010100 æˆ– location 116.41,39.92 å…³äºè¿™ä¸ªLocationIDéœ€è¦å„ä½è‡ªè¡Œæ ¹æ®å’Œé£å¤©æ°”å®˜æ–¹çš„githubåœ°å€æŸ¥è¯¢ï¼Œè¿™é‡Œæˆ‘æ‰¾åˆ°æ·±åœ³çš„LocationIDä¸ºï¼š``101280601`` ![å›¾ 7](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 52 56.png) ### æ‰‹åŠ¨éªŒè¯APIæ˜¯å¦æ­£ç¡® é¦–å…ˆå›åˆ°ä½ çš„å’Œé£å¤©æ°”ç®¡ç†å°ã€‚ä½ ä¼šçœ‹åˆ°ä½ æ–°å»ºçš„é¡¹ç›®ã€‚ ![å›¾ 8](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 53 03.png) å¤åˆ¶ä½ çš„å¯†é’¥``KEY``ã€‚ ![å›¾ 9](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 53 09.png) ç„¶åå°†ä½ çš„``KEY``å¡«å……åˆ°ä¸‹æ–¹APIçš„``YOUR_KEY``ä¸­ > ä¸‹æ–¹è¿™ä¸ªæ˜¯è·å–æ·±åœ³3å¤©çš„å¤©æ°”é¢„æŠ¥APIï¼Œåªå‰©KEYæ²¡æœ‰å¡«å†™ ```html https://devapi.qweather.com/v7/weather/3d?location 101280601&key YOUR_KEY ``` ä¾‹å¦‚æˆ‘çš„KEYæ˜¯ `ABCasdsdgsdfgdsgdfgdf`ï¼Œåˆ™æˆ‘çš„APIæ˜¯ ```heml https://devapi.qweather.com/v7/weather/3d?location 101280601&key ABCasdsdgsdfgdsgdfgdf ``` å¡«å†™ä½ çš„``KEY``åï¼Œç›´æ¥å¤åˆ¶è¯¥``API``ï¼Œå°†å®ƒä½œä¸ºç½‘å€è·³è½¬åˆ°å¯¹åº”é¡µé¢ï¼Œä½ å°±ä¼šçœ‹çš„è¿”å›çš„å¤©æ°”æ•°æ®ã€‚ ![å›¾ 10](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 53 50.png) å…³äºAPIè¿”å›çš„æ•°æ®å…·ä½“çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Œå‚è€ƒè¯¥[APIçš„ä»‹ç»é¡µ](https://dev.qweather.com/docs/api/weather/weather daily forecast/)ã€‚ ![å›¾ 11](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 53 57.png) **æ ¹æ®è¿”å›çš„å‚æ•°è¯´æ˜ï¼Œè¿™é‡Œæˆ‘å…³æ³¨çš„æ˜¯4ä¸ªæ•°æ®ï¼š** ![å›¾ 12](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 54 03.png) å›¾æ ‡ä»£ç çš„è¯´æ˜ï¼šè¿”å›çš„æ•°æ®ä¸­å…³äºå¤©æ°”çš„è¯´æ˜åªæœ‰ç©ºè½è½çš„æ•°å­—ï¼Œè¿™äº›æ•°å­—åœ¨APIè¯´æ˜ä¸­ä»£è¡¨ç€å„ä¸ªå¤©æ°”æƒ…å†µã€‚[æ•°å­—å¯¹åº”çš„å¤©æ°”æƒ…å†µé“¾æ¥ã€‚](https://dev.qweather.com/docs/resource/icons/) ![å›¾ 13](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 54 11.png) åˆ°è¿™é‡Œæˆ‘ä»¬å°±å·²ç»æ˜¯å‡†å¤‡å¥½äº†ï¼Œæ¥ä¸‹æ¥å¯ä»¥ä¸Šå·¥ç¨‹ä»£ç äº†ã€‚è¯·å‡†å¤‡å¥½ä½ çš„``å®Œæ•´API``å’Œ``KEY``ã€‚ ## å·¥ç¨‹åˆ›å»º åœ¨VSCodeä¸­æ‰“å¼€PlatformIOæ‰©å±•åˆ›å»ºåä¸º`weather`çš„ `Espressif ESP32 S3 DevKitM 1` å·¥ç¨‹ã€‚ å…³äºè¯¦ç»†å›¾æ–‡åˆ›å»ºå·¥ç¨‹çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å·¥ç¨‹åˆ›å»ºå°èŠ‚ã€‚ ## å®‰è£…é©±åŠ¨åº“ åœ¨é©±åŠ¨åº“ä¸‹è½½ç•Œé¢ï¼Œæœç´¢``ArduinoJson``ï¼Œå®‰è£…æ¥è‡ª``Benoit Blanchon`` çš„ ``ArduinoJson``åº“ã€‚å°†è¯¥åº“å®‰è£…åˆ°æˆ‘ä»¬çš„å·¥ç¨‹ä¹‹ä¸­ã€‚ > å…³äºè¯¦ç»†å›¾æ–‡å®‰è£…é©±åŠ¨åº“çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å®‰è£…é©±åŠ¨åº“å°èŠ‚ã€‚ å®‰è£…å®Œæˆä¹‹åï¼Œæ‰“å¼€``platformio.ini``æ–‡ä»¶ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…ä¸Šäº†é©±åŠ¨åº“ã€‚ ![å›¾ 14](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 55 51.png) è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå’Œé£å¤©æ°”APIè¿”å›çš„JSONæ ¼å¼æ˜¯å¸¦äº†[Gzipå‹ç¼©](https://dev.qweather.com/docs/best practices/gzip/)çš„ã€‚ ä¸ºäº†èƒ½å¤Ÿåœ¨ESP32S3ä¸­è¿›è¡ŒGzipçš„è§£å‹æ“ä½œï¼Œå¼•ç”¨äº†githubä¸Šçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ¥è‡ª``pfalcon``çš„[uzlib](https://github.com/pfalcon/uzlib)ã€‚**æ„Ÿè°¢ä¼Ÿå¤§çš„å¼€æºè´¡çŒ®è€…ï¼** ![å›¾ 15](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 56 12.png) åœ¨æˆ‘ä»¬çš„å·¥ç¨‹ä¸­ï¼Œå»``lib``æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹``uzlib``ï¼Œå°†ä»“åº“ä¸­çš„ ``src`` æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶å…¨éƒ¨æ‹‰ä¸‹æ¥ä¿å­˜åœ¨æˆ‘ä»¬åœ¨å·¥ç¨‹ä¸­æ–°å»ºçš„``uzlib``æ–‡ä»¶å¤¹ä¸‹ã€‚ ![å›¾ 16](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 56 21.png) ## ç¼–è¾‘ä»£ç  åœ¨å·¥ç¨‹ä¸­çš„``src``æ–‡ä»¶å¤¹ä¸‹çš„æ–°å»º ``weather.cpp`` æ–‡ä»¶ã€‚ å¾€ ``weather.cpp`` ä¸­å†™å…¥å¦‚ä¸‹ä»£ç ï¼š ```c #include \"weather.h\" Weather::Weather(String apiKey, String location) { this >apiKey apiKey; this >location location; } bool Weather::update() { HTTPClient http; //ç”¨äºè®¿é—®ç½‘ç»œ WiFiClient *stream; int size; http.begin(\"https://devapi.qweather.com/v7/weather/3d?location \"+ this >location + \"&key \" + this >apiKey); //è·å–è¿‘ä¸‰å¤©å¤©æ°”ä¿¡æ¯ int httpcode http.GET(); //å‘é€GETè¯·æ±‚ if(httpcode > 0) { if(httpcode HTTP_CODE_OK) { stream http.getStreamPtr(); //è¯»å–æœåŠ¡å™¨è¿”å›çš„æ•°æ® size http.getSize(); } } else { Serial.printf(\"[HTTP] GET... failed, error: %s\\n\", http.errorToString(httpcode).c_str()); } http.end(); //ç»“æŸå½“å‰è¿æ¥ uint8_t inbuff[size]; stream >readBytes(inbuff, size); uint8_t *outbuf NULL; uint32_t out_size 0; int result ArduinoUZlib::decompress(inbuff,size, outbuf, out_size); deserializeJson(doc, outbuf); today doc[\"daily\"][0].as<JsonObject>(); tomorrow doc[\"daily\"][1].as<JsonObject>(); return true; } //è·å–å¤©æ°”æ•°æ®ä¸­çš„å½“å¤©æœ€é«˜æ°”æ¸©æ•°æ® int Weather::getTempMax(bool is_today) { if(is_today) { return today[\"tempMax\"].as<int>(); } else { return tomorrow[\"tempMax\"].as<int>(); } } //è·å–å¤©æ°”æ•°æ®ä¸­çš„å½“å¤©æœ€ä½æ°”æ¸©æ•°æ® int Weather::getTempMin(bool is_today) { if(is_today) { return today[\"tempMin\"].as<int>(); } else { return tomorrow[\"tempMin\"].as<int>(); } } //è·å–å¤©æ°”æ•°æ®ä¸­çš„å¤©æ°”æ ‡è¯†ä»£ç  int Weather::getWeather(bool is_today, bool is_day) { if(is_today) { if(is_day) return today[\"iconDay\"].as<int>(); else return today[\"iconNight\"].as<int>(); } else { if(is_day) return tomorrow[\"iconDay\"].as<int>(); else return tomorrow[\"iconNight\"].as<int>(); } } ``` åœ¨å·¥ç¨‹ä¸­çš„``include``æ–‡ä»¶å¤¹ä¸‹çš„æ–°å»º ``weather.h`` æ–‡ä»¶ã€‚ å¾€ ``weather.h`` ä¸­å†™å…¥å¦‚ä¸‹ä»£ç ï¼š ```c #ifndef _WEATHER_H #define _WEATHER_H #include \"Arduino.h\" #include \"ArduinoJson.h\" #include \"ArduinoUZlib.h\" #include \"HTTPClient.h\" //å®šä¹‰å¤©æ°”ç±» class Weather { public: Weather(String apiKey, String location); bool update(); //å‘é€ä¸€æ¬¡è¯·æ±‚ä¿¡æ¯ï¼Œè·å–å¤©æ°”æ•°æ® //åªéœ€è¦ä»Šæ˜æ—¥çš„å¤©æ°”ä¸æ¸©åº¦ï¼Œæ•…ä»…è®¾ç½®äº†ä»¥ä¸‹è‹¥å¹²å‡½æ•° int getTempMax(bool is_today); int getTempMin(bool is_today); int getWeather(bool is_today, bool is_day); private: String apiKey; //å¤©æ°”APIå¯†é’¥ String location; //åœ°ç‚¹ StaticJsonDocument<2048> doc; //Jsonå®¹å™¨ JsonObject today, tomorrow; //å¯æ ¹æ®è¿”å›çš„jsonä¿¡æ¯è‡ªè¡Œå®šä¹‰å…¶ä»–å¤©æ°”æ•°æ® }; #endif ``` æ‰“å¼€å·¥ç¨‹ä¸‹çš„``src``æ–‡ä»¶å¤¹ä¸‹çš„``main.cpp``ï¼Œå¹¶ä¸”å†™å…¥å¦‚ä¸‹ä»£ç ï¼š ```c #include <Arduino.h> #include <WiFi.h> #include \"weather.h\" //å®šä¹‰Weatherç±»ï¼Œç”¨äºè§£æJsonæ•°æ®å¹¶è¿”å›å¤©æ°”æ•°æ® //WIFI #define WIFI_SSID \"lckfb\" //è¦è¿æ¥çš„WIFIåç§° #define WIFI_PASSWORD \"12345678\" //è¦è¿æ¥çš„WIFIå¯†ç  #define WIFI_RETRY_COUNT 20 //WIFIè¿æ¥é‡è¯•æ•° //å’Œé£å¤©æ°”é¢„æŠ¥ #define USER_KEY \"d89d4706adcc4fb89d6f166cb420ee39\" //å¯†é’¥ #define LOCATION_ID \"101280601\" //åœ°ç‚¹æ ‡è¯†ï¼šæ·±åœ³ int weatherid; //æ ¹æ®å’Œé£å¤©æ°”APIè¿”å›çš„å¤©æ°”IDæ˜¾ç¤ºå¯¹åº”å¤©æ°” bool is_day 1; //ç™½å¤©ä¸º1ï¼Œå¤œæ™šä¸º0 bool is_today 1; //ä»Šå¤©ä¸º1ï¼Œæ˜å¤©ä¸º0 //åˆ›å»ºå¤©æ°”å¯¹è±¡ Weather weather(USER_KEY, LOCATION_ID); //æ ¹æ®å’Œé£å¤©æ°”APIè¿”å›å¤©æ°”æ ‡è¯† void WeatherIcon(int weatherid) { switch(weatherid) { case 100://ç™½å¤©æ™´ Serial.println(\"ç™½å¤©æ™´\\r\\n\"); break; case 101://å¤šäº‘ case 102://å°‘äº‘ case 151://å¤œé—´å¤šäº‘ case 152://å¤œé—´å°‘äº‘ case 103://æ™´é—´å¤šäº‘ Serial.println(\"å¤šäº‘\\r\\n\"); break; case 104://é˜´å¤© Serial.println(\"é˜´å¤©\\r\\n\"); break; case 150://å¤œé—´æ™´æœ— Serial.println(\"å¤œé—´æ™´æœ—\\r\\n\"); break; case 153://å¤œé—´æ™´é—´å¤šäº‘ Serial.println(\"å¤œé—´å¤šäº‘\\r\\n\"); break; case 305://å°é›¨ case 309://æ¯›æ¯›é›¨/ç»†é›¨ Serial.println(\"å°é›¨\\r\\n\"); break; case 300://é˜µé›¨ case 350://å¤œé—´é˜µé›¨ case 306://ä¸­é›¨ case 399://é›¨ case 313://å†»é›¨ case 314://å°åˆ°ä¸­é›¨ Serial.println(\"é˜µé›¨\\r\\n\"); break; case 301://å¼ºé˜µé›¨ case 351://å¤œé—´å¼ºé˜µé›¨ case 307://å¤§é›¨ case 308://æç«¯é™é›¨ case 310://æš´é›¨ case 311://å¤§æš´é›¨ case 312://ç‰¹å¤§æš´é›¨ case 315://ä¸­åˆ°å¤§é›¨ case 316://å¤§åˆ°æš´é›¨ case 317://æš´é›¨åˆ°å¤§æš´é›¨ case 318://å¤§æš´é›¨åˆ°ç‰¹å¤§æš´é›¨ Serial.println(\"å¤§é›¨\\r\\n\"); break; case 302://é›·é˜µé›¨ Serial.println(\"é›·é˜µé›¨\\r\\n\"); break; case 303://å¼ºé›·é˜µé›¨ Serial.println(\"å¼ºé›·é˜µé›¨\\r\\n\"); break; //é›ªå¤© case 400://å°é›ª case 401://ä¸­é›ª case 402://å¤§é›ª case 403://æš´é›ª case 404://é›¨å¤¹é›ª case 405://é›¨é›ªå¤©æ°” case 406://é˜µé›¨å¤¹é›ª case 407://é˜µé›¨å¤¹é›ª case 408://å°åˆ°ä¸­é›ª case 409://ä¸­åˆ°å¤§é›ª case 410://é›ª case 456://é˜µé›¨å¤¹é›ª case 457://é˜µé›ª case 499://é›ª Serial.println(\"é›ªå¤©\\r\\n\"); break; //é›¾éœ¾ case 500://è–„é›¾ case 501://é›¾ case 509://æµ“é›¾ case 510://å¼ºæµ“é›¾ case 514://å¤§é›¾ case 515://ç‰¹å¼ºæµ“é›¾ Serial.println(\"é›¾å¤©\\r\\n\"); break; case 502://éœ¾ case 511://ä¸­åº¦éœ¾ case 512://é‡åº¦éœ¾ case 513://ä¸¥é‡éœ¾ Serial.println(\"é›¾éœ¾\\r\\n\"); break; } } void setup() { int count 0; char disp_buf[50] {0}; //ä¸²å£åˆå§‹åŒ– Serial.begin(9600); //å°è¯•è¿æ¥WIFIç½‘ç»œ WiFi.begin(WIFI_SSID, WIFI_PASSWORD); //å°è¯•è¿æ¥ç›´è‡³è¶…æ—¶ while (WiFi.status() ! WL_CONNECTED) { count++; if (count > WIFI_RETRY_COUNT) { Serial.println(\"\\r\\nconnection failed.\\r\\n\"); break; } delay(500); Serial.print(\".\"); } //è·å–å¤©æ°”æ•°æ® weather.update(); //WIFIæ–­å¼€è¿æ¥ WiFi.disconnect(); //æ˜¾ç¤ºæœ€ä½ä¸æœ€é«˜æ¸©åº¦ sprintf(disp_buf, \"TempMin %d\", weather.getTempMin(is_today)); Serial.println(disp_buf); sprintf(disp_buf, \"TempMax %d\", weather.getTempMax(is_today)); Serial.println(disp_buf); //æ˜¾ç¤ºå¤©æ°”æ ‡è¯†ä»£ç  sprintf(disp_buf, \"WeatherCode %d\", weather.getWeather(is_today, is_day)); Serial.println(disp_buf); //æ ¹æ®å¤©æ°”æ ‡è¯†ä»£ç ç¡®å®šå¤©æ°” WeatherIcon(weather.getWeather(is_today, is_day)); } void loop() { delay(1000); } ``` ## ä»£ç éªŒè¯ ä»£ç ç¼–å†™å®Œæˆä¹‹åï¼Œå°†ESP32S3å¼€å‘æ¿æ¥å…¥ç”µè„‘ä¸‹è½½ä»£ç ï¼Œç„¶åæ‰“å¼€ä¸²å£ç›‘è§†å™¨æŸ¥çœ‹ç°è±¡ã€‚ > ä¸‹è½½æ­¥éª¤è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„ä»£ç éªŒè¯å°èŠ‚ã€‚ å®é™…è·å–å¤©æ°”æ•°æ®çš„æ•ˆæœå¦‚ä¸‹ï¼š æœ€ä½æ¸©åº¦26ï¼Œæœ€é«˜æ¸©åº¦31ï¼Œå¤©æ°”ä»£ç ä¸º307ï¼Œå¯¹åº”çš„å°±æ˜¯å¤§é›¨ã€‚ ![å›¾ 17](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 57 17.png) æŸ¥çœ‹å’Œé£å¤©æ°”çš„APIä¸­[å¤©æ°”ä»£ç è¯´æ˜](https://dev.qweather.com/docs/resource/icons/)ï¼Œç¡®è®¤æ•°æ®æ˜¯æ­£ç¡®çš„ã€‚ ![å›¾ 18](../../static/images/docs/diy/picxel clock/weather/weather 2024 12 05 23 57 22.png) >! è¯´æ˜ï¼šå¦‚æœä½ æ ¹æ®ä»£ç æ“ä½œè¿è¡Œä¸èµ·æ¥ï¼Œå¯ä»¥ä¸‹è½½ğŸ‘‰[ä¾‹ç¨‹](https://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/example/weather)çœ‹çœ‹"},"/diy/picxel-clock/install.html":{"title":"åƒç´ æ—¶é’Ÿç¯å¢ƒæ­å»º","content":" title: åƒç´ æ—¶é’Ÿç¯å¢ƒæ­å»º keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## å®‰è£…VScode å®‰è£…çš„æ­¥éª¤ç½‘ç»œä¸Šå¤šçš„å¾ˆï¼Œè¿™é‡Œä¸å†ä»‹ç»ã€‚ ## VSCodeå®‰è£…PlatformIOæ‰©å±• æ‰“å¼€VSCodeçš„æ‰©å±•å®‰è£…ã€‚ ![å›¾ 0](../../static/images/docs/diy/picxel clock/install/install 2024 12 05 22 46 30.png) æœç´¢``platformio``å¹¶è¿›è¡Œå®‰è£…ã€‚ ![å›¾ 1](../../static/images/docs/diy/picxel clock/install/install 2024 12 05 22 46 44.png) å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å®‰è£…ï¼Œé€šå¸¸æ˜¯éœ€è¦é­”æ³•çš„ï¼Œæ¯•ç«ŸæœåŠ¡å™¨åœ¨æµ·å¤–ã€‚ ### ç¦»çº¿å®‰è£…PIO å½“ç‚¹å‡»å®‰è£…æ—¶ï¼ŒPIOå°±ä¼šå»githubä¸Šå®‰è£…å¯¹åº”çš„èµ„æºï¼Œä½†æ˜¯githubè¿˜æ˜¯æœ‰å¾ˆå¤šäººä¸çŸ¥é“æ€ä¹ˆä¸Šï¼Œä¹Ÿä¸çŸ¥é“æ€ä¹ˆå¼€é­”æ³•ï¼Œæ‰€ä»¥å½“å‡ºç°ä¸‹å›¾ä¸­çš„æç¤ºæ—¶ï¼Œé©¬ä¸Šå…³é—­VSCodeã€‚ ![å›¾ 2](../../static/images/docs/diy/picxel clock/install/install 2024 12 05 22 46 58.png) è¿™é‡Œæä¾›ä¸€ä¸ªPIOç¦»çº¿çš„èµ„æ–™åŒ…ï¼Œ <mark>é€šè¿‡ç½‘ç›˜åˆ†äº«çš„æ–‡ä»¶ï¼šPIOèµ„æºåŒ… <mark>é“¾æ¥: https://pan.baidu.com/s/1n0lSM8ngeu1Wt5uJzMze A æå–ç : LGGA </mark> ![å›¾ 3](../../static/images/docs/diy/picxel clock/install/install 2024 12 05 22 47 16.png) å»åˆ°Cç›˜è‡ªå·±çš„ç”µè„‘ç”¨æˆ·åä¸‹ï¼š ![å›¾ 4](../../static/images/docs/diy/picxel clock/install/install 2024 12 05 22 47 25.png) å°†ç™¾åº¦ç½‘ç›˜ä¸­ä¸‹è½½çš„ <kbd>.platformio.zip</kbd>è§£å‹åˆ°ä½ çš„ç”µè„‘ç”¨æˆ·åæ–‡ä»¶å¤¹ä¸‹æ›¿æ¢ã€‚æ›¿æ¢å®Œæˆåï¼Œ`.platformio`æ–‡ä»¶å¤¹ä¸­å…¨éƒ¨çš„æ–‡ä»¶å¦‚ä¸‹ï¼š > æ³¨æ„åˆ«æé”™äº†ï¼Œæ˜¯å°†ç™¾åº¦ç½‘ç›˜ä¸­çš„å†…å®¹è§£å‹åˆ°ç”µè„‘ç”¨æˆ·åä¸‹æ›¿æ¢ï¼Œä¸è¦å†åµŒå¥—ä¸€ä¸ª.platformioæ–‡ä»¶å¤¹ã€‚ ![å›¾ 5](../../static/images/docs/diy/picxel clock/install/install 2024 12 05 22 47 40.png) ## PlatformIOä»‹ç» æ‰“å¼€VSCodeï¼Œæ‰“å¼€æˆ‘ä»¬åˆšæ‰å®‰è£…çš„PIO. ![å›¾ 6](../../static/images/docs/diy/picxel clock/install/install 2024 12 05 22 48 01.png) ç•Œé¢çš„ä»‹ç»ï¼š ![å›¾ 7](../../static/images/docs/diy/picxel clock/install/install 2024 12 05 22 48 17.png) é‚£ä¹ˆè¿™é‡Œå®‰è£…å°±å®Œæˆäº†ã€‚"},"/diy/picxel-clock/ds1302.html":{"title":"æœ¬åœ°æ—¶é’Ÿè¯»å–ä¸æ˜¾ç¤º","content":" title: æœ¬åœ°æ—¶é’Ÿè¯»å–ä¸æ˜¾ç¤º keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## å·¥ç¨‹åˆ›å»º åœ¨VSCodeä¸­æ‰“å¼€PlatformIOæ‰©å±•åˆ›å»ºå·¥ç¨‹ã€‚ ![å›¾ 0](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 53 19.png) è®¾ç½®å·¥ç¨‹å‘å¯¼ ![å›¾ 1](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 53 26.png) ![å›¾ 2](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 53 32.png) ç­‰å¾…åˆ›å»ºå®Œæˆã€‚ ![å›¾ 3](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 53 37.png) ## å®‰è£…é©±åŠ¨åº“ åˆ›å»ºå®Œæˆä¹‹åï¼Œæˆ‘ä»¬åœ¨VSCodeä¸­æ‰“å¼€æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„å·¥ç¨‹æ–‡ä»¶å¤¹ã€‚ ![å›¾ 4](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 53 42.png) åœ¨VSCodeä¸­å›åˆ°PlatformIOçš„ä¸»é¡µï¼Œç»™å·¥ç¨‹å®‰è£…DS1302çš„é©±åŠ¨åº“ã€‚ ![å›¾ 5](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 54 05.png) ![å›¾ 6](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 54 09.png) æœç´¢DS1302ï¼Œå®‰è£…læ¥è‡ª``Rafa Couto``çš„``Ds1302``åº“ã€‚ ![å›¾ 7](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 54 14.png) å°†åº“å®‰è£…åˆ°æˆ‘ä»¬çš„å·¥ç¨‹ä¸­ã€‚ ![å›¾ 8](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 54 19.png) ![å›¾ 9](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 54 29.png) æ‰“å¼€``platformio.ini``æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…ä¸Šäº†DS1302çš„é©±åŠ¨åº“ã€‚ ![å›¾ 10](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 54 35.png) ## ç¼–è¾‘ä»£ç  æ‰“å¼€å·¥ç¨‹ä¸‹çš„``src``æ–‡ä»¶å¤¹ä¸‹çš„``main.cpp``ã€‚ è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š ```C #include <Arduino.h> #include <Ds1302.h> //è®¡æ—¶æ¨¡å—DS1302ç›¸å…³å®šä¹‰ #define RST 10 //ds1302çš„RSTå¼•è„šå®šä¹‰ #define DATA 3 //ds1302çš„DATAå¼•è„šå®šä¹‰ #define CLK 2 //ds1302çš„CLKå¼•è„šå®šä¹‰ Ds1302 rtc(RST, CLK, DATA); //åˆ›å»ºDS1302è¿™ä¸ªå¯¹è±¡ void setup() { //åˆå§‹åŒ–ä¸²å£ Serial.begin(9600); //åˆå§‹åŒ–DS1302 rtc.init(); //æµ‹è¯•æ—¶é’Ÿæ˜¯å¦åœæ­¢å¹¶è®¾ç½®ä¸€ä¸ªæ—¥æœŸæ—¶é—´æ¥å¯åŠ¨å®ƒ if (rtc.isHalted()) { Serial.println(\"RTC is halted. Setting time...\"); //åˆ›å»ºåŸºäºDS1302åº“ä¸‹çš„æ—¶é—´å‚æ•° Ds1302::DateTime dt { .year 24, .month Ds1302::MONTH_JUL, .day 27, .hour 14, .minute 13, .second 0, .dow Ds1302::DOW_SAT }; //å°†è®¾ç½®çš„æ—¶é—´å†™å…¥DS1302æ¨¡å— rtc.setDateTime(&dt); } else { Serial.println(\"RTC is busy.\\r\\n\"); } Serial.println(\"Time start.\\r\\n\"); } void loop() { char outputString[100] {0}; Ds1302::DateTime now; //è·å–å½“å‰æ—¶é—´å¹¶ä¸”å­˜å‚¨åœ¨nowä¸­ rtc.getDateTime(&now); static uint8_t last_second 0; //å¦‚æœç§’æ•°å‘ç”Ÿæ›´æ–° if (last_second ! now.second) { //æ‰‹åŠ¨æ›´æ–°ç§’æ•°ï¼Œæ–¹ä¾¿ä¸‹æ¬¡åˆ¤æ–­ last_second now.second; //æ ¼å¼åŒ–å­—ç¬¦ä¸² sprintf(outputString, \"%d %d %d %d %d:%d:%d\\r\\n\", now.year+2000, now.month, now.day, now.dow, now.hour, now.minute, now.second ); //è¾“å‡ºå­—ç¬¦ä¸² Serial.println(outputString); } delay(1000); } ``` ## ç¡¬ä»¶è¿æ¥ ![å›¾ 11](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 55 19.png) > è¿™é‡Œå…¶å®æˆ‘æ˜¯åšäº†ç”µè·¯è®¾è®¡çš„ï¼Œå¦‚æœä½ çš„æ¨¡å—ä¸Šæ²¡æœ‰RSTçš„è¯åº”è¯¥æ˜¯ä¸ç”¨è¿æ¥RSTå¼•è„šçš„ã€‚ > ![å›¾ 12](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 55 34.png) ## ä»£ç éªŒè¯ ä»£ç ç¼–å†™å®Œæˆä¹‹åï¼Œå°†**ESP32S3å¼€å‘æ¿**æ¥å…¥ç”µè„‘ã€‚æˆ‘å½“å‰çš„å¼€å‘æ¿ä¸Šæ˜¯**CH340K**çš„é©±åŠ¨ï¼Œæ•…æˆ‘è¿™é‡Œé€‰æ‹©**COM3ç«¯å£**ã€‚ ![å›¾ 13](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 56 05.png) ç¼–è¯‘å¹¶ä¸‹è½½åˆ°å¼€å‘æ¿ä¸­ã€‚ ![å›¾ 14](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 56 11.png) ç‚¹å‡»æ‰“å¼€ä¸²å£ç›‘è§†å™¨ã€‚ ![å›¾ 15](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 56 16.png) å¯ä»¥çœ‹åˆ°å¼€å‘æ¿å¯ä»¥æ­£å¸¸çš„è¯»å–å’Œè®¾ç½®DS1302çš„æ—¶é—´ã€‚è¾“å‡ºæ­£å¸¸ã€‚ ![å›¾ 16](../../static/images/docs/diy/picxel clock/ds1302/ds1302 2024 12 05 22 56 21.png) >! è¯´æ˜ï¼šå¦‚æœä½ æ ¹æ®ä»£ç æ“ä½œè¿è¡Œä¸èµ·æ¥ï¼Œå¯ä»¥ä¸‹è½½ğŸ‘‰[ä¾‹ç¨‹](https://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/example/ds1302)çœ‹çœ‹"},"/diy/picxel-clock/ntptime.html":{"title":"è·å–ç½‘ç»œæ—¶é—´","content":" title: è·å–ç½‘ç»œæ—¶é—´ keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## NTPä»‹ç» NTPç½‘ç»œæ—¶é—´åè®®ï¼ˆNetwork Time Protocolï¼ŒNTPï¼‰ï¼Œæ˜¯ä¸€ç§ç”¨äºåœ¨è®¡ç®—æœºç½‘ç»œä¸ŠåŒæ­¥æ—¶é—´çš„åè®®ã€‚å®ƒé€šè¿‡åœ¨æ—¶é—´æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´äº¤æ¢æ—¶é—´ä¿¡æ¯æ¥ç¡®ä¿ç½‘ç»œä¸­çš„è®¡ç®—æœºæ—¶é’Ÿä¿æŒå‡†ç¡®çš„æ—¶é—´åŒæ­¥ã€‚ä»¥ä¸‹æ˜¯NTPçš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼š **ç‰¹ç‚¹** **ç²¾ç¡®æ€§ï¼š** NTPèƒ½å¤Ÿæä¾›éå¸¸é«˜çš„æ—¶é—´åŒæ­¥ç²¾åº¦ï¼Œé€šå¸¸åœ¨æ¯«ç§’çº§ï¼Œç”šè‡³å¯ä»¥è¾¾åˆ°å¾®ç§’çº§ã€‚ **å¯æ‰©å±•æ€§ï¼š** NTPè®¾è®¡ç”¨äºåœ¨å¹¿æ³›çš„ç½‘ç»œç¯å¢ƒä¸­å·¥ä½œï¼Œä»å±€åŸŸç½‘åˆ°å¹¿åŸŸç½‘ï¼Œå¯ä»¥æ”¯æŒå¤§é‡å®¢æˆ·ç«¯ã€‚ **åˆ†å±‚ç»“æ„ï¼š** NTPé‡‡ç”¨å±‚çº§åŒ–çš„æ—¶é—´åŒæ­¥æ¶æ„ï¼Œæ—¶é—´ä¿¡æ¯ä»é«˜ç²¾åº¦çš„å‚è€ƒæ—¶é’Ÿæºé€šè¿‡å¤šä¸ªæ—¶é—´æœåŠ¡å™¨å±‚ä¼ é€’åˆ°å®¢æˆ·ç«¯ã€‚ **é²æ£’æ€§ï¼š** NTPèƒ½å¤Ÿå¤„ç†ç½‘ç»œå»¶è¿Ÿã€ä¸¢åŒ…å’Œå…¶ä»–ç½‘ç»œé—®é¢˜ï¼Œç¡®ä¿æ—¶é—´åŒæ­¥çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚ **åº”ç”¨** **æœåŠ¡å™¨åŒæ­¥ï¼š** ç¡®ä¿æœåŠ¡å™¨é›†ç¾¤ä¸­çš„æ‰€æœ‰æœåŠ¡å™¨æ—¶é’ŸåŒæ­¥ã€‚ **ç½‘ç»œå®‰å…¨ï¼š** åœ¨ç½‘ç»œå®‰å…¨ä¸­ï¼ŒåŒæ­¥çš„æ—¶é’Ÿå¯¹äºæ—¥å¿—è®°å½•å’Œäº‹ä»¶å…³è”è‡³å…³é‡è¦ã€‚ **åˆ†å¸ƒå¼ç³»ç»Ÿï¼š** åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå’Œæ•°æ®åº“ä¸­ï¼Œå‡†ç¡®çš„æ—¶é—´åŒæ­¥æœ‰åŠ©äºç»´æŠ¤æ•°æ®ä¸€è‡´æ€§å’Œåè°ƒæ“ä½œã€‚ **NTPå¹¿æ³›åº”ç”¨äºäº’è”ç½‘ä¸Šçš„å„ç§è®¾å¤‡å’Œç³»ç»Ÿä¸­ï¼Œæ˜¯ç°ä»£ç½‘ç»œåŸºç¡€è®¾æ–½çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚** > ä»¥ä¸Šæ¥è‡ª chatGPT çš„ä»‹ç» ## ç¡¬ä»¶å‡†å¤‡ å› ä¸ºé¡¹ç›®è¦æœ‰ç½‘ç»œæ—¶é—´æ ¡å‡†åŠŸèƒ½ï¼Œè¦ä½¿ç”¨WIFIè·å–ç½‘ç»œæ—¶é—´è¿›è¡Œæ ¡å‡†ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯ESP32S3çš„å¼€å‘æ¿ã€‚ > **è´­ä¹°åœ°å€ï¼š**[ç«‹åˆ›Â·ESP32S3R8N8 å¼€å‘æ¿](https://item.szlcsc.com/22034693.html?fromZone s_s__%2522%25E7%25AB%258B%25E5%2588%259B%25E5%25BC%2580%25E5%258F%2591%25E6%259D%25BF%2522) ![å›¾ 1](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 14 24.png) ## å·¥ç¨‹åˆ›å»º åœ¨VSCodeä¸­æ‰“å¼€PlatformIOæ‰©å±•åˆ›å»ºåä¸º`ntpTime`çš„ `Espressif ESP32 S3 DevKitM 1` å·¥ç¨‹ã€‚ å…³äºè¯¦ç»†å›¾æ–‡åˆ›å»ºå·¥ç¨‹çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å·¥ç¨‹åˆ›å»ºå°èŠ‚ã€‚ ## å®‰è£…é©±åŠ¨åº“ åœ¨é©±åŠ¨åº“å®‰è£…ç•Œé¢ï¼Œæœç´¢``NTPClient``ï¼Œå®‰è£…æ¥è‡ª``Fabrice Weinberg`` çš„ ``NTPClient``åº“ã€‚ > å…³äºè¯¦ç»†å›¾æ–‡å®‰è£…é©±åŠ¨åº“çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å®‰è£…é©±åŠ¨åº“å°èŠ‚ã€‚ å®‰è£…å®Œæˆä¹‹åï¼Œæ‰“å¼€``platformio.ini``æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…ä¸Šäº†é©±åŠ¨åº“ã€‚ ![å›¾ 1](../../static/images/docs/diy/picxel clock/ntptime/ntptime 2024 12 05 23 43 21.png) ## ç¼–è¾‘ä»£ç  æ‰“å¼€å·¥ç¨‹ä¸‹çš„``src``æ–‡ä»¶å¤¹ä¸‹çš„``main.cpp``ã€‚ è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š ```c #include <Arduino.h> #include <WiFi.h> #include <NTPClient.h> #include <WiFiUdp.h> //è®¾ç½®ä½ è¦ESP32S3è¿æ¥çš„WIFIåç§° #define WIFI_SSID \"lckfb\" //è®¾ç½®ä½ è¦ESP32S3è¿æ¥çš„WIFIå¯†ç  #define WIFI_PASS \"12345678\" // å®šä¹‰NTPæœåŠ¡å™¨ const char* ntpServer \"pool.ntp.org\"; // å®šä¹‰æ—¶åŒºï¼ˆä»¥å°æ—¶ä¸ºå•ä½ï¼Œä¾‹å¦‚ï¼š+1æˆ– 3ï¼‰ const long gmtOffset 8; // å®šä¹‰å¤ä»¤æ—¶ï¼ˆDaylight Saving Timeï¼ŒDSTï¼‰çš„åç§»é‡ï¼ˆé€šå¸¸ä¸º0æˆ–3600ç§’ï¼‰ const int daylightOffset 0; // åˆ›å»ºUDPå®ä¾‹ WiFiUDP ntpUDP; // åˆ›å»ºNTPå®¢æˆ·ç«¯å®ä¾‹ NTPClient timeClient(ntpUDP, ntpServer, gmtOffset * 3600, daylightOffset * 3600); void setup() { //åˆå§‹åŒ–ä¸²å£ Serial.begin(9600); // è¿æ¥åˆ°Wi Fi WiFi.begin(WIFI_SSID, WIFI_PASS); //å¦‚æœæ²¡æœ‰è¿æ¥ä¸Šä¸²å£å°±ä¸€ç›´è¾“å‡º ... //å¦‚æœè¿æ¥ä¸ä¸Šè¯·ç¡®ä¿ä½ è¦è¿æ¥çš„WIFIä¸æ˜¯5Gé¢‘æ®µ! //å¤§éƒ¨åˆ†ESP32ç³»åˆ—éƒ½åªèƒ½è¿æ¥2.4Gé¢‘æ®µ! while (WiFi.status() ! WL_CONNECTED) { delay(500); Serial.print(\".\"); } // å¯åŠ¨NTPå®¢æˆ·ç«¯ timeClient.begin(); // è®¾ç½®æ—¶é—´åŒæ­¥é—´éš”ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ timeClient.setUpdateInterval(60000); // 1åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ } void loop() { // æ›´æ–°NTPæ—¶é—´ timeClient.update(); if (timeClient.getEpochTime() > 0) { // è·å–æˆåŠŸ unsigned long epochTime timeClient.getEpochTime(); struct tm *ptm gmtime ((time_t *)&epochTime); //å¹´æ˜¯è‡³1900å¹´åå¼€å§‹è®¡ç®—,æ‰€ä»¥æˆ‘ä»¬å®é™…ä½¿ç”¨å¾—+1900 int year ptm >tm_year + 1900; //æœˆæ˜¯ä»0å¼€å§‹ç®—,æ‰€ä»¥æˆ‘ä»¬å®é™…ä½¿ç”¨å¾—+1 int month ptm >tm_mon + 1; int day ptm >tm_mday; int hour ptm >tm_hour; int minute ptm >tm_min; int second ptm >tm_sec; // æ‰“å°æ—¶é—´ Serial.printf(\"%d %02d %02d %02d:%02d:%02d\\n\", year, month, day, hour, minute, second); } else { // è·å–å¤±è´¥ï¼Œå¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œé‡è¯•æˆ–é”™è¯¯å¤„ç† Serial.println(\"Failed to get NTP time\"); } delay(1000); // æ¯1ç§’å°è¯•ä¸€æ¬¡ } ``` ## ä»£ç éªŒè¯ ä»£ç ç¼–å†™å®Œæˆä¹‹åï¼Œå°†ESP32S3å¼€å‘æ¿æ¥å…¥ç”µè„‘ä¸‹è½½ä»£ç ï¼Œç„¶åæ‰“å¼€ä¸²å£ç›‘è§†å™¨æŸ¥çœ‹ç°è±¡ã€‚ > ä¸‹è½½æ­¥éª¤è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„ä»£ç éªŒè¯å°èŠ‚ã€‚ å®é™…è·å–ç½‘ç»œæ—¶é—´çš„æ•ˆæœå¦‚ä¸‹ï¼š ![å›¾ 2](../../static/images/docs/diy/picxel clock/ntptime/ntptime 2024 12 05 23 44 35.png) **åç»­æˆ‘ä»¬ä½¿ç”¨åˆ°ç¡¬ä»¶çš„RTCæ—¶é’Ÿæ¨¡å—æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡NTPçš„æ–¹å¼è·å–ç½‘ç»œçš„æ—¶é—´è¿›è¡Œæ ¡å‡†äº†ã€‚** >! è¯´æ˜ï¼šå¦‚æœä½ æ ¹æ®ä»£ç æ“ä½œè¿è¡Œä¸èµ·æ¥ï¼Œå¯ä»¥ä¸‹è½½ğŸ‘‰[ä¾‹ç¨‹](https://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/example/ntpTime)çœ‹çœ‹"},"/diy/picxel-clock/download.html":{"title":"åƒç´ æ—¶é’Ÿèµ„æ–™ä¸‹è½½","content":" title: åƒç´ æ—¶é’Ÿèµ„æ–™ä¸‹è½½ keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## é¡¹ç›®å¼€æºåœ°å€ >! å¼€æºåœ°å€ï¼šhttps://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock å¦‚æœä½ å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œé¼“åŠ±é¼“åŠ±ï¼Œç»™å¼€æºé¡¹ç›®ç‚¹ä¸ªâ­Starå§~ ## å›ºä»¶ä¸‹è½½ >! ä¸‹è½½åœ°å€ï¼šhttps://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/firmware ### å½“å‰å›ºä»¶ åºå· å›ºä»¶åç§° æ›´æ–°æ—¶é—´ å¤‡æ³¨ 1 ESP32S3R8N8_PixelClock_0.0.1.bin 2024 07 28 åŒ…å« æ—¶é’Ÿ / å¤©æ°” / æ¸©æ¹¿åº¦ / æ•°å­—é›¨ / éŸ³å¾‹æ‹¾éŸ³ç¯ 2 ESP32S3R8N8_PixelClock_0.0.2.bin 2024 07 28 åŒ…å« æ—¶é’Ÿ / å¤©æ°” / æ¸©æ¹¿åº¦ / æ•°å­—é›¨ / éŸ³å¾‹æ‹¾éŸ³ç¯ / WIFIé…ç½‘ ### å›ºä»¶çƒ§å½•æ­¥éª¤ ä½¿ç”¨ä¹é‘«çš„[FLASHä¸‹è½½å™¨](https://www.espressif.com.cn/zh hans/support/download/other tools)ã€‚ ![å›¾ 3](../../static/images/docs/diy/picxel clock/download/download 2024 12 05 22 37 52.png) ä¸‹è½½åè¿è¡Œã€‚å›ºä»¶çƒ§å½•æ“ä½œå¦‚ä¸‹ï¼š ![å›¾ 4](../../static/images/docs/diy/picxel clock/download/download 2024 12 05 22 37 55.png) çƒ§å½•å®Œæˆä¹‹åæ–­ç”µé‡å¯å³å¯ã€‚ ### åœ¨PlatformIOä¸­ç”Ÿæˆå›ºä»¶ å‚è€ƒï¼šhttps://blog.csdn.net/Argon_Ghost/article/details/139307638?ops_request_misc &request_id &biz_id 102&utm_term PlatformIO%E7%94%9F%E6%88%90%E5%9B%BA%E4%BB%B6&utm_medium distribute.pc_search_result.none task blog 2~all~sobaiduweb~default 1 139307638.142^v100^pc_search_result_base4&spm 1018.2226.3001.4187 ## 3Då¤–å£³æ–‡ä»¶ä¸‹è½½ >! ä¸‹è½½åœ°å€ï¼šhttps://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/3Dfile ### 3Dæ–‡ä»¶è¯´æ˜ **å› ä¸ºå®ç‰©å¾ˆå¤§ï¼Œæ‰“å°çš„å¤–å£³éœ€è¦åˆ†å¼€ï¼Œåˆ†å·¦å³ä¸¤è¾¹ã€‚** LEDGrid2x.stl ä¸ºå…‰æ ï¼Œéœ€è¦ä¸€ä¸ªéƒ¨ä»¶æ‰“ä¸¤ä¸ªï¼Œæ‹¼åˆ°ä¸€èµ·ï¼› > è¯´æ˜ï¼šå…‰æ ä¸€å®šè¦é»‘è‰²çš„æè´¨ï¼Œä¸ç®¡æ˜¯3Dæ‰“å°æ—¶é€‰æ‹©é»‘è‰²çš„ææ–™è¿˜æ˜¯åé¢æ”¶åˆ°å–·é»‘æ¼†ï¼Œä¸€å®šè®°å¾—ä½¿ç”¨é»‘è‰²çš„å…‰æ ï¼ä¸ç„¶è§‚æ„Ÿå°±å·®å¾ˆå¤š ![å›¾ 0](../../static/images/docs/diy/picxel clock/download/download 2024 12 05 22 32 35.png) frontFrame2x.stl ä¸ºå¤–å£³è¾¹æ¡†ï¼Œéœ€è¦ä¸€ä¸ªéƒ¨ä»¶æ‰“ä¸¤ä¸ªï¼Œæ‹¼åˆ°ä¸€èµ·ï¼› ![å›¾ 1](../../static/images/docs/diy/picxel clock/download/download 2024 12 05 22 32 50.png) Housing.stl å’Œ Housing_noV.stl ä¸ºåŒä¸€ä¸ªéƒ¨ä»¶ï¼Œé€‰æ‹©ä¸€ä¸ªè¿›è¡Œæ‰“å°å³å¯ï¼Œéƒ½æ˜¯æˆæœ¬è¾ƒé«˜ï¼Œé…Œæƒ…æ‰“å°ï¼› ![å›¾ 2](../../static/images/docs/diy/picxel clock/download/download 2024 12 05 22 32 57.png) å¦‚è¦ç»„å»ºå®Œæ•´çš„å¤–å£³ï¼Œè¿˜éœ€è¦è´­ä¹°é»‘è‰²çš„äºšå…‹åŠ›é€æ˜é¢æ¿ï¼ ``ç”Ÿäº§çš„è§„æ ¼å‚æ•°ï¼šé»‘èŒ¶è‰² é€æ˜äºšå…‹åŠ› 95Ã—330Ã—2mm``"},"/diy/picxel-clock/ledmatrix.html":{"title":"å½©ç¯é©±åŠ¨","content":" title: å½©ç¯é©±åŠ¨ keywords: keyword1, keyword2 desc: description for this article show_source: false excerpt_separator: \"\" update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## ç¡¬ä»¶å‡†å¤‡ ### WS2812çŸ©é˜µå½©ç¯ ![å›¾ 0](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 14 08.png) **è´­ä¹°åœ°å€ï¼š**[WS2812Bå…¨å½©è½¯åƒç´ å±8X8 8X32 16X16å¹»å½©5Væ˜¾ç¤ºå¯ç¼–ç¨‹åƒç´ è½¯å±](https://item.taobao.com/item.htm?spm a1z09.2.0.0.24ee2e8dC5LwBl&id 737696448369&_u r2t4uge57a73&skuId 5263566850408) ### ESP32S3å¼€å‘æ¿ ![å›¾ 1](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 14 24.png) **è´­ä¹°åœ°å€ï¼š**[ç«‹åˆ›Â·ESP32S3R8N8 å¼€å‘æ¿](https://item.szlcsc.com/22034693.html?fromZone s_s__%2522%25E7%25AB%258B%25E5%2588%259B%25E5%25BC%2580%25E5%258F%2591%25E6%259D%25BF%2522) ## å·¥ç¨‹åˆ›å»º åœ¨VSCodeä¸­æ‰“å¼€PlatformIOæ‰©å±•åˆ›å»ºåä¸º`LEDMatrix`çš„ `Espressif ESP32 S3 DevKitM 1` å·¥ç¨‹ã€‚ å…³äºè¯¦ç»†å›¾æ–‡åˆ›å»ºå·¥ç¨‹çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å·¥ç¨‹åˆ›å»ºå°èŠ‚ã€‚ ## å®‰è£…é©±åŠ¨åº“ æœ€åº•å±‚çš„é©±åŠ¨ï¼Œéœ€è¦åˆ†åˆ«å®‰è£…ä¸¤ä¸ªåº“ï¼š 1. æœç´¢``Adafruit NeoMatrix``ï¼Œå®‰è£…æ¥è‡ª``Adafruit``çš„``Adafruit NeoMatrix``åº“ã€‚ 2. æœç´¢``Adafruit GFX Library``ï¼Œå®‰è£…æ¥è‡ª``Adafruit``çš„``Adafruit GFX Library``åº“ã€‚ å°†å®ƒä»¬éƒ½å®‰è£…åˆ°æˆ‘ä»¬çš„å·¥ç¨‹å½“ä¸­ã€‚ > å…³äºè¯¦ç»†å›¾æ–‡å®‰è£…é©±åŠ¨åº“çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å®‰è£…é©±åŠ¨åº“å°èŠ‚ã€‚ éƒ½å®‰è£…å®Œæˆä¹‹åï¼Œæ‰“å¼€``platformio.ini``æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…ä¸Šäº†ä¸¤ä¸ªé©±åŠ¨åº“ã€‚ ![å›¾ 2](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 16 11.png) ## ç¼–è¾‘ä»£ç  é¦–å…ˆå¯¼å…¥æˆ‘ä»¬çš„å­—åº“ï¼Œè¿™é‡Œæˆ‘æä¾›ç»™å¤§å®¶ä¸€ä¸ªasciiçš„å­—åº“ã€‚åœ¨å·¥ç¨‹ä¸‹çš„``include``æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª ``my_font.h``æ–‡ä»¶ã€‚ æ¥ä¸‹æ¥å¾€ ``my_font.h`` æ–‡ä»¶å†™å…¥æˆ‘ä»¬çš„å­—æ¨¡ä»£ç ï¼š > ç›´æ¥å¤åˆ¶ä»¥ä¸‹ä»£ç åˆ°ä½ çš„æ–‡ä»¶ä¸‹ ```c #include \"Arduino.h\" #include \"Adafruit_GFX.h\" const uint8_t PicopixelBitmaps[] PROGMEM { 0xE8, 0xB4, 0x57, 0xD5, 0xF5, 0x00, 0x4E, 0x3E, 0x80, 0xA5, 0x4A, 0x4A, 0x5A, 0x50, 0x80, 0x6A, 0x40, 0x95, 0x80, 0xAA, 0x80, 0x5D, 0x00, 0x60, 0xE0, 0x80, 0x25, 0x48, 0xF6, 0xDE, 0x59, 0x2E, 0xE7, 0xCE, 0xE7, 0x9E, 0xB7, 0x92, 0xF3, 0x9E, 0xF3, 0xDE, 0xE4, 0x92, 0xF7, 0xDE, 0xF7, 0x9E, 0xA0, 0x46, 0x64, 0xE3, 0x80, 0x98, 0xC5, 0x04, 0x56, 0xC6, 0x57, 0xDA, 0xD7, 0x5C, 0x72, 0x46, 0xD6, 0xDC, 0xF3, 0xCE, 0xF3, 0x48, 0x72, 0xD4, 0xB7, 0xDA, 0xF8, 0x24, 0xD4, 0xBB, 0x5A, 0x92, 0x4E, 0x8E, 0xEB, 0x58, 0x80, 0x9D, 0xB9, 0x90, 0x56, 0xD4, 0xD7, 0x48, 0x56, 0xD4, 0x40, 0xD7, 0x5A, 0x71, 0x1C, 0xE9, 0x24, 0xB6, 0xD4, 0xB6, 0xA4, 0x8C, 0x6B, 0x55, 0x00, 0xB5, 0x5A, 0xB5, 0x24, 0xE5, 0x4E, 0xEA, 0xC0, 0x91, 0x12, 0xD5, 0xC0, 0x54, 0xF0, 0x90, 0xC7, 0xF0, 0x93, 0x5E, 0x71, 0x80, 0x25, 0xDE, 0x5E, 0x30, 0x6E, 0x80, 0x77, 0x9C, 0x93, 0x5A, 0xB8, 0x45, 0x60, 0x92, 0xEA, 0xAA, 0x40, 0xD5, 0x6A, 0xD6, 0x80, 0x55, 0x00, 0xD7, 0x40, 0x75, 0x90, 0xE8, 0x71, 0xE0, 0xBA, 0x40, 0xB5, 0x80, 0xB5, 0x00, 0x8D, 0x54, 0xAA, 0x80, 0xAC, 0xE0, 0xE5, 0x70, 0x6A, 0x26, 0xFC, 0xC8, 0xAC, 0x5A}; const GFXglyph PicopixelGlyphs[] PROGMEM { {0, 0, 0, 2, 0, 1}, // 0x20 ' ' {0, 1, 5, 2, 0, 4}, // 0x21 '!' {1, 3, 2, 4, 0, 4}, // 0x22 '\"' {2, 5, 5, 6, 0, 4}, // 0x23 '#' {6, 3, 6, 4, 0, 4}, // 0x24 '$' {9, 3, 5, 4, 0, 4}, // 0x25 '%' {11, 4, 5, 5, 0, 4}, // 0x26 '&' {14, 1, 2, 2, 0, 4}, // 0x27 ''' {15, 2, 5, 3, 0, 4}, // 0x28 '(' {17, 2, 5, 3, 0, 4}, // 0x29 ')' {19, 3, 3, 4, 0, 3}, // 0x2A '*' {21, 3, 3, 4, 0, 3}, // 0x2B '+' {23, 2, 2, 3, 0, 0}, // 0x2C ',' {24, 3, 1, 4, 0, 2}, // 0x2D ' ' {25, 1, 1, 2, 0, 0}, // 0x2E '.' {26, 3, 5, 4, 0, 4}, // 0x2F '/' {28, 3, 5, 4, 0, 4}, // 0x30 '0' {30, 3, 5, 4, 0, 4}, // 0x31 '1' {32, 3, 5, 4, 0, 4}, // 0x32 '2' {34, 3, 5, 4, 0, 4}, // 0x33 '3' {36, 3, 5, 4, 0, 4}, // 0x34 '4' {38, 3, 5, 4, 0, 4}, // 0x35 '5' {40, 3, 5, 4, 0, 4}, // 0x36 '6' {42, 3, 5, 4, 0, 4}, // 0x37 '7' {44, 3, 5, 4, 0, 4}, // 0x38 '8' {46, 3, 5, 4, 0, 4}, // 0x39 '9' {48, 1, 3, 2, 0, 3}, // 0x3A ':' {49, 2, 4, 3, 0, 3}, // 0x3B ';' {50, 2, 3, 3, 0, 3}, // 0x3C '<' {51, 3, 3, 4, 0, 3}, // 0x3D ' ' {53, 2, 3, 3, 0, 3}, // 0x3E '>' {54, 3, 5, 4, 0, 4}, // 0x3F '?' {56, 3, 5, 4, 0, 4}, // 0x40 '@' {58, 3, 5, 4, 0, 4}, // 0x41 'A' {60, 3, 5, 4, 0, 4}, // 0x42 'B' {62, 3, 5, 4, 0, 4}, // 0x43 'C' {64, 3, 5, 4, 0, 4}, // 0x44 'D' {66, 3, 5, 4, 0, 4}, // 0x45 'E' {68, 3, 5, 4, 0, 4}, // 0x46 'F' {70, 3, 5, 4, 0, 4}, // 0x47 'G' {72, 3, 5, 4, 0, 4}, // 0x48 'H' {74, 1, 5, 2, 0, 4}, // 0x49 'I' {75, 3, 5, 4, 0, 4}, // 0x4A 'J' {77, 3, 5, 4, 0, 4}, // 0x4B 'K' {79, 3, 5, 4, 0, 4}, // 0x4C 'L' {81, 5, 5, 6, 0, 4}, // 0x4D 'M' {85, 4, 5, 5, 0, 4}, // 0x4E 'N' {88, 3, 5, 4, 0, 4}, // 0x4F 'O' {90, 3, 5, 4, 0, 4}, // 0x50 'P' {92, 3, 6, 4, 0, 4}, // 0x51 'Q' {95, 3, 5, 4, 0, 4}, // 0x52 'R' {97, 3, 5, 4, 0, 4}, // 0x53 'S' {99, 3, 5, 4, 0, 4}, // 0x54 'T' {101, 3, 5, 4, 0, 4}, // 0x55 'U' {103, 3, 5, 4, 0, 4}, // 0x56 'V' {105, 5, 5, 6, 0, 4}, // 0x57 'W' {109, 3, 5, 4, 0, 4}, // 0x58 'X' {111, 3, 5, 4, 0, 4}, // 0x59 'Y' {113, 3, 5, 4, 0, 4}, // 0x5A 'Z' {115, 2, 5, 3, 0, 4}, // 0x5B '[' {117, 3, 5, 4, 0, 4}, // 0x5C '\\' {119, 2, 5, 3, 0, 4}, // 0x5D ']' {121, 3, 2, 4, 0, 4}, // 0x5E '^' {122, 4, 1, 4, 0, 1}, // 0x5F '_' {123, 2, 2, 3, 0, 4}, // 0x60 '`' {124, 3, 4, 4, 0, 3}, // 0x61 'a' {126, 3, 5, 4, 0, 4}, // 0x62 'b' {128, 3, 3, 4, 0, 2}, // 0x63 'c' {130, 3, 5, 4, 0, 4}, // 0x64 'd' {132, 3, 4, 4, 0, 3}, // 0x65 'e' {134, 2, 5, 3, 0, 4}, // 0x66 'f' {136, 3, 5, 4, 0, 3}, // 0x67 'g' {138, 3, 5, 4, 0, 4}, // 0x68 'h' {140, 1, 5, 2, 0, 4}, // 0x69 'i' {141, 2, 6, 3, 0, 4}, // 0x6A 'j' {143, 3, 5, 4, 0, 4}, // 0x6B 'k' {145, 2, 5, 3, 0, 4}, // 0x6C 'l' {147, 5, 3, 6, 0, 2}, // 0x6D 'm' {149, 3, 3, 4, 0, 2}, // 0x6E 'n' {151, 3, 3, 4, 0, 2}, // 0x6F 'o' {153, 3, 4, 4, 0, 2}, // 0x70 'p' {155, 3, 4, 4, 0, 2}, // 0x71 'q' {157, 2, 3, 3, 0, 2}, // 0x72 'r' {158, 3, 4, 4, 0, 3}, // 0x73 's' {160, 2, 5, 3, 0, 4}, // 0x74 't' {162, 3, 3, 4, 0, 2}, // 0x75 'u' {164, 3, 3, 4, 0, 2}, // 0x76 'v' {166, 5, 3, 6, 0, 2}, // 0x77 'w' {168, 3, 3, 4, 0, 2}, // 0x78 'x' {170, 3, 4, 4, 0, 2}, // 0x79 'y' {172, 3, 4, 4, 0, 3}, // 0x7A 'z' {174, 3, 5, 4, 0, 4}, // 0x7B '{' {176, 1, 6, 2, 0, 4}, // 0x7C '' {177, 3, 5, 4, 0, 4}, // 0x7D '}' {179, 4, 2, 5, 0, 3} }; // 0x7E '~' const GFXfont Picopixel PROGMEM {(uint8_t *)PicopixelBitmaps, (GFXglyph *)PicopixelGlyphs, 0x20, 0x7E, 7}; ``` å­—æ¨¡å‡†å¤‡å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹äº®å½©ç¯çŸ©é˜µï¼Œå¹¶ä¸”æ˜¾ç¤ºasciiçš„å­—ç¬¦äº†ï¼ æ‰“å¼€å·¥ç¨‹ä¸‹çš„srcæ–‡ä»¶å¤¹ä¸‹çš„main.cppã€‚ è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š ```c #include <Arduino.h> #include <Adafruit_NeoMatrix.h> //ç‚¹äº®LEDçŸ©é˜µéœ€è¦çš„åº“ #include \"my_font.h\" //å¼•ç”¨æ–‡å­—åº“å¤´æ–‡ä»¶ //åƒç´ é˜µåˆ—å®šä¹‰ #define kMatrixWidth 32 //å®½åº¦ #define kMatrixHeight 8 //é«˜åº¦ #define BRIGHTNESS 10 //é»˜è®¤äº®åº¦ 0 255 #define BRIGHTNESS_INTERVAL 30 //äº®åº¦è°ƒèŠ‚é—´éš” #define LED_PIN 8 //åƒç´ é˜µåˆ—å¼•è„š Adafruit_NeoMatrix *matrix; //LEDçŸ©é˜µç±»æŒ‡é’ˆ //åƒç´ çŸ©é˜µåˆå§‹åŒ– void InitLED_Matrix(void) { //è®¾ç½®åƒç´ çŸ©é˜µçš„æ–¹å‘ä»¥åŠæ’åˆ—æ–¹å¼ matrix new Adafruit_NeoMatrix(32, 8, LED_PIN, NEO_MATRIX_TOP + NEO_MATRIX_LEFT+ NEO_MATRIX_COLUMNS + NEO_MATRIX_ZIGZAG, NEO_GRB + NEO_KHZ800); matrix >setTextWrap(false); //è®¾ç½®æ–‡å­—æ˜¯å¦è‡ªåŠ¨æ¢è¡Œ matrix >setFont(&Picopixel); //è®¾ç½®å­—ä½“ matrix >clear(); //æ¸…é™¤å½“å‰æ˜¾ç¤ºå†…å®¹ matrix >setBrightness(BRIGHTNESS);//è®¾ç½®äº®åº¦ } //æ˜¾ç¤ºä¿¡æ¯ void ShowMessage(Adafruit_NeoMatrix *matrix, char *message, int len, uint32_t color) { //æ¸…é™¤ä¸Šä¸€æ¬¡çš„æ˜¾ç¤ºå†…å®¹ matrix >clear(); //è®¾ç½®æ–‡æœ¬é¢œè‰² matrix >setTextColor(color); //å¦‚æœæ˜¾ç¤ºçš„å†…å®¹è¿‡é•¿ï¼Œæˆ–è€…è¿‡å° if (len < 1 len > 8) return; //è®¾ç½®é¼ æ ‡å…‰æ ‡çš„ä½ç½®ç”¨ä»¥ç¡®å®šåœ¨å“ªé‡Œæ˜¾ç¤ºæ–‡å­— //Xè½´è‡ªåŠ¨å±…ä¸­ matrix >setCursor(1 + (8 len) * 2, 5); //å°†æ˜¾ç¤ºçš„å†…å®¹è¾“å‡ºè‡³ç¼“å­˜ä¸­ matrix >print(message); //æ˜¾ç¤ºç¼“å­˜ä¸­çš„å†…å®¹ matrix >show(); } void setup() { //åˆå§‹åŒ–LEDçŸ©é˜µæ˜¾ç¤º InitLED_Matrix(); //æ˜¾ç¤º 6 ä¸ªå­—ç¬¦ï¼Œæ˜¾ç¤ºå†…å®¹ï¼šHello!ï¼Œæ˜¾ç¤ºé¢œè‰²ï¼šç»¿è‰²(R,G,B) ShowMessage(matrix, \"Hello!\", 6, matrix >Color(0, 255, 0)); } void loop() { delay(1000); } ``` ## ç¡¬ä»¶è¿æ¥ ![å›¾ 3](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 17 41.png) > è¿™é‡Œå…¶å®æˆ‘æ˜¯åšäº†ç”µè·¯è®¾è®¡çš„ï¼Œä½†æ˜¯æ¨¡å—ç”µè·¯éƒ½æ˜¯ä¸€æ ·çš„ã€‚ > ![å›¾ 4](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 17 49.png) ## ä»£ç éªŒè¯ ä»£ç ç¼–å†™å®Œæˆä¹‹åï¼Œå°†ESP32S3å¼€å‘æ¿æ¥å…¥ç”µè„‘ä¸‹è½½ä»£ç ã€‚ç„¶åè§‚å¯Ÿå½©ç¯çŸ©é˜µçš„ç°è±¡ã€‚ å®ç‰©æ˜¾ç¤ºå¦‚ä¸‹ï¼š **è£¸å±æ˜¾ç¤º** ![å›¾ 5](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 18 43.png) **ä½¿ç”¨é»‘è‰²äºšå…‹åŠ›é¢æ¿+ç™½çº¸æ ¼æŒ¡å…‰çº¿æ˜¾ç¤º** > å å±‚ä»ä¸Šåˆ°ä¸‹æ˜¯è¿™æ ·çš„ï¼šé»‘è‰²äºšå…‹åŠ›é¢æ¿ > ç™½çº¸ > LEDçŸ©é˜µ ![å›¾ 6](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 18 50.png) ## ç¤ºä¾‹ä¸€ï¼šæ˜¾ç¤ºä¸‹é›¨ç‰¹æ•ˆ ### æ–‡ä»¶åˆ›å»ºåˆ†ç±» 1. åœ¨å·¥ç¨‹ä¸‹çš„``include`` æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª ``anim.h``æ–‡ä»¶ã€‚ 2. åœ¨å·¥ç¨‹ä¸‹çš„``src`` æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª ``anim.cpp``æ–‡ä»¶ã€‚ ### ä»£ç ç¼–å†™ åœ¨ ``anim.h`` æ–‡ä»¶ä¸­ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š ```c #ifndef _ANIM_H_ #define _ANIM_H_ #include <Adafruit_NeoMatrix.h> #include \"Arduino.h\" //æ•°å­—é›¨åŠ¨ç”» void movingPixel(Adafruit_NeoMatrix *matrix, int x, int y, int colorh); void showRainingCode(Adafruit_NeoMatrix *matrix); #endif ``` åœ¨ ``anim.cpp`` æ–‡ä»¶ä¸­ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š ```c #include \"anim.h\" //æ•°å­—é›¨ int columnIndex[8]; int stepIndex[8]; int glow[8]; bool Running[8] {false, false, false, false, false, false, false, false}; int stepsTillNext[8] {0, 6, 2, 11, 4, 10, 7, 1}; uint16_t hsv2rgb(Adafruit_NeoMatrix *matrix, uint16_t hue, uint8_t saturation, uint8_t value) { uint8_t red 0; uint8_t green 0; uint8_t blue 0; uint16_t hi (hue / 60) % 6; uint16_t F 100 * hue / 60 100 * hi; uint16_t P value * (100 saturation) / 100; uint16_t Q value * (10000 F * saturation) / 10000; uint16_t T value * (10000 saturation * (100 F)) / 10000; switch (hi) { case 0: red value; green T; blue P; break; case 1: red Q; green value; blue P; break; case 2: red P; green value; blue T; break; case 3: red P; green Q; blue value; break; case 4: red T; green P; blue value; break; case 5: red value; green P; blue Q; break; default: return matrix >Color(255, 0, 0); } red red * 255 / 100; green green * 255 / 100; blue blue * 255 / 100; return matrix >Color(red, green, blue); } //æ•°å­—é›¨ä¸“ç”¨çš„ç§»åŠ¨åƒç´ ç‰¹æ•ˆ void movingPixel(Adafruit_NeoMatrix *matrix, int x, int y, int colorh) { int pixel y; matrix >drawPixel(x, pixel, hsv2rgb(matrix, colorh, 100, 100)); if(pixel 1 > 0){ matrix >drawPixel(x, pixel 1, hsv2rgb(matrix, colorh, 80, 80 ));} if(pixel 2 > 0){ matrix >drawPixel(x, pixel 2, hsv2rgb(matrix, colorh, 70, 70 ));} if(pixel 3 > 0){ matrix >drawPixel(x, pixel 3, hsv2rgb(matrix, colorh, 45, 45 ));} if(pixel 4 > 0){ matrix >drawPixel(x, pixel 4, hsv2rgb(matrix, colorh, 25, 25 ));} if(pixel 5 > 0){ matrix >drawPixel(x, pixel 5, hsv2rgb(matrix, colorh, 10, 10 ));} if(pixel 6 > 0){ matrix >drawPixel(x, pixel 6, matrix >Color(0, 0, 0));} } //æ˜¾ç¤ºæ•°å­—é›¨ç‰¹æ•ˆ void showRainingCode(Adafruit_NeoMatrix *matrix) { for(int i 0; i<8; i++) { if(stepIndex[i] > stepsTillNext[i]) { Running[i] true; stepsTillNext[i] 13; // è¿›è¡Œæ•°ç»„åˆå§‹åŒ– columnIndex[i] random((i*4), ((i+1)*4)); glow[i] random(0, 2); //éšæœºèƒŒæ™¯ç½®ç°å€¼ stepIndex[i] 0; } if(Running[i] true) { movingPixel(matrix, columnIndex[i], stepIndex[i], 240); if(stepIndex[i] 13) { Running[i] false; } } stepIndex[i] + 1; } } ``` æœ€ååœ¨`main.cpp`ä¸­ç¼–å†™å¦‚æœä»£ç ï¼š ```c #include <Arduino.h> #include <Adafruit_NeoMatrix.h> //ç‚¹äº®LEDçŸ©é˜µéœ€è¦çš„åº“ #include \"my_font.h\" //å¼•ç”¨æ–‡å­—åº“å¤´æ–‡ä»¶ #include \"anim.h\" //å¼•ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„åŠ¨ç”»å¤´æ–‡ä»¶ //åƒç´ é˜µåˆ—å®šä¹‰ #define kMatrixWidth 32 //å®½åº¦ #define kMatrixHeight 8 //é«˜åº¦ #define BRIGHTNESS 50 //é»˜è®¤äº®åº¦ 0 255 #define BRIGHTNESS_INTERVAL 30 //äº®åº¦è°ƒèŠ‚é—´éš” #define LED_PIN 8 //åƒç´ é˜µåˆ—å¼•è„š Adafruit_NeoMatrix *matrix; //LEDçŸ©é˜µç±»æŒ‡é’ˆ //åƒç´ çŸ©é˜µåˆå§‹åŒ– void InitLED_Matrix(void) { //è®¾ç½®åƒç´ çŸ©é˜µçš„æ–¹å‘ä»¥åŠæ’åˆ—æ–¹å¼ matrix new Adafruit_NeoMatrix(32, 8, LED_PIN, NEO_MATRIX_TOP + NEO_MATRIX_LEFT+ NEO_MATRIX_COLUMNS + NEO_MATRIX_ZIGZAG, NEO_GRB + NEO_KHZ800); matrix >setTextWrap(false); //è®¾ç½®æ–‡å­—æ˜¯å¦è‡ªåŠ¨æ¢è¡Œ matrix >setFont(&Picopixel); //è®¾ç½®å­—ä½“ matrix >clear(); //æ¸…é™¤å½“å‰æ˜¾ç¤ºå†…å®¹ matrix >setBrightness(BRIGHTNESS);//è®¾ç½®äº®åº¦ } //æ˜¾ç¤ºä¿¡æ¯ void ShowMessage(Adafruit_NeoMatrix *matrix, char *message, int len, uint32_t color) { //æ¸…é™¤ä¸Šä¸€æ¬¡çš„æ˜¾ç¤ºå†…å®¹ matrix >clear(); //è®¾ç½®æ–‡æœ¬é¢œè‰² matrix >setTextColor(color); //å¦‚æœæ˜¾ç¤ºçš„å†…å®¹è¿‡é•¿ï¼Œæˆ–è€…è¿‡å° if (len < 1 len > 8) return; //è®¾ç½®é¼ æ ‡å…‰æ ‡çš„ä½ç½®ç”¨ä»¥ç¡®å®šåœ¨å“ªé‡Œæ˜¾ç¤ºæ–‡å­— //Xè½´è‡ªåŠ¨å±…ä¸­ matrix >setCursor(1 + (8 len) * 2, 5); //å°†æ˜¾ç¤ºçš„å†…å®¹è¾“å‡ºè‡³ç¼“å­˜ä¸­ matrix >print(message); //æ˜¾ç¤ºç¼“å­˜ä¸­çš„å†…å®¹ matrix >show(); } void setup() { //åˆå§‹åŒ–LEDçŸ©é˜µæ˜¾ç¤º InitLED_Matrix(); //æ˜¾ç¤º 6 ä¸ªå­—ç¬¦ï¼Œæ˜¾ç¤ºå†…å®¹ï¼šHello!ï¼Œæ˜¾ç¤ºé¢œè‰²ï¼šç»¿è‰²(R,G,B) ShowMessage(matrix, \"Hello!\", 6, matrix >Color(0, 255, 0)); delay(2000); } void loop() { //æ¸…é™¤ä¹‹å‰çš„æ˜¾ç¤ºå†…å®¹ matrix >clear(); //è®¾ç½®é›¨æ»´ç‰¹æ•ˆ showRainingCode(matrix); //æ˜¾ç¤ºå†…å®¹ matrix >show(); //æ§åˆ¶é›¨æ»´ä¸‹è½é€Ÿåº¦ delay(250); } ``` ### å®ç‰©æ•ˆæœ > çƒ§å½•æ­¥éª¤ä¸å†æè¿°ï¼Œè¿™é‡Œç›´æ¥æä¾›å®ç‰©æ•ˆæœå›¾ã€‚ **ä½¿ç”¨é»‘è‰²äºšå…‹åŠ›é¢æ¿+ç™½çº¸æ ¼æŒ¡å…‰çº¿æ˜¾ç¤º** > å å±‚ä»ä¸Šåˆ°ä¸‹æ˜¯è¿™æ ·çš„ï¼šé»‘è‰²äºšå…‹åŠ›é¢æ¿ > ç™½çº¸ > LEDçŸ©é˜µ ![å›¾ 9](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 22 51.gif) ## ç¤ºä¾‹äºŒï¼šæ˜¾ç¤ºæ—¶é’Ÿå¹¶èµ°æ—¶ > å¹¶ä¸æ˜¯çœŸçš„æ˜¾ç¤ºçœŸå®æ—¶é—´ï¼Œè¿™é‡Œåªæ˜¯æ˜¾ç¤ºä¸ªæ¨¡å‹ï¼Œæ–¹ä¾¿æˆ‘ä»¬åé¢æå¥½æ—¶é’Ÿæ¨¡å—çš„é©±åŠ¨åä½¿ç”¨ ### æ–‡ä»¶åˆ›å»ºåˆ†ç±» ç»§ç»­ç»§ç”¨ä¸Šä¸€ç« èŠ‚çš„ ``anim.h`` å’Œ ``anim.cpp``ï¼Œä½ç½®å’Œæ–‡ä»¶åéƒ½ä¸å˜ã€‚ ### ç¼–å†™ä»£ç  åœ¨``anim.h``ä¸­è¡¥å……å¦‚ä¸‹ï¼š ```c //æ—¶é’Ÿæ—¶é’Ÿ void weekBarDisplay(Adafruit_NeoMatrix *matrix,int week); ``` ä»£ç é¡µé¢æˆªå›¾ï¼š ![å›¾ 10](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 23 17.png) åœ¨``anim.cpp`` æ–‡ä»¶çš„æœ«å°¾è¡¥å……å¦‚ä¸‹ä»£ç ï¼š ```c /**************************************æ•°å­—æ—¶é’Ÿ*********************************************** */ //æ—¥æœŸæ˜¾ç¤º void weekBarDisplay(Adafruit_NeoMatrix *matrix,int week) { week week 1; for (int i 0; i < 7; i++) { if ( i 5 i 6 ) matrix >drawFastHLine(3 + 4 * i, 7, 3, matrix >Color(50, 0, 0)); else matrix >drawFastHLine(3 + 4 * i, 7, 3, matrix >Color(50, 50, 50)); } if ( week 5 week 6 ) //å‘¨å…­ã€æ—¥æ˜¾ç¤ºä¸ºçº¢è‰² matrix >drawFastHLine(3 + 4 * week, 7, 3, matrix >Color(255, 0, 0)); else matrix >drawFastHLine(3 + 4 * week, 7, 3, matrix >Color(255, 255, 255)); } /**************************************æ•°å­—æ—¶é’Ÿ*********************************************** */ ``` ![å›¾ 11](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 23 24.png) åœ¨``main.cpp`` æ–‡ä»¶ä¸­ï¼Œå°†``loop() `` å‡½æ•°ä¸­æ›´æ–°ä¸ºå¦‚ä¸‹ä»£ç ï¼š ```c void loop() { static char disp_buf[50] {0}; static int hour 12; static int minute 59; static int second 0; static int week 2; matrix >clear();//æ¸…å± matrix >setTextColor(matrix >Color(0, 0, 80));//è®¾ç½®æ–‡æœ¬é¢œè‰² matrix >setCursor(3, 5);//è®¾ç½®æ˜¾ç¤ºèµ·å§‹åæ ‡ sprintf(disp_buf, \"%02d:%02d:%02d\\0\", hour, minute, second);//æ ¼å¼åŒ–æ—¶é—´å­—ç¬¦ä¸² matrix >print(disp_buf);//æ˜¾ç¤ºæ—¶åˆ†ç§’ weekBarDisplay(matrix,week);//æ˜¾ç¤ºå‘¨ï¼ˆç‰¹æ®Šçš„æ˜¾ç¤ºæ–¹å¼ï¼‰ matrix >show();//æ›´æ–°æ˜¾ç¤º delay(1000); second second + 1; if( second > 59 ) second 0; } ``` ä»£ç æˆªå›¾ï¼š ![å›¾ 12](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 23 40.png) > ä»£ç ä¸­æ—¶é’Ÿè·‘æ—¶éƒ¨åˆ†æ˜¯éšä¾¿å†™çš„ï¼Œè¿™é‡Œå°±æ˜¯å†™äº†ä¸€ä¸ªæ˜¾ç¤ºæ—¶é—´çš„UIæ¡†æ¶ï¼Œå¹¶ä¸æ˜¯çœŸå®æ—¶é—´çš„è·‘æ—¶ã€‚ ### å®ç‰©éªŒè¯ > çƒ§å½•æ­¥éª¤ä¸å†æè¿°ï¼Œè¿™é‡Œç›´æ¥æä¾›å®ç‰©æ•ˆæœå›¾ã€‚ ![å›¾ 13](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 23 52.gif) **ä¸‹æ–¹æ˜¾ç¤ºçš„å‘¨æ•°ï¼Œå½“å‰æ˜¯å‘¨äºŒï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªé«˜äº®** >! è¯´æ˜ï¼šå¦‚æœä½ æ ¹æ®ä»£ç æ“ä½œè¿è¡Œä¸èµ·æ¥ï¼Œå¯ä»¥ä¸‹è½½ğŸ‘‰[ä¾‹ç¨‹](https://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/example/LEDMatrix)çœ‹çœ‹"},"/diy/picxel-clock/dht11.html":{"title":"æ¸©æ¹¿åº¦è¯»å–","content":" title: æ¸©æ¹¿åº¦è¯»å– keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## å·¥ç¨‹åˆ›å»º åœ¨VSCodeä¸­æ‰“å¼€PlatformIOæ‰©å±•åˆ›å»ºåä¸º`dht11`çš„ `Espressif ESP32 S3 DevKitM 1` å·¥ç¨‹ã€‚ å…³äºè¯¦ç»†å›¾æ–‡åˆ›å»ºå·¥ç¨‹çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å·¥ç¨‹åˆ›å»ºå°èŠ‚ã€‚ ## å®‰è£…é©±åŠ¨åº“ å¾€å·¥ç¨‹ä¸­å®‰è£…æ¥è‡ª``Adafruit``çš„``DHT sensor library``åº“ã€‚ å¯ä»¥æ‰“å¼€``platformio.ini``æ–‡ä»¶ï¼ŒéªŒè¯å·¥ç¨‹æ˜¯å¦å·²ç»å®‰è£…ä¸Šäº†``DHT11``çš„é©±åŠ¨åº“ã€‚ å…³äºè¯¦ç»†å›¾æ–‡å®‰è£…é©±åŠ¨åº“çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å®‰è£…é©±åŠ¨åº“å°èŠ‚ã€‚ ## ç¼–è¾‘ä»£ç  æ‰“å¼€å·¥ç¨‹ä¸‹çš„srcæ–‡ä»¶å¤¹ä¸‹çš„main.cppã€‚ è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š ```c #include <Arduino.h> #include <Adafruit_Sensor.h> #include <DHT.h> //æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨é©±åŠ¨åº“ //DHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ç›¸å…³å®šä¹‰ #define DHTPIN 4 //ä¼ æ„Ÿå™¨å¼•è„šè¿æ¥4 #define DHTTYPE DHT11 //ä¼ æ„Ÿå™¨æ”¯æŒDHT11, DHT12, DHT21, DHT22, AM2301 DHT dht(DHTPIN, DHTTYPE); //åˆå§‹åŒ–æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ //æ¹¿åº¦ å’Œ æ¸©åº¦ çš„å…¨å±€å˜é‡ float humidity 0, temperature 0; //æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨æ•°å€¼è¯»å– void readDHT(void) { //è¯»å–æ¸©åº¦å‚æ•°ä¿å­˜åˆ°å…¨å±€å˜é‡ä¸­ humidity dht.readHumidity(); //è¯»å–æ¹¿åº¦å‚æ•°ä¿å­˜åˆ°å…¨å±€å˜é‡ä¸­ temperature dht.readTemperature(); //åˆ¤æ–­æ¸©æ¹¿åº¦æ•°æ®æ˜¯å¦æ˜¯éæ•°å­— if (isnan(humidity) isnan(temperature)) { Serial.println(\"Failed to read from DHT sensor!\"); return; } } void setup() { //ä¸²å£åˆå§‹åŒ– Serial.begin(9600); //DHT11åˆå§‹åŒ– dht.begin(); } void loop() { char disp_buf[50] {0}; readDHT(); //è¯»å–æ¸©æ¹¿åº¦å‚æ•° //æ ¼å¼åŒ–å­—ç¬¦ä¸² sprintf(disp_buf, \"temperature %02.0d C\", (int)temperature); //è¾“å‡ºæ¸©åº¦ Serial.println(disp_buf); //æ ¼å¼åŒ–å­—ç¬¦ä¸² sprintf(disp_buf, \"humidity %02.0d %%\", (int)humidity); //è¾“å‡ºæ¹¿åº¦ Serial.println(disp_buf); delay(1000); } ``` ## ç¡¬ä»¶è¿æ¥ ![å›¾ 0](../../static/images/docs/diy/picxel clock/dht11/dht11 2024 12 05 23 08 38.png) > è¿™é‡Œå…¶å®æˆ‘æ˜¯åšäº†ç”µè·¯è®¾è®¡çš„ï¼Œå¦‚æœä½ å‘ç°è¯»å–ä¸åˆ°æ•°æ®ï¼Œå¯ä»¥å°è¯•å°†æ¨¡å—VDDæˆ–è€…VCCæ¥åˆ°å¼€å‘æ¿çš„5Vçœ‹çœ‹ã€‚ > ![å›¾ 1](../../static/images/docs/diy/picxel clock/dht11/dht11 2024 12 05 23 08 44.png) ## ä»£ç éªŒè¯ ä»£ç ç¼–å†™å®Œæˆä¹‹åï¼Œå°†ESP32S3å¼€å‘æ¿æ¥å…¥ç”µè„‘ä¸‹è½½ä»£ç ï¼Œç„¶åæ‰“å¼€ä¸²å£ç›‘è§†å™¨æŸ¥çœ‹ç°è±¡ã€‚ > ä¸‹è½½æ­¥éª¤è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„ä»£ç éªŒè¯å°èŠ‚ã€‚ å¯ä»¥çœ‹åˆ°æ¸©æ¹¿åº¦æ•°æ®è¯»å–æ˜¾ç¤ºæ­£å¸¸ã€‚ ![å›¾ 2](../../static/images/docs/diy/picxel clock/dht11/dht11 2024 12 05 23 09 58.png) >! è¯´æ˜ï¼šå¦‚æœä½ æ ¹æ®ä»£ç æ“ä½œè¿è¡Œä¸èµ·æ¥ï¼Œå¯ä»¥ä¸‹è½½ğŸ‘‰[ä¾‹ç¨‹](https://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/example/dht11)çœ‹çœ‹"},"/diy/picxel-clock/voice.html":{"title":"è¯­éŸ³è¯†åˆ«ä¸æ’­æŠ¥","content":" title: è¯­éŸ³è¯†åˆ«ä¸æ’­æŠ¥ keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## ç¡¬ä»¶å‡†å¤‡ ### SU 03Tè¯­éŸ³è¯†åˆ«æ¨¡å— ![å›¾ 0](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 16 09.png) **è´­ä¹°åœ°å€ï¼š**[AIæ™ºèƒ½è¯­éŸ³è¯†åˆ«æ¨¡å—ç¦»çº¿è¯­éŸ³æ§åˆ¶æ¨¡å—è¯­éŸ³è¯†åˆ«èŠ¯ç‰‡å£°æ§æ¨¡å—SU 03T](https://item.taobao.com/item.htm?spm a21n57.1.item.2.5149523ciinTKe&priceTId 213e36a717250841217803005e1125&utparam %7B%22aplus_abtest%22:%224e3555425c253a0aa3856c6a58b82147%22%7D&id 622894893913&ns 1&abbucket 4&skuId 4913882832427&pisk fspsdgvloP4_MmiKcrnFOpFg24Wf1EMz5osvqneaDOBOkBtklNomsORCleLCWRoissQXSOCD_Z7NlttDPDurUY MjtXtz4kr2nBemTVADNU4pJIcs2oU8Y MjZq_k0RKUS1r0WIYMZLAp6IcXtUYHinCpgjfHRCYBWUd wQAH eAv9I5qZF9kiCd9Gj_HrFOWvBdDwQAHth8Lusj1NxsvUYbVXnPAhQQFHvCXdPMfwag7pTP1aePR evdGtLGeM_Fj7JZN5PreHUCttdce1y14w6lnKkM69bWc8JDFvCITGqj_OpTQ56OVef8dSfwtCQD KCHCCvhTH8RMApbIpM5owAjdJPGafID fVpL5JwFZmqHBODEfk342GWnKkEQWSCzj6936C4jyPPrxLGWHuhM_rADN0iX96iThjh9KF6Mj1TDiQWIfOxM_rADN0i1IhfwoIAPdc.) ### ESP32S3å¼€å‘æ¿ ![å›¾ 1](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 14 24.png) **è´­ä¹°åœ°å€ï¼š**[ç«‹åˆ›Â·ESP32S3R8N8 å¼€å‘æ¿](https://item.szlcsc.com/22034693.html?fromZone s_s__%2522%25E7%25AB%258B%25E5%2588%259B%25E5%25BC%2580%25E5%258F%2591%25E6%259D%25BF%2522) ### å…¶ä»–è£…å¤‡ 1. å–‡å­ï¼š`8Î©0.5Wçš„å–‡å­`ï¼ˆè¿™é‡Œå› ä¸ºæˆ‘æ˜¯åšäº†PCBï¼Œæ‰€ä»¥æ˜¯é‡‡ç”¨çš„ç«‹åˆ›å•†åŸçš„å™¨ä»¶ç¼–å·`C530532`ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œé‡‡è´­ä¾¿å®œçš„ï¼‰ **è´­ä¹°åœ°å€ï¼š** https://item.szlcsc.com/550866.html 2. éº¦å…‹é£ï¼š`çµæ•åº¦ 32db` ï¼ˆè¿™é‡Œå› ä¸ºæˆ‘æ˜¯åšäº†PCBï¼Œæ‰€ä»¥æ˜¯é‡‡ç”¨çš„ç«‹åˆ›å•†åŸçš„å™¨ä»¶ç¼–å·`C234013`ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œé‡‡è´­ä¾¿å®œçš„ï¼‰ **è´­ä¹°åœ°å€ï¼š** https://item.szlcsc.com/233795.html 3. ç»™è¯­éŸ³æ¨¡å—ä¸‹è½½çš„è®¾å¤‡CH340ï¼šï¼ˆè¿™é‡Œå› ä¸ºæˆ‘æ˜¯åšäº†PCBï¼Œæ­äº†ä¸‹è½½ç”µè·¯ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œé‡‡è´­æ·˜å®ä¸Šå–çš„CH340æ¨¡å—ï¼Œå¦‚ä¸‹å›¾ï¼‰ ![å›¾ 1](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 17 03.png) ## ç¡¬ä»¶è¿æ¥ æˆ‘ä¹‹å‰è¯´è¿‡æˆ‘æ˜¯è®¾è®¡äº†ç”µè·¯çš„ï¼Œä¸æ˜¯å•ç‹¬çš„æ¥æ¨¡å—ï¼Œæ‰€ä»¥ç¡¬ä»¶éƒ¨åˆ†æˆ‘ä¼šä»‹ç»ç”µè·¯è®¾è®¡æ–¹é¢ã€‚ ![å›¾ 2](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 19 24.png) é¦–å…ˆï¼Œå› ä¸ºè¯­éŸ³æ¨¡å—éœ€è¦æœ‰ä¸€ä¸ªä¸‹è½½è®¾å¤‡ï¼Œè¿™é‡Œç›´æ¥å°†TYPE Cæ¥å£çš„æ•°æ®æ¥å£æ¥åˆ°äº†ä¸€ä¸ªCH340Nï¼ˆå›¾ä¸­çš„U9ï¼Œç¼–å·C2977777ï¼‰çš„å™¨ä»¶ä¸Šã€‚æ¥ä¸‹æ¥å¯¹å„ä¸ªå™¨ä»¶è¿›è¡Œè¯´æ˜ã€‚ 1. R56å’ŒR57æ˜¯USBåè®®ä¸Šè¦æ±‚çš„ï¼Œå¿…é¡»æ˜¯5.1Kï¼Œæ¶‰åŠåˆ°PDè¯±éª—ç”µå‹è¾“å‡ºï¼Œå…·ä½“åŸå› è‡ªè¡Œç™¾åº¦ã€‚ 2. D8å’ŒD7æ˜¯ESDä¿æŠ¤å™¨ä»¶ï¼Œé˜²æ­¢é™ç”µçš„ï¼Œé˜²æ­¢é™ç”µæŸååçº§è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨è¿™äº›å™¨ä»¶ã€‚ 3. VBUSé€šè¿‡ä¸€ä¸ªçŸ­æ¥ç¬¦å·è¿æ¥åˆ°äº†5Vï¼Œè¯´æ˜è¿™ä¸ªTYPE Cè¾“å…¥çš„æ˜¯5Vï¼Œæ˜¯æˆ‘çš„ä¸ªäººä¹ æƒ¯ï¼Œé€šå¸¸å¯ä»¥ç›´æ¥åœ¨USBå¤„æ ‡è®°5Vã€‚ 4. U9å°±æ˜¯ä¹‹å‰è¯´çš„CH340Nï¼Œçœ‹[æ•°æ®æ‰‹å†Œ](https://atta.szlcsc.com/upload/public/pdf/source/20230530/6E401E9554E9F5311886CC8B3F89B62E.pdf)ï¼Œæ˜¯ä¸€ä¸ªå°†USB è½¬ä¸²å£çš„èŠ¯ç‰‡ï¼Œè€Œæˆ‘ä»¬çš„è¯­éŸ³è¯†åˆ«æ¨¡å—å°±æ˜¯é€šè¿‡ä¸²å£ä¸‹è½½ã€‚ 5. C26å’ŒC27ï¼Œé¦–å…ˆæ˜¯C26ï¼Œåœ¨CH340Nçš„æ•°æ®æ‰‹å†Œä¸­æŒ‡å‡ºï¼šå½“CH340Nçš„ç”µå‹è¾“å…¥ä¸º5Væ—¶ï¼Œå¿…é¡»åœ¨V3å¼•è„šå¤„å¤–æ¥ä¸€ä¸ª100nfçš„ç”µå®¹ï¼›VCCå¤„å°½é‡åŠ ä¸€ä¸ª100NFçš„ç”µå®¹ã€‚ 6. R27å’ŒD1ï¼Œæ ¹æ®CH340Nçš„å‚å®¶è¯´æ˜ï¼Œä¸ºäº†é˜²æ­¢ä¸CH340Né€šä¿¡çš„è®¾å¤‡ï¼Œé€šè¿‡RXDå’ŒTXDå¼•è„šå°†ç”µå‹åå……ç»™CH340ï¼Œå»ºè®®åœ¨RXDå¼•è„šä¸Šæ¥å…¥ä¸€ä¸ªé™æµç”µé˜»ï¼ŒTXDä¸Šæ¥ä¸€ä¸ªåå‘äºŒæç®¡ï¼Œé˜²æ­¢ç”µæµç”µå‹å€’çŒã€‚ 7. D2ä¹Ÿæ˜¯ä¸€ä¸ªESDå™¨ä»¶ï¼Œé˜²æ­¢ç±»ä¼¼é›·å‡»ï¼Œé™ç”µç­‰å¯¼è‡´çš„ç¬é—´é«˜å‹æŸåè®¾å¤‡ï¼ŒåŠ å…¥ESDå™¨ä»¶åï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢ç¬é—´çš„é«˜å‹å°†è®¾å¤‡çƒ§æ¯ã€‚ **æ€»ç»“ï¼šå°±æ˜¯ä¸€ä¸ªé€šè¿‡USBä¾›ç”µçš„åŒæ—¶ï¼Œè¿˜å¯ä»¥é€šè¿‡USBç»™è¯­éŸ³æ¨¡å—ä¸‹è½½è¯­éŸ³è¯†åˆ«çš„å›ºä»¶** ![å›¾ 3](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 19 46.png) ä¸‹é¢å°±æ˜¯SU 03Tè¯­éŸ³è¯†åˆ«æ¨¡å—çš„å¤–å›´ç”µè·¯ï¼Œä¸‹é¢æ˜¯å¯¹å„ä¸ªå™¨ä»¶çš„ä»‹ç»ï¼š 1. å› ä¸ºè¿™ä¸ªè¯­éŸ³è¯†åˆ«æ¨¡å—åœ¨ä¸‹è½½å›ºä»¶æ—¶ï¼Œå¿…é¡»åœ¨ä¿æŒæ–­ç”µçš„æƒ…å†µä¸‹ï¼Œåœ¨ç”µè„‘ä¸Šç‚¹å‡»ä¸‹è½½ï¼Œç„¶åå†é€šç”µæ‰èƒ½å¤Ÿä¸‹è½½æˆåŠŸã€‚ä¸ºäº†å®ç°è¿™ä¸ªæ–­ç”µä¸‹è½½æ“ä½œï¼ŒåŠ äº†ä¸€ä¸ªæ‹¨ç å¼€å…³ï¼ˆSW1ï¼‰ã€‚ 2. C19çš„ä½œç”¨æ˜¯å‚¨èƒ½ï¼Œå¿…é¡»è¯­éŸ³è¯†åˆ«æ¨¡å—æ„Ÿè§‰è¿˜æ˜¯ç”µæµæ¶ˆè€—æŒºå¤§çš„ï¼ŒåŠ ä¸€ä¸ª10UFçš„ç”µå®¹ï¼Œåœ¨æ²¡æœ‰ç”µæµæ—¶å°±ä»C19ä¾›ç”µã€‚ 3. è¯­éŸ³é‡‡é›†çš„æ¡†å›¾ä¸­çš„32DBåªçš„å°±æ˜¯è¿™ä¸ªéº¦å…‹é£æ˜¯ 32DBçš„ä¸€ä¸ªéº¦å…‹é£ï¼Œæˆ–è€…å«å’ªå¤´ã€‚ 4. SPK1å°±æ˜¯å–‡å­ã€‚ 5. å›¾ä¸­çš„03TTXDå’Œ03TRXDå°±æ˜¯æ¥åˆ°äº†CH340Nçš„ä¸²å£é€šä¿¡çº¿ä¸Šï¼Œè¯­éŸ³å›ºä»¶å°±æ˜¯é€šè¿‡è¿™ä¸¤æ ¹çº¿è¿›è¡Œå›ºä»¶ä¸‹è½½ã€‚ 6. B2TXå’ŒB3RXæ˜¯æ¥åˆ°äº†å¼€å‘æ¿ä¸Šçš„GPIO13å’ŒGPIO12ï¼Œå¼€å‘æ¿å°†è¿™ä¸¤ä¸ªå¼•è„šè®¾ç½®ä¸ºä¸²å£é€šä¿¡ï¼Œè¯­éŸ³æ¨¡å—ä¹Ÿå°†B2B3è®¾ç½®ä¸ºä¸²å£é€šä¿¡ï¼Œè¿™æ ·æ‰å¯ä»¥æ•°æ®äº’ä¼ ã€‚ è¿™ä¸ªå¾ˆé‡è¦ï¼Œå› ä¸ºè¯¥è¯­éŸ³æ¨¡å—åªèƒ½è®¾ç½®B2å’ŒB3ä¸ºä¸²å£ã€‚ ä½¿ç”¨æ¨¡å—çš„æ¥çº¿å›¾ï¼š ![å›¾ 4](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 19 56.png) ## è¯­éŸ³è¯†åˆ«çš„å‘½ä»¤è¯è®¾ç½® ### æ–°å»ºäº§å“ è¿›å…¥åœ¨çº¿çš„é…ç½®å¹³å°ï¼š [æ™ºèƒ½å…¬å…ƒé›¶ä»£ç å¹³å°](https://smartpi.cn/#/)ï¼Œæ²¡æœ‰æ³¨å†Œçš„å…ˆæ³¨å†Œç„¶åç™»å½•ã€‚ ![å›¾ 5](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 20 03.png) å»åˆ°äº§å“ç®¡ç†ä¸‹ã€‚ ![å›¾ 6](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 20 07.png) æ–°å»ºä¸€ä¸ªäº§å“ ![å›¾ 7](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 20 13.png) äº§å“é…ç½®. ![å›¾ 8](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 20 18.png) ### è¯­éŸ³ä¿¡å·å¤„ç†é…ç½® ä¸‹é¢æ˜¯æˆ‘çš„é…ç½®æˆªå›¾ï¼š ![å›¾ 9](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 20 23.png) ### å¼•è„šé…ç½® å¼•è„šè®¾ç½®ä¸­ï¼Œé€‰æ‹©B2å’ŒB3ä¸ºä¸²å£ï¼Œä¸²å£çš„å…¶ä»–å‚æ•°é»˜è®¤ã€‚ ![å›¾ 10](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 20 27.png) ### å”¤é†’è¯é…ç½® å”¤é†’è¯çš„è®¾ç½®ã€‚è¯¥æ¨¡å—æ˜¯ä¸€ä¸ªäºŒçº§è¯­éŸ³å‘½ä»¤çš„æ¨¡å—ï¼Œç±»ä¼¼ä¸å°çˆ±åŒå­¦ï¼Œä½ å¾—å…ˆé€šè¿‡å”¤é†’è¯å°†æ¨¡å—å”¤é†’ï¼Œç„¶åæ‰èƒ½å¤Ÿè¿›è¡Œä¸‹ä¸€æ­¥çš„è¯­éŸ³å‘½ä»¤ã€‚è¿™é‡Œæˆ‘è®¾ç½®äº†ä¸‰ä¸ªå”¤é†’è¯ï¼Œå½“è¯­éŸ³æ¨¡å—è¯†åˆ«åˆ°å”¤é†’è¯æ—¶ï¼Œä¼šæ’­æŠ¥ä¸‹é¢çš„å”¤é†’å›å¤ã€‚ ![å›¾ 11](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 20 41.png) ### å‘½ä»¤è¯è‡ªå®šä¹‰ å‘½ä»¤è¯è‡ªå®šä¹‰ã€‚å›¾ä¸­çš„`è¡Œä¸º`æ å¯ä»¥éšä¾¿å†™ä¸é‡è¦ï¼›ä½†æ˜¯`è§¦å‘æ–¹å¼`æ å¾—æ³¨æ„ï¼Œå‘½ä»¤è¯è¡¨ç¤ºå½“è¯†åˆ«åˆ°æˆ‘ä»¬çš„è¯­éŸ³å‘½ä»¤æ—¶å°±ä¼šè§¦å‘çš„æ„æ€ï¼Œè€Œä¸²å£è¾“å…¥ï¼Œå°±æ˜¯å½“æ¥æ”¶åˆ°æˆ‘ä»¬å¼€å‘æ¿é€šè¿‡ä¸²å£å‘é€ç»™æ¨¡å—çš„ç‰¹ç‚¹æ ¼å¼çš„ä¸²å£æ•°æ®æ—¶ï¼Œæ‰ä¼šè§¦å‘ã€‚`å‘½ä»¤è¯`æ æ˜¯å½“`è§¦å‘æ–¹å¼`æ ä¸ºå‘½ä»¤è¯æ—¶æ‰å¯ä»¥è¾“å…¥ï¼Œè¾“å…¥çš„å†…å®¹å°±æ˜¯ä½ è¦è¯´ä»€ä¹ˆè¯­éŸ³ï¼Œä»–æ‰ä¼šè§¦å‘è¿™ä¸ªå‘½ä»¤ï¼Œè€Œ``çš„æ„æ€å°±æ˜¯å¯ä»¥è®¾ç½®å¤šä¸ªå‘½ä»¤è¯ã€‚å½“å‘½ä»¤è¯è¢«è§¦å‘æ—¶ï¼Œå¯ä»¥è®¾ç½®æ˜¯å¦è¦è¯­éŸ³æ¨¡å—è¿›è¡Œå›å¤ï¼Œå›å¤å†…å®¹åœ¨`å›å¤è¯­`æ ä¸­é…ç½®ã€‚ ![å›¾ 12](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 20 46.png) ç‚¹å‡»æ§åˆ¶æ ï¼šå¯ä»¥è®¾ç½®å½“å‘½ä»¤è§¦å‘æ—¶ï¼Œéœ€è¦æ§åˆ¶è¯­éŸ³æ¨¡å—åšä»€ä¹ˆæ“ä½œã€‚ ![å›¾ 13](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 20 50.png) åŠ¨ä½œå‚æ•°çš„è®¾ç½®æ–¹å¼ï¼š**ï¼ˆGIFï¼‰** > è¿™é‡Œé™¤äº†ä¸²å£å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®å…¶ä»–çš„åŠ¨ä½œï¼Œå¤§å®¶è‡ªè¡Œäº†è§£ã€‚ ![å›¾ 14](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 21 02.gif) æˆ‘è®¾ç½®çš„æ§åˆ¶å‚æ•°å¦‚ä¸‹ã€‚ ```c è¯­éŸ³è¡¨ å¸§å¤´ æ•°æ® å¸§å°¾ è¯´æ˜ EF 00 FE è¢«è¯­éŸ³å”¤é†’ï¼Œå”¤é†’è¯ï¼šå°è±†å°è±†å°è±†åŒå­¦ä½ å¥½å°è±† EF 01 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šå½“å‰æ¸©æ¹¿åº¦ç°åœ¨æ¸©æ¹¿åº¦ç°åœ¨çš„æ¸©æ¹¿åº¦æ¸©æ¹¿åº¦æ˜¯å¤šå°‘ EF 02 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šå½“å‰æ—¶é—´ç°åœ¨æ—¶é—´ç°åœ¨çš„æ—¶é—´ç°åœ¨æ˜¯ä»€ä¹ˆæ—¶å€™äº†ç°åœ¨å¤šå°‘ç‚¹äº†ç°åœ¨æ—¶é—´æ˜¯å¤šå°‘æŠ¥æ—¶ EF 03 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºæ—¶é—´åˆ‡æ¢æ—¶é—´ç•Œé¢åˆ‡æ¢æ—¶é—´æ˜¾ç¤ºæ—¶é’Ÿåˆ‡æ¢æ—¶é’Ÿç•Œé¢åˆ‡æ¢æ—¶é’Ÿ EF 04 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºå¤©æ°”åˆ‡æ¢å¤©æ°”åˆ‡æ¢å¤©æ°”ç•Œé¢æ˜¾ç¤ºå¤©æ°”ç•Œé¢ EF 05 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºæ¸©æ¹¿åº¦åˆ‡æ¢æ¸©æ¹¿åº¦åˆ‡æ¢æ¸©æ¹¿åº¦ç•Œé¢æ˜¾ç¤ºæ¸©æ¹¿åº¦ç•Œé¢ EF 06 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºæ•°å­—é›¨åˆ‡æ¢æ•°å­—é›¨åˆ‡æ¢æ•°å­—é›¨ç•Œé¢æ˜¾ç¤ºæ•°å­—é›¨ç•Œé¢ EF 07 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºé¢‘è°±ç¯æ˜¾ç¤ºéŸ³å¾‹ç¯åˆ‡æ¢é¢‘è°±ç¯åˆ‡æ¢éŸ³å¾‹ç¯åˆ‡æ¢é¢‘è°±ç¯ç•Œé¢åˆ‡æ¢éŸ³é¢‘ç¯ç•Œé¢æ˜¾ç¤ºé¢‘è°±ç¯ç•Œé¢æ˜¾ç¤ºéŸ³å¾‹ç¯ç•Œé¢ EF 08 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºåˆ‡æ¢åˆ‡å±ç•Œé¢åˆ‡æ¢åˆ‡æ¢ç•Œé¢æ˜¾ç¤ºä¸‹ä¸€ä¸ª ``` å½“å¼€å‘æ¿çš„ä¸²å£æ¥æ”¶åˆ° `EF 00 FE` æ—¶ï¼Œè¯´æ˜è¯­éŸ³æ¨¡å—è§¦å‘äº†å”¤é†’è¯å‘½ä»¤ï¼›å½“å¼€å‘æ¿çš„ä¸²å£æ¥æ”¶åˆ° `EF 01 FE` æ—¶ï¼Œè¯´æ˜è¯­éŸ³æ¨¡å—è§¦å‘äº†å½“å‰æ¸©æ¹¿åº¦çš„å‘½ä»¤ã€‚å…¶å®ƒåŒç†ã€‚ä¸ºäº†æ–¹ä¾¿æ¥æ”¶å¹¶è§£æå¤šæ¡å‘½ä»¤ï¼Œè¿™é‡Œè®¾ç½®æˆä¸ºäº†å¸§å¤´å¸§å°¾çš„æ ¼å¼ã€‚å½“ä¸²å£æ¥æ”¶åˆ°`FE`è¯´æ˜è¯­éŸ³è¯†åˆ«æ¨¡å—è§¦å‘äº†å‘½ä»¤ï¼Œåˆ†æä¸Šä¸€ä¸ªæ¥æ”¶çš„æ•°æ®ï¼Œåˆ™å¯ä»¥çŸ¥é“æ˜¯è¯†åˆ«çš„å“ªä¸€ä¸ªå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼šè¯­éŸ³è¯†åˆ«æ¨¡å—å‘æ¥äº†å‘½ä»¤ï¼š`EF 04 FE` ```C if( RX_BUFF[DATA_LEN] 0XFE )//æ¥æ”¶åˆ°å¸§å°¾ { if( RX_BUFF[DATA_LEN 2] 0XEF ) //ç¡®å®šä¸Šä¸Šä¸ªæ¥æ”¶åˆ°çš„æ•°æ®æ˜¯å¸§å¤´ï¼Œç¡®å®šæ•°æ®æ ¼å¼æ­£ç¡® { SU03T_data cRX_BUFF[DATA_LEN 1]; //æ¥æ”¶ä¸­é—´çš„æ•°æ® } } ``` > 0Xåœ¨ä»£ç ä¸­è¡¨ç¤ºçš„æ˜¯åå…­è¿›åˆ¶çš„æ•°æ®ï¼Œè€Œè¯­éŸ³æ¨¡å—å‘é€çš„EF/FEç­‰æ•°æ®å°±æ˜¯åå…­è¿›åˆ¶ é™¤äº†ä»¥ä¸Šçš„åŠ¨ä½œå‚æ•°å¤–ï¼Œå¤§å®¶è¿˜è®°å¾—ä¹‹å‰è®¾ç½®çš„ä¸²å£è¾“å…¥å‘½ä»¤å—ï¼Ÿ`å½“è¯†åˆ«åˆ°æˆ‘ä»¬è®¾ç½®çš„ç‰¹æ®Šæ ¼å¼çš„ä¸²å£å‘½ä»¤ï¼Œè¯­éŸ³æ¨¡å—å°†ä¼šè¢«è§¦å‘ã€‚`,è¿™ä¸ªç‰¹æ®Šæ ¼å¼çš„ä¸²å£å‘½ä»¤å°±æ˜¯è¿™è¿™é‡Œè®¾ç½®çš„ï¼š ![å›¾ 15](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 21 24.png) è§¦å‘å‘½ä»¤çš„é…ç½®æ­¥éª¤ï¼š**( GIF )** ![å›¾ 16](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 21 34.gif) è¿™æ ·å½“æˆ‘ä»¬å‘é€æ ¼å¼ AA 55 02 1A 46 55 AA æ—¶ï¼Œè¯­éŸ³æ¨¡å—å°±ä¼šçŸ¥é“æˆ‘ä»¬å‘é€ç»™å®ƒçš„æ•°æ®æ˜¯ä»€ä¹ˆäº†ã€‚ å¸§å¤´ æ¶ˆæ¯ç¼–å· æ¸©åº¦æ•°æ® æ¹¿åº¦æ•°æ® å¸§å°¾ AA 55 02 1A 44 55 AA * å¸§å¤´å¸§å°¾æ˜¯åœ¨å¼•è„šé…ç½®æ—¶ï¼Œè®¾ç½®çš„ã€‚ * æ¶ˆæ¯ç¼–å·æ˜¯åœ¨è®¾ç½®è§¦å‘æ—¶è®¾ç½®çš„ã€‚ * è€Œè¿™ä¸ªæ¸©åº¦å’Œæ¹¿åº¦æ•°æ®ï¼Œè¡¨ç¤ºçš„æ˜¯å‘é€ä¸€ä¸ª`char`å‹çš„å˜é‡ï¼Œå¡«å……æ”¹æ•°æ®ã€‚æ¯”å¦‚æˆ‘ä»¬è¦å°†æ¸©åº¦12ï¼Œæ¹¿åº¦70è¿™ä¸¤ä¸ªæ•°æ®å‘é€ç»™è¯­éŸ³æ¨¡å—ï¼Œéœ€è¦å…ˆå°†æ•°æ®è½¬æ¢ä¸º16è¿›åˆ¶ï¼Œ12çš„åå…­è¿›åˆ¶ä¸º0Cï¼Œ70çš„åå…­è¿›åˆ¶ä¸º46ï¼Œåˆ™å‘é€è¿™ä¸ªï¼š<kbd>AA 55 02 0C 70 55 AA</kbd>ï¼Œåˆ™è¯­éŸ³æ¨¡å—å°±ä¼šçŸ¥é“ï¼Œæ¥æ”¶åˆ°äº†02å·è®¾å¤‡çš„æ•°æ® 12 å’Œ 46äº†ã€‚ æˆ‘ä»¬ç°åœ¨çŸ¥é“äº†æ¥æ”¶æ•°æ®çš„æ ¼å¼æ€ä¹ˆå‘é€äº†ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹è¯¥å‘½ä»¤çš„åŠ¨ä½œå‚æ•°é…ç½®æ­¥éª¤ï¼š**ï¼ˆGIFï¼‰** ![](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 22 13.gif) è¿™é‡Œç»§æ‰¿äº†ä¹‹å‰æ¥æ”¶åˆ°çš„æ•°æ®å˜é‡ `temp` å’Œ `humi`ï¼Œè¿™ä¸ª`temp`å°±æ˜¯æˆ‘ä»¬å‘é€çš„æ¸©åº¦æ•°æ®ï¼Œ`humi`å°±æ˜¯æˆ‘ä»¬å‘é€çš„æ¹¿åº¦æ•°æ®ï¼Œ > æ•°æ®å˜é‡æ˜¯åœ¨é…ç½®è§¦å‘å‘½ä»¤æ—¶è®¾ç½®çš„ã€‚ çœ‹å›¾å¤§å®¶åº”è¯¥ä¹ŸçŸ¥é“äº†ï¼Œå°±æ˜¯æ¨¡å—æ¥æ”¶åˆ°æˆ‘ä»¬å‘é€è¿‡å»ç»™å®ƒçš„ç‰¹æ®Šæ ¼å¼çš„ä¸²å£æ•°æ®æ—¶ï¼Œå®ƒä¼šå–å‡ºå…¶ä¸­çš„æ•°æ®ï¼Œå¹¶é€šè¿‡æˆ‘ä»¬çš„è®¾ç½®å°†æ•°æ®æ’­æŠ¥å‡ºæ¥ã€‚æ¯”å¦‚æ‹¿ä¹‹å‰çš„ä¸¾çš„ä¾‹å­ï¼š > æˆ‘ä»¬è¦å°†æ¸©åº¦12ï¼Œæ¹¿åº¦70è¿™ä¸¤ä¸ªæ•°æ®å‘é€ç»™è¯­éŸ³æ¨¡å—ï¼Œéœ€è¦å…ˆå°†æ•°æ®è½¬æ¢ä¸º16è¿›åˆ¶ï¼Œ12çš„åå…­è¿›åˆ¶ä¸º0Cï¼Œ70çš„åå…­è¿›åˆ¶ä¸º46ï¼Œåˆ™å‘é€è¿™ä¸ªï¼š<kbd>AA 55 02 0C 70 55 AA</kbd>ï¼Œåˆ™è¯­éŸ³æ¨¡å—å°±ä¼šçŸ¥é“ï¼Œæ¥æ”¶åˆ°äº†02å·è®¾å¤‡çš„æ•°æ® 12 å’Œ 70äº†ã€‚å½“è¯­éŸ³æ¨¡å—æ¥æ”¶åˆ°æ•°æ®åï¼Œåˆä¼šæ ¹æ®æˆ‘ä»¬çš„åŠ¨ä½œè®¾ç½®è¿›è¡Œæ’­æŠ¥ï¼š`å½“å‰æ¸©åº¦æ˜¯ 12 æ‘„æ°åº¦ï¼Œå½“å‰æ¹¿åº¦æ˜¯ç™¾åˆ†ä¹‹ 46` **ä»¥ä¸‹æ˜¯æˆ‘çš„ä¸¤ä¸ªä¸²å£å‘½ä»¤è¡¨ï¼š** ä¸²å£è§¦å‘å‘½ä»¤ æ’­æŠ¥çš„å†…å®¹ AA 55 01 hour min 55 AA å½“å‰æ—¶é—´ä¸º hour ç‚¹ min åˆ† AA 55 02 temp humi 55 AA å½“å‰æ¸©åº¦æ˜¯ temp æ‘„æ°åº¦ï¼Œå½“å‰æ¹¿åº¦æ˜¯ç™¾åˆ†ä¹‹ humi ### å…å”¤é†’è¯å’Œè¯¯è¯†åˆ«è¯é…ç½® è¿™é‡Œæˆ‘æ²¡æœ‰é…ç½®å¤ªå¤šï¼Œå°±é…ç½®äº†ä¸€ä¸ªå½“å‰æ—¶é—´è¯­éŸ³ã€‚å¯ä»¥ä¸ç”¨è§¦å‘å”¤é†’è¯ï¼Œç›´æ¥è¯´`å½“å‰æ—¶é—´`å°±å¯ä»¥è§¦å‘ã€‚ ![å›¾ 18](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 23 23.png) ### å‘éŸ³äººé…ç½® å¤§å®¶é€‰æ‹©ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„å°±å¥½ï¼Œç„¶åéŸ³é‡æ–¹é¢ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºéŸ³é‡æœ‰ç‚¹å¤§ï¼Œå°±è®¾ç½®ä¸ºäº†36%å·¦å³çš„éŸ³é‡ã€‚ ![å›¾ 19](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 23 28.png) ### å…¶ä»–é…ç½® åœ¨ å…¶ä»–é…ç½® ä¸­å»ºè®®å¤§å®¶å¼€å¯è¿™ä¸ª `å¼€æœºæ’­æŠ¥`åŠŸèƒ½ï¼Œé˜²æ­¢å¤§å®¶å¿˜è®°å”¤é†’è¯ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡å¼€æœºæ’­æŠ¥ï¼Œæ¯æ¬¡å¼€æœºéƒ½è®©æ¨¡å—â€œè‡ªæˆ‘ä»‹ç»â€ã€‚ ![å›¾ 20](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 23 35.png) å…¶ä»–çš„å†…å®¹å¦‚ä¸‹ï¼šå®Œå…¨ä¸ç”¨ç®¡ ![å›¾ 21](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 23 41.png) ### å‘å¸ƒæ–°ç‰ˆæœ¬ ç‚¹å‡»å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œè¿™ä¸ªå¹³å°å°±ä¼šå»ç”Ÿæˆä½ è‡ªå·±çš„è¯­éŸ³å›ºä»¶äº†ï¼Œé€šå¸¸ç”Ÿæˆçš„æ—¶é—´æ¯”è¾ƒä¹…ï¼Œå¾—ç­‰å¤§æ¦‚10~30åˆ†é’Ÿå·¦å³ã€‚ ![å›¾ 22](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 23 46.png) ### ä¸‹è½½å›ºä»¶å’Œçƒ§å½•è½¯ä»¶ å›ºä»¶ç”Ÿæˆä¹‹åï¼Œå»åˆ°ä½ å¯¹åº”çš„äº§å“ç®¡ç†ä¸‹ï¼Œä¸‹è½½ä½ çš„å›ºä»¶ã€‚**(GIF)** ![å›¾ 23](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 24 21.gif) ç‚¹å‡»ä¸‹è½½å›ºä»¶åï¼Œå¦‚å›¾ï¼šï¼ˆjx_firm (2).tar.gzå°±æ˜¯è¯­éŸ³å›ºä»¶ï¼‰ ![å›¾ 24](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 24 46.png) è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä½ è¿˜éœ€è¦ä¸‹è½½è¯­éŸ³å›ºä»¶çš„çƒ§å½•å·¥å…·ï¼Œçƒ§å½•å·¥å…·ä¸­<kbd>æ›´å¤š</kbd>ä¸‹çš„<kbd>ä¸‹è½½SDK</kbd>ä¸­ã€‚ ![å›¾ 25](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 24 53.png) SDKçš„ä¸‹è½½ï¼š ![å›¾ 26](../../static/images/docs/diy/picxel clock/voice/voice 2024 12 06 00 24 58.png) ### è¯­éŸ³å›ºä»¶çš„ä¸‹è½½ `åœ¨ä¸‹è½½å›ºä»¶æ—¶ï¼Œè¦å…ˆå°†æ¨¡å—æ–­ç”µã€‚å¾…ä¸‹è½½å·¥å…·è¯†åˆ«åˆ°æ¨¡å—ä¹‹åï¼Œå†ç»™æ¨¡å—é€šç”µï¼Œæ‰å¯ä»¥æ­£å¸¸ä¸‹è½½ã€‚`è¿™ä¸ªé€šæ–­ç”µæ“ä½œï¼Œç”±åŸç†å›¾ä¸­çš„SW1å¼€å…³è¿›è¡Œæ§åˆ¶ã€‚å¦‚æœå¤§å®¶ä¸æ˜¯åƒæˆ‘ä¸€æ ·ä½¿ç”¨PCBè¿æ¥çš„ï¼Œé‚£ä½¿ç”¨CH340æ¨¡å—ç»™SU 03Tä¾›ç”µï¼Œåœ¨ä¸‹è½½å‰å°†VCCçš„ç”µæºæ‹”æ‰ï¼Œåœ¨è½¯ä»¶ä¸Šç‚¹ä¸‹è½½ä¹‹åå†è¿æ¥VCCã€‚ å…·ä½“çš„çƒ§å½•æ­¥éª¤è§†é¢‘ï¼š[è§†é¢‘åœ°å€](https://www.bilibili.com/video/BV1r5nZe3EsN/) <iframe src \"//player.bilibili.com/player.html?isOutside true&aid 113055635604214&bvid BV1r5nZe3EsN&cid 25672351903&p 1&autoplay 0\" scrolling \"no\" border \"0\" frameborder \"no\" framespacing \"0\" allowfullscreen \"true\" style \"width: 100%; margin: auto; display: block; height: 800px\"></iframe> ## PIOå·¥ç¨‹åˆ›å»º åœ¨VSCodeä¸­æ‰“å¼€PlatformIOæ‰©å±•åˆ›å»ºåä¸º`voiceSu03t`çš„ `Espressif ESP32 S3 DevKitM 1` å·¥ç¨‹ã€‚ å…³äºè¯¦ç»†å›¾æ–‡åˆ›å»ºå·¥ç¨‹çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å·¥ç¨‹åˆ›å»ºå°èŠ‚ã€‚ ## ç¼–è¾‘ä»£ç  åœ¨å·¥ç¨‹é‡Œçš„`src`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª `voiceSu03t.cpp` æ–‡ä»¶ã€‚ åœ¨å·¥ç¨‹é‡Œçš„`include`æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª `voiceSu03t.h` æ–‡ä»¶ã€‚ å¾€`voiceSu03t.cpp` æ–‡ä»¶ä¸­å†™å…¥å¦‚ä¸‹ä»£ç ï¼š ```cpp #include \"voiceSu03t.h\" #include \"stdio.h\" //ä¸²å£ä¸­æ–­æœåŠ¡å‡½æ•°ï¼Œè¯·åŠ¡å¿…åœ¨main.cppä¸­å®šä¹‰å¹¶ä¸”å®ç°è¯¥æ–‡ä»¶ void IRAM_ATTR voiceSerialReceive(); VOICESU03T::VOICESU03T(int8_t uart_num, int8_t tx_pin, int8_t rx_pin, uint32_t baud_rate) { _uart_num uart_num; _tx_pin tx_pin; _rx_pin rx_pin; _baud_rate baud_rate; switch (_uart_num) { case 1: serial &Serial1; break; case 2: serial &Serial2; break; // å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šä¸²å£ } } //è¯­éŸ³æ¨¡å—ä¸²å£æ¥å£åˆå§‹åŒ– void VOICESU03T::begin() { if (serial) { serial >begin(_baud_rate, SERIAL_8N1, _rx_pin, _tx_pin); // æ³¨å†Œä¸­æ–­æœåŠ¡ä¾‹ç¨‹ serial >onReceive(voiceSerialReceive); } } //å‘è¯­éŸ³æ¨¡å—å‘é€ä¸²å£æ•°æ® size_t VOICESU03T::write(uint8_t *data, size_t size) { if (serial) { return serial >write((const uint8_t *)data, size); } return 0; } //è¯»å–è¯­éŸ³æ¨¡å—å‘é€è¿‡æ¥çš„ä¸²å£æ•°æ® int VOICESU03T::read() { if (serial) { return serial >read(); } return 1; } //å½“å‰æ¥æ”¶åˆ°çš„è¯­éŸ³æ¨¡å—å†…å®¹ç¼“å­˜é•¿åº¦ int VOICESU03T::available() { if (serial) { return serial >available(); } return 0; } void VOICESU03T::setState(int8_t state) { _state state; } int8_t VOICESU03T::getState() { return _state; } //å°†10è¿›åˆ¶è½¬æ¢ä¸º16è¿›åˆ¶çš„HEX //å‚æ•°ï¼šdecimalï¼ˆä¼ å…¥çš„10è¿›åˆ¶æ•°ï¼‰ //è¿”å›ï¼š16è¿›åˆ¶hex long VOICESU03T::decimalToHex_big(long decimal) { \tlong hex 0; \tint i 0; \tchar temp_buff[20]; \t \tsprintf(temp_buff, \"%lX\", decimal);//æ¢ä¸ºå­—ç¬¦ä¸²çš„16è¿›åˆ¶ \t//æ ¹æ®å­—ç¬¦ä¸²é•¿åº¦ä¸€ç›´è½¬æ¢ \tfor( i 0 ; temp_buff[i] ! '\\0'; i++ ) \t{ \t\t//å¦‚æœæ˜¯æ•°å­— \t\tif( temp_buff[i] > '0' && temp_buff[i] < '9' ) \t\t{ \t\t\thex (hex << 4) temp_buff[i] '0'; \t\t} \t\telse//å¦‚æœæ˜¯å­—æ¯ \t\t{ \t\t\tswitch( temp_buff[i] ) \t\t\t{ //å…ˆå·¦ç§»å†è½¬æ¢ \t\t\t\tcase 'A':\thex (hex << 4) 0x0A;\tbreak; \t\t\t\tcase 'B':\thex (hex << 4) 0x0B;\tbreak; \t\t\t\tcase 'C':\thex (hex << 4) 0x0C;\tbreak; \t\t\t\tcase 'D':\thex (hex << 4) 0x0D;\tbreak; \t\t\t\tcase 'E':\thex (hex << 4) 0x0E;\tbreak; \t\t\t\tcase 'F':\thex (hex << 4) 0x0F;\tbreak; \t\t\t} \t\t} \t} \treturn hex; } //å‘é€è¯­éŸ³æ’­æŠ¥å½“å‰æ—¶é—´çš„å‘½ä»¤ //hour å°æ—¶æ•°æ®,min åˆ†é’Ÿæ•°æ® void VOICESU03T::voiceSpeechTime(long hour, long min) { unsigned char sendBuff[7] { 0xAA, 0X55, 0X01, 0X00, 0X00, 0X55, 0xAA }; sendBuff[3] decimalToHex_big(hour); sendBuff[4] decimalToHex_big(min); write(sendBuff, 7); } //å‘é€è¯­éŸ³æ’­æŠ¥å½“å‰æ¸©æ¹¿åº¦çš„å‘½ä»¤ //temp æ¸©åº¦æ•°æ®,humi æ¹¿åº¦æ•°æ® void VOICESU03T::voiceSpeechHumiture(long temp, long humi) { unsigned char sendBuff[7] { 0xAA, 0X55, 0X02,0X00, 0X00, 0X55, 0xAA }; sendBuff[3] decimalToHex_big(temp); sendBuff[4] decimalToHex_big(humi); write(sendBuff, 7); } ``` å¾€`voiceSu03t.h` æ–‡ä»¶ä¸­å†™å…¥å¦‚ä¸‹ä»£ç ï¼š ```cpp #ifndef VOICESU03T_H #define VOICESU03T_H #include \"HardwareSerial.h\" class VOICESU03T { public: VOICESU03T(int8_t uart_num, int8_t tx_pin, int8_t rx_pin, uint32_t baud_rate); void begin(); size_t write(uint8_t *data, size_t size); int read(); int available(); void setState(int8_t state); int8_t getState(); long decimalToHex_big(long decimal); void voiceSpeechTime(long hour, long min); void voiceSpeechHumiture(long temp, long humi); private: HardwareSerial *serial; int8_t _uart_num; int8_t _tx_pin; int8_t _rx_pin; uint32_t _baud_rate; int8_t _state; }; #endif // ESP32_EXTRA_UART_H ``` å¾€ `main.cpp` æ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹ä»£ç ï¼š ```cpp #include <Arduino.h> #include \"voiceSu03t.h\" //è¯­éŸ³è¯†åˆ«æ¨¡å—å®šä¹‰ #define VOICE_PORT 1 //è¯­éŸ³è¯†åˆ«æ¨¡å—ä½¿ç”¨çš„ä¸²å£ #define VOICE_TX_PIN 12 //è¯­éŸ³è¯†åˆ«æ¨¡å—ä½¿ç”¨çš„ä¸²å£TXå¼•è„š #define VOICE_RX_PIN 13 //è¯­éŸ³è¯†åˆ«æ¨¡å—ä½¿ç”¨çš„ä¸²å£RXå¼•è„š #define VOICE_TX_BAUDRATE 9600 //è¯­éŸ³è¯†åˆ«æ¨¡å—ä½¿ç”¨çš„ä¸²å£æ³¢ç‰¹ç‡ //åˆ›å»ºè¯­éŸ³è¯†åˆ«å¯¹è±¡ VOICESU03T Su03t(VOICE_PORT, VOICE_TX_PIN, VOICE_RX_PIN, VOICE_TX_BAUDRATE); char su03t_rx_buff[20]; char su03t_rx_len; //è™šæ‹Ÿæ¸©æ¹¿åº¦æ•°æ® int temperature 26; int humidity 70; //è™šæ‹Ÿæ—¶é—´æ•°æ® int hour 12; int minute 59; /* è¯­éŸ³è¡¨ å¸§å¤´ æ•°æ® å¸§å°¾ è¯´æ˜ EF 00 FE è¢«è¯­éŸ³å”¤é†’ï¼Œå”¤é†’è¯ï¼šå°è±†å°è±†å°è±†åŒå­¦ä½ å¥½å°è±† EF 01 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šå½“å‰æ¸©æ¹¿åº¦ç°åœ¨æ¸©æ¹¿åº¦ç°åœ¨çš„æ¸©æ¹¿åº¦æ¸©æ¹¿åº¦æ˜¯å¤šå°‘ EF 02 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šå½“å‰æ—¶é—´ç°åœ¨æ—¶é—´ç°åœ¨çš„æ—¶é—´ç°åœ¨æ˜¯ä»€ä¹ˆæ—¶å€™äº†ç°åœ¨å¤šå°‘ç‚¹äº†ç°åœ¨æ—¶é—´æ˜¯å¤šå°‘æŠ¥æ—¶ EF 03 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºæ—¶é—´åˆ‡æ¢æ—¶é—´ç•Œé¢åˆ‡æ¢æ—¶é—´æ˜¾ç¤ºæ—¶é’Ÿåˆ‡æ¢æ—¶é’Ÿç•Œé¢åˆ‡æ¢æ—¶é’Ÿ EF 04 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºå¤©æ°”åˆ‡æ¢å¤©æ°”åˆ‡æ¢å¤©æ°”ç•Œé¢æ˜¾ç¤ºå¤©æ°”ç•Œé¢ EF 05 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºæ¸©æ¹¿åº¦åˆ‡æ¢æ¸©æ¹¿åº¦åˆ‡æ¢æ¸©æ¹¿åº¦ç•Œé¢æ˜¾ç¤ºæ¸©æ¹¿åº¦ç•Œé¢ EF 06 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºæ•°å­—é›¨åˆ‡æ¢æ•°å­—é›¨åˆ‡æ¢æ•°å­—é›¨ç•Œé¢æ˜¾ç¤ºæ•°å­—é›¨ç•Œé¢ EF 07 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºé¢‘è°±ç¯æ˜¾ç¤ºéŸ³å¾‹ç¯åˆ‡æ¢é¢‘è°±ç¯åˆ‡æ¢éŸ³å¾‹ç¯åˆ‡æ¢é¢‘è°±ç¯ç•Œé¢åˆ‡æ¢éŸ³é¢‘ç¯ç•Œé¢æ˜¾ç¤ºé¢‘è°±ç¯ç•Œé¢æ˜¾ç¤ºéŸ³å¾‹ç¯ç•Œé¢ EF 08 FE è¯†åˆ«åˆ°è¯­éŸ³ï¼šæ˜¾ç¤ºåˆ‡æ¢åˆ‡å±ç•Œé¢åˆ‡æ¢åˆ‡æ¢ç•Œé¢æ˜¾ç¤ºä¸‹ä¸€ä¸ª */ void voiceAnalysis(char* rx_buff) { if( rx_buff[0] 0XEF ) { if( rx_buff[2] 0xFE ) { Su03t.setState(rx_buff[1]); //æ¥æ”¶è¯­éŸ³æ¨¡å—æ ¼å¼å¸§çš„å…³é”®æ•°æ® switch (rx_buff[1]) { case 0x01://å½“å‰æ¸©æ¹¿åº¦ç°åœ¨æ¸©æ¹¿åº¦ç°åœ¨çš„æ¸©æ¹¿åº¦æ¸©æ¹¿åº¦æ˜¯å¤šå°‘ Su03t.voiceSpeechHumiture(temperature,humidity); break; case 0x02://å½“å‰æ—¶é—´ç°åœ¨æ—¶é—´ç°åœ¨çš„æ—¶é—´ç°åœ¨æ˜¯ä»€ä¹ˆæ—¶å€™äº†ç°åœ¨å¤šå°‘ç‚¹äº†ç°åœ¨æ—¶é—´æ˜¯å¤šå°‘æŠ¥æ—¶ Su03t.voiceSpeechTime(hour,minute); break; case 0x03://æ˜¾ç¤ºæ—¶é—´åˆ‡æ¢æ—¶é—´ç•Œé¢åˆ‡æ¢æ—¶é—´æ˜¾ç¤ºæ—¶é’Ÿåˆ‡æ¢æ—¶é’Ÿç•Œé¢åˆ‡æ¢æ—¶é’Ÿ Serial.printf(\"æ˜¾ç¤ºæ—¶é—´ç•Œé¢\"); break; case 0x04://æ˜¾ç¤ºå¤©æ°”åˆ‡æ¢å¤©æ°”åˆ‡æ¢å¤©æ°”ç•Œé¢æ˜¾ç¤ºå¤©æ°”ç•Œé¢ Serial.printf(\"æ˜¾ç¤ºå¤©æ°”ç•Œé¢\"); break; case 0x05://æ˜¾ç¤ºæ¸©æ¹¿åº¦åˆ‡æ¢æ¸©æ¹¿åº¦åˆ‡æ¢æ¸©æ¹¿åº¦ç•Œé¢æ˜¾ç¤ºæ¸©æ¹¿åº¦ç•Œé¢ Serial.printf(\"æ˜¾ç¤ºæ¸©æ¹¿åº¦ç•Œé¢\"); break; case 0x06://æ˜¾ç¤ºæ•°å­—é›¨åˆ‡æ¢æ•°å­—é›¨åˆ‡æ¢æ•°å­—é›¨ç•Œé¢æ˜¾ç¤ºæ•°å­—é›¨ç•Œé¢ Serial.printf(\"æ˜¾ç¤ºæ•°å­—é›¨ç•Œé¢\"); break; case 0x07://æ˜¾ç¤ºé¢‘è°±ç¯æ˜¾ç¤ºéŸ³å¾‹ç¯åˆ‡æ¢é¢‘è°±ç¯åˆ‡æ¢éŸ³å¾‹ç¯åˆ‡æ¢é¢‘è°±ç¯ç•Œé¢åˆ‡æ¢éŸ³é¢‘ç¯ç•Œé¢æ˜¾ç¤ºé¢‘è°±ç¯ç•Œé¢æ˜¾ç¤ºéŸ³å¾‹ç¯ç•Œé¢ Serial.printf(\"æ˜¾ç¤ºé¢‘è°±ç¯ç•Œé¢\"); break; case 0x08://æ˜¾ç¤ºåˆ‡æ¢åˆ‡å±ç•Œé¢åˆ‡æ¢åˆ‡æ¢ç•Œé¢æ˜¾ç¤ºä¸‹ä¸€ä¸ª Serial.printf(\"ç•Œé¢åˆ‡æ¢\"); break; default: break; } } } } // å®šä¹‰ä¸€ä¸ªè¯­éŸ³è¯†åˆ«ä¸²å£çš„ä¸­æ–­æœåŠ¡å‡½æ•° void voiceSerialReceive() { // å½“æœ‰æ•°æ®åˆ°è¾¾æ—¶ï¼Œæ­¤å‡½æ•°ä¼šè¢«è°ƒç”¨ while (Su03t.available()) { // è¯»å–æ•°æ® su03t_rx_buff[su03t_rx_len++] Su03t.read(); if( su03t_rx_len > 3 ) //å¦‚æœæ•°æ®é•¿åº¦è¶…è¿‡è¦æ±‚ { voiceAnalysis(su03t_rx_buff); //æ•°æ®è§£æå¹¶æ‰§è¡Œå¯¹åº”åŠŸèƒ½ for(int i 0;i<10;i++)su03t_rx_buff[i] 0;//æ¸…é™¤æ¥æ”¶çš„æ•°æ® su03t_rx_len 0;//æ¥æ”¶æ•°æ®çš„é•¿åº¦æ¸…é›¶ } } } void setup() { Serial.begin(9600); //è°ƒè¯•ä¸²å£åˆå§‹åŒ– Su03t.begin(); //è¯­éŸ³æ¨¡å—ä¸²å£åˆå§‹åŒ– } void loop() { delay(50); } ``` ## ä»£ç éªŒè¯ ä»£ç ç¼–å†™å®Œæˆä¹‹åï¼Œå°†ESP32S3å¼€å‘æ¿æ¥å…¥ç”µè„‘ä¸‹è½½ä»£ç ï¼Œç„¶åå¯¹è¯­éŸ³æ¨¡å—è¯´å‘½ä»¤è¯æŸ¥çœ‹ç°è±¡ã€‚ > ä¸‹è½½æ­¥éª¤è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„ä»£ç éªŒè¯å°èŠ‚ã€‚ **å®éªŒç°è±¡ï¼šå¯¹è¯­éŸ³æ¨¡å—è¯´æˆ‘ä»¬ä¹‹å‰è®¾ç½®çš„å‘½ä»¤éƒ½æ˜¯æœ‰å“åº”å›å¤çš„** > å½“å‰ä¾‹ç¨‹ä¸­çš„æ¸©åº¦ã€æ¹¿åº¦ã€å°æ—¶ã€åˆ†é’Ÿç­‰æ•°æ®éƒ½æ˜¯**å›ºå®šçš„ï¼Œæ˜¯å‡çš„**ã€‚å¤§å®¶è‡ªè¡Œè°ƒæ•´ ç°è±¡è§†é¢‘ï¼šhttps://live.csdn.net/v/embed/421316 >! è¯´æ˜ï¼šå¦‚æœä½ æ ¹æ®ä»£ç æ“ä½œè¿è¡Œä¸èµ·æ¥ï¼Œå¯ä»¥ä¸‹è½½ğŸ‘‰[ä¾‹ç¨‹](https://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/example/voiceSu03t)çœ‹çœ‹"},"/diy/picxel-clock/basic.html":{"title":"ESP32S3åƒç´ æ—¶é’Ÿ","content":" title: ESP32S3åƒç´ æ—¶é’Ÿ keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## å®ç‰©å±•ç¤º ![å›¾ 21](../../static/images/docs/diy/picxel clock/basic/basic 2024 12 05 22 14 05.png) ![å›¾ 22](../../static/images/docs/diy/picxel clock/basic/basic 2024 12 05 22 14 25.png) ![å›¾ 23](../../static/images/docs/diy/picxel clock/basic/basic 2024 12 05 22 14 30.png) ![å›¾ 24](../../static/images/docs/diy/picxel clock/basic/basic 2024 12 05 22 14 35.png) ## ä»‹ç» åŸºäºç«‹åˆ›Â·ESP32S3R8N8å¼€å‘æ¿åˆ¶ä½œçš„åƒç´ æ—¶é’Ÿã€‚ ## è½¯ä»¶æ¶æ„ VSCodeä¸‹çš„platformIO + arduinoç¯å¢ƒã€‚ ## å™¨ä»¶æ¸…å• 1. 1ä¸ª ESP32S3R8N8å¼€å‘æ¿ 2. 1ä¸ª DHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ 3. 1ä¸ª DS1302æ—¶é’Ÿæ¨¡å— 4. 1ä¸ª 8*32å¤§å°WS2812å½©ç¯çŸ©é˜µ 5. 1ä¸ª MAX4466 è¿ç®—æ”¾å¤§å™¨/éŸ³é¢‘é‡‡é›†æ¨¡å— 6. 1ä¸ª æŒ‰é’® 7. 1ä¸ª SU 03Tè¯­éŸ³è¯†åˆ«æ¨¡å—+é…å¥—çš„å–‡å­å’Œéº¦å…‹é£ï¼ˆå’ªå¤´ï¼‰ 8. 1ä¸ª æŒ¯åŠ¨å°ç”µæœº 9. 1ä¸ª å…‰æ•ç”µé˜»+1Kç”µé˜» ## ç¡¬ä»¶è¿æ¥ <div style \"text align:center;\"> <table style \"margin:auto; width:100%\"> <tr> <td style \"text align:center\"><strong>æ¨¡å—åç§°</strong></td> <td style \"text align:center\">æ¨¡å—å¼•è„š</td> <td style \"text align:center\">ESP32S3R8N8ç®¡è„š</td> </tr> <tr> <td rowspan \"2\">DS1307</td> <td>SDA</td> <td>3</td> </tr> <tr> <td style \"text align:center\">SCL</td> <td style \"text align:center\">2</td> </tr> <tr> <td>DHT11</td> <td>OUT</td> <td>4</td> </tr> <tr> <td>WS2812</td> <td>DIN</td> <td>8</td> </tr> <tr> <td>MAX4466</td> <td>OUT</td> <td>1</td> </tr> <tr> <td>æŒ‰é’®</td> <td>KEY</td> <td>0</td> </tr> <tr> <td rowspan \"2\">SU 03Tè¯­éŸ³è¯†åˆ«æ¨¡å—</td> <td>B2</td> <td>13</td> </tr> <tr> <td style \"text align:center\">B3</td> <td style \"text align:center\">12</td> </tr> <tr> <td>æŒ¯åŠ¨ç”µæœºï¼ˆéœ€è¦ä¸‰æç®¡é©±åŠ¨ï¼‰</td> <td>MOTOR</td> <td>11</td> </tr> <tr> <td>å…‰æ•ç”µé˜»ï¼ˆéœ€è¦1kç”µé˜»åˆ†å‹ï¼‰</td> <td>light</td> <td>5</td> </tr> <tr> <td rowspan \"3\">å…±ç”¨éƒ¨åˆ†</td> <td>3V3(MAX4466, DHT11, å…‰æ•ç”µé˜», DS1302)</td> <td>3V3</td> </tr> <tr> <td style \"text align:center\">5V (WS2812, SU 03T, æŒ¯åŠ¨ç”µæœº)</td> <td style \"text align:center\">5V</td> </tr> <tr> <td style \"text align:center\">GND(å…¨éƒ¨) </td> <td style \"text align:center\">GND</td> </tr> </table> </div> ## åŸç†å›¾ **V1.0.1ç‰ˆ åŸç†å›¾** ![å›¾ 25](../../static/images/docs/diy/picxel clock/basic/basic 2024 12 05 22 15 00.png) ## å¾…å®Œå–„é—®é¢˜ 1. å¦‚æœå¤©æ°”è·å–å¤±è´¥ï¼Œåº”è¯¥æ˜¾ç¤ºè·å–å¤±è´¥ã€‚ 2. æ¿å­å‘çƒ­ï¼Œå¤§æ¦‚æ˜¯ä¸€ç›´å¼€å¯WIFIçš„é—®é¢˜ã€‚ 3. WIFIé…ç½‘æ²¡æœ‰å¥½çœ‹çš„HTMLç•Œé¢ï¼Œè¿›å…¥é…ç½‘æ—¶åƒç´ æ—¶é’Ÿæ²¡æœ‰UIæ˜¾ç¤ºã€‚ 4. äº®åº¦è‡ªåŠ¨è°ƒèŠ‚åŠŸèƒ½ä¸å¤©æ°”ç•Œé¢çš„ä»Šæ˜æ—¥åˆ‡æ¢çš„æ¸ç­æ¸äº®å†²çªäº† ## éƒ¨åˆ†ä»£ç å‚è€ƒ https://wokwi.com/projects/383363216212925441 https://gitee.com/adamhxx/arduino open source/tree/master/ESP32C3 CLOCK https://github.com/sf122458/ESP32C3 PixelClock https://github.com/pfalcon/uzlib ## æ›´æ–°æ—¶é—´ > ä¸€æ¬¡æ›´æ–°æ—¶é—´ï¼š2024 4 24 > äºŒæ¬¡æ›´æ–°æ—¶é—´ï¼š2024 7 28 > ä¸‰æ¬¡æ›´æ–°æ—¶é—´ï¼š2024 8 7 æ–°å¢WIFIé…ç½‘ä½†æ˜¯æ²¡æœ‰æ·»åŠ åŠ¨ç”»æœ‰BUGï¼Œé…ç½‘çš„HTMLç•Œé¢æ²¡æœ‰å®Œå–„ > å››æ¬¡æ›´æ–°æ—¶é—´ï¼š2024 8 8 æ–°å¢äº®åº¦è‡ªåŠ¨è°ƒèŠ‚åŠŸèƒ½ï¼Œä½†æ˜¯å‘ç°ä¸å¤©æ°”ç•Œé¢çš„ä»Šæ˜æ—¥åˆ‡æ¢çš„æ¸ç­æ¸äº®å†²çªäº†ï¼Œæœ‰BUG > äº”æ¬¡æ›´æ–°æ—¶é—´ï¼š2024 8 16 æ–°å¢æŒ¯åŠ¨ç”µæœºåŠŸèƒ½ï¼Œåˆå§‹åŒ–å®ŒæŒ¯åŠ¨ä¸€æ¬¡ï¼ŒæŒ‰ä¸‹æŒ‰é”®å°±æŒ¯åŠ¨ä¸€æ¬¡ã€‚è§£å†³é…ç½‘æ—¶ä¼šè‡ªåŠ¨è¿æ¥ä¸Šä¸€ä¸ªwifiå¯¼è‡´æ— æ³•é…ç½‘é—®é¢˜ï¼Œåˆ é™¤è‡ªåŠ¨è¿æ¥wifiéƒ¨åˆ†ã€‚å‘ç°æ— æ³•è¿›è¡Œç¬¬äºŒæ¬¡é…ç½‘çš„BUG > å…­æ¬¡æ›´æ–°æ—¶é—´ï¼š2024 8 24 æ–°å¢è¯­éŸ³è¯†åˆ«åŠŸèƒ½ï¼Œè¯­éŸ³å‘½ä»¤è¡¨è§main.cppæ–‡ä»¶çš„æ³¨é‡Š > ä¸ƒæ¬¡æ›´æ–°æ—¶é—´ï¼š2024 8 31 æ–°å¢è¯­éŸ³è¯†åˆ«ä¾‹ç¨‹å’Œæ•™ç¨‹æ–‡æ¡£"},"/diy/picxel-clock/hardware.html":{"title":"ç¡¬ä»¶è®¾è®¡","content":" title: ç¡¬ä»¶è®¾è®¡ keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ ## æ•´ä½“åŸç†å›¾ ![å›¾ 0](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 32 53.png) ## ç¡¬ä»¶è®¾è®¡ ### ç”µæºéƒ¨åˆ† ç¬¬ä¸€ç‰ˆæ—¶ï¼Œä½¿ç”¨ FM5324G ä½œä¸ºæ§åˆ¶ã€‚å®ƒæ˜¯ä¸€ä¸ªé›†æˆäº†é”‚ç”µæ± å……ç”µç®¡ç†ï¼Œç”µæ± 5Vå‡å‹è¾“å‡ºï¼Œç”µæ± ç”µé‡åˆ¤æ–­å’Œ LED ç”µé‡æŒ‡ç¤ºçš„é›†æˆç”µæºç®¡ç† ICã€‚ ![å›¾ 1](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 33 12.png) **ä½†æ˜¯å‘ç°ä½¿ç”¨ä¸€ä¸ª800mAhçš„ç”µæ± ï¼Œå¼€ä¸ª10åˆ†é’Ÿå°±æ²¡ç”µäº†ï¼Œç›´æ¥èˆå¼ƒç”µæºç®¡ç†éƒ¨åˆ†ï¼Œç›´æ¥é€šè¿‡TYPE Cæ¥å£è¿›è¡Œä¾›ç”µã€‚** å½“å‰ç‰ˆï¼š ![å›¾ 3](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 33 27.png) é¦–å…ˆï¼Œå› ä¸ºè¯­éŸ³æ¨¡å—éœ€è¦æœ‰ä¸€ä¸ªä¸‹è½½è®¾å¤‡ï¼Œè¿™é‡Œç›´æ¥å°†TYPE Cæ¥å£çš„æ•°æ®æ¥å£æ¥åˆ°äº†ä¸€ä¸ªCH340Nï¼ˆå›¾ä¸­çš„U9ï¼Œç¼–å·C2977777ï¼‰çš„å™¨ä»¶ä¸Šã€‚æ¥ä¸‹æ¥å¯¹å„ä¸ªå™¨ä»¶è¿›è¡Œè¯´æ˜ã€‚ 1. R56å’ŒR57æ˜¯USBåè®®ä¸Šè¦æ±‚çš„ï¼Œå¿…é¡»æ˜¯5.1Kï¼Œæ¶‰åŠåˆ°PDè¯±éª—ç”µå‹è¾“å‡ºï¼Œå…·ä½“åŸå› è‡ªè¡Œç™¾åº¦ã€‚ 2. D8å’ŒD7æ˜¯ESDä¿æŠ¤å™¨ä»¶ï¼Œé˜²æ­¢é™ç”µçš„ï¼Œé˜²æ­¢é™ç”µæŸååçº§è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨è¿™äº›å™¨ä»¶ã€‚ 3. VBUSé€šè¿‡ä¸€ä¸ªçŸ­æ¥ç¬¦å·è¿æ¥åˆ°äº†5Vï¼Œè¯´æ˜è¿™ä¸ªTYPE Cè¾“å…¥çš„æ˜¯5Vï¼Œæ˜¯æˆ‘çš„ä¸ªäººä¹ æƒ¯ï¼Œé€šå¸¸å¯ä»¥ç›´æ¥åœ¨USBå¤„æ ‡è®°5Vã€‚ 4. U9å°±æ˜¯ä¹‹å‰è¯´çš„CH340Nï¼Œçœ‹[æ•°æ®æ‰‹å†Œ](https://atta.szlcsc.com/upload/public/pdf/source/20230530/6E401E9554E9F5311886CC8B3F89B62E.pdf)ï¼Œæ˜¯ä¸€ä¸ªå°†USB è½¬ä¸²å£çš„èŠ¯ç‰‡ï¼Œè€Œæˆ‘ä»¬çš„è¯­éŸ³è¯†åˆ«æ¨¡å—å°±æ˜¯é€šè¿‡ä¸²å£ä¸‹è½½ã€‚ 5. C26å’ŒC27ï¼Œé¦–å…ˆæ˜¯C26ï¼Œåœ¨CH340Nçš„æ•°æ®æ‰‹å†Œä¸­æŒ‡å‡ºï¼šå½“CH340Nçš„ç”µå‹è¾“å…¥ä¸º5Væ—¶ï¼Œå¿…é¡»åœ¨V3å¼•è„šå¤„å¤–æ¥ä¸€ä¸ª100nfçš„ç”µå®¹ï¼›VCCå¤„å°½é‡åŠ ä¸€ä¸ª100NFçš„ç”µå®¹ã€‚ 6. R27å’ŒD1ï¼Œæ ¹æ®CH340Nçš„å‚å®¶è¯´æ˜ï¼Œä¸ºäº†é˜²æ­¢ä¸CH340Né€šä¿¡çš„è®¾å¤‡ï¼Œé€šè¿‡RXDå’ŒTXDå¼•è„šå°†ç”µå‹åå……ç»™CH340ï¼Œå»ºè®®åœ¨RXDå¼•è„šä¸Šæ¥å…¥ä¸€ä¸ªé™æµç”µé˜»ï¼ŒTXDä¸Šæ¥ä¸€ä¸ªåå‘äºŒæç®¡ï¼Œé˜²æ­¢ç”µæµç”µå‹å€’çŒã€‚ 7. D2ä¹Ÿæ˜¯ä¸€ä¸ªESDå™¨ä»¶ï¼Œé˜²æ­¢ç±»ä¼¼é›·å‡»ï¼Œé™ç”µç­‰å¯¼è‡´çš„ç¬é—´é«˜å‹æŸåè®¾å¤‡ï¼ŒåŠ å…¥ESDå™¨ä»¶åï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢ç¬é—´çš„é«˜å‹å°†è®¾å¤‡çƒ§æ¯ã€‚ **æ€»ç»“ï¼šå°±æ˜¯ä¸€ä¸ªé€šè¿‡USBä¾›ç”µçš„åŒæ—¶ï¼Œè¿˜å¯ä»¥é€šè¿‡USBç»™è¯­éŸ³æ¨¡å—ä¸‹è½½è¯­éŸ³è¯†åˆ«çš„å›ºä»¶** ### ä¸»æ§éƒ¨åˆ† ä½¿ç”¨ç«‹åˆ›å¼€å‘æ¿çš„[ç«‹åˆ›Â·ESP32S3R8N8å¼€å‘æ¿](https://lckfb.com/project/detail/lckfb esp32s3r8n8?param baseInfo)ã€‚ ![å›¾ 4](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 33 56.png) æ²¡å•¥å¥½è¯´çš„ï¼Œå°±æ˜¯ç»™å¼€å‘æ¿ä¾›ç”µ5Vå°±å¥½ï¼Œå¼€å‘æ¿ä¸Šæœ‰LDOï¼Œè¾“å…¥5Våå¼€å‘æ¿ä¼šè¾“å‡º3V3ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œæˆ‘å°±æ˜¯BOTå¼•è„šç”¨æ¥æ¥äº†æŒ‰é”®ï¼Œæ–¹ä¾¿åœ¨è°ƒè¯•å‡ºç°æ•…éšœæ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿›å…¥å‡çº§æ¨¡å¼ï¼Œæ“¦é™¤å†…å­˜ã€‚ ### RTCæ—¶é’Ÿéƒ¨åˆ† ä½¿ç”¨å¸¸è§çš„ä¸€ä¸ªRTCæ—¶é’Ÿæ¨¡å—DS1302ã€‚ç‰¹ç‚¹å¦‚ä¸‹ï¼š ![å›¾ 5](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 34 02.png) åŸç†å›¾è®¾è®¡ ![å›¾ 6](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 34 07.png) DS1302éœ€è¦å¤–éƒ¨æ¥ä¸€ä¸ª32.768KHzçš„æ™¶æŒ¯ä½œä¸ºæ—¶é’Ÿï¼Œå°±æ˜¯å›¾ä¸­çš„X1å™¨ä»¶ã€‚è€Œæ™¶æŒ¯ä¸ºäº†æ›´åŠ çš„ç¨³å®šç²¾ç¡®ï¼Œéœ€è¦åœ¨æ™¶æŒ¯çš„è¾“å…¥è¾“å‡ºåŠ ä¸Šè´Ÿè½½ç”µå®¹ï¼Œæ ¹æ®é‚£ä¸ªæ™¶æŒ¯çš„æ‰‹å†Œè¯´æ˜ï¼ŒåŠ äº†12pfçš„è´Ÿè½½ç”µå®¹ï¼Œå°±æ˜¯å›¾ä¸­çš„C8C9ã€‚VCC1æ˜¯å¤‡ç”¨ç”µæ± çš„ç”µæºè¾“å…¥å£ï¼Œå¦‚æœæƒ³è¦åœ¨è®¾å¤‡æ–­ç”µçš„æƒ…å†µä¸‹ï¼ŒDS1302è¿˜èƒ½å¤Ÿè·‘æ—¶ï¼Œé‚£ä¹ˆå¿…é¡»æ¥å…¥è¿™ä¸ªB1ç”µæ± åº§ï¼Œè¿™ä¸ªç”µæ± åº§æ˜¯æ¥çš„çº½æ‰£ç”µæ± ã€‚C7å•çº¯æ˜¯æ»¤æ³¢ç”¨ã€‚DS1302çš„å…¶ä»–å¼•è„šå°±æ˜¯æ§åˆ¶å¼•è„šäº†ï¼Œå°†å…¶æ¥åˆ°å¼€å‘æ¿å¼•è„šä¸Šï¼Œæ–¹ä¾¿å¼€å‘æ¿æ§åˆ¶ã€‚ ### æ¸©æ¹¿åº¦é‡‡é›†éƒ¨åˆ† åˆæ˜¯ä½¿ç”¨å¸¸è§çš„ä¸€ä¸ªæ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨DHT11ã€‚ç‰¹ç‚¹å¦‚ä¸‹ï¼š ![å›¾ 7](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 34 13.png) åŸç†å›¾è®¾è®¡ ![å›¾ 8](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 34 18.png) DHT11åœ¨æ•°æ®å¼•è„šDATAä¸Šï¼Œå¿…é¡»åŠ ä¸€ä¸ªä¸Šæ‹‰ç”µé˜»ï¼Œè®©DHT11åœ¨ç©ºé—²æ—¶ä¿æŒé«˜ç”µå¹³ã€‚æ ¹æ®å®ƒçš„æ•°æ®æ‰‹å†Œï¼Œè¿™ä¸ªä¸Šæ‹‰ç”µé˜»å°±é€‰æ‹©äº†4.7Kçš„R12ã€‚ç„¶åDHT11æ˜¯æ”¯æŒ3.3V~5Vçš„ç”µå‹è¾“å…¥çš„ï¼Œè¿™é‡Œå› ä¸ºå¼€å‘æ¿æ˜¯3V3çš„GPIOç”µå‹ï¼Œæ‰€ä»¥ä¸ºäº†é€šä¿¡ç¨³å®šï¼Œç»™DHT11çš„æ•°æ®å¼•è„šDATAçš„ä¹Ÿä¿æŒ3.3Vï¼Œç»™DHT11çš„è¾“å…¥ç”µå‹ä¸º3.3Vã€‚ ### WS2812å½©ç¯çŸ©é˜µéƒ¨åˆ† è¿™é‡Œè´­ä¹°çš„æ˜¯æ·˜å®ä¸Šå–``36å…ƒ``çš„ 32 * 8 åƒç´ çš„å½©ç¯çŸ©é˜µï¼š[WS2812Bå…¨å½©è½¯åƒç´ å±8X8 8X32 16X16å¹»å½©5Væ˜¾ç¤ºå¯ç¼–ç¨‹åƒç´ è½¯å±](https://item.taobao.com/item.htm?_u n2t4uge597e5&amp;id 737696448369&amp;skuId 5263566850408&amp;spm a1z09.2.0.0.17c22e8d4Z2Du3) ![å›¾ 9](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 34 25.png) åŸç†å›¾è®¾è®¡ï¼š ![å›¾ 10](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 34 32.png) WS2812æ˜¯ä¸€ä¸ªå•æ€»çº¿çš„è®¾å¤‡ï¼Œæ¯ä¸€ä¸ªç¯ç é‡Œé¢éƒ½å¸¦äº†é©±åŠ¨ç”µè·¯ï¼Œå¯ä»¥åŒæ—¶æ§åˆ¶å¾ˆå¤šä¸ªç¯ï¼Œä½†æ˜¯ä¸ºäº†ä»¥é˜²ä¸‡ä¸€ï¼Œåœ¨è¿™ä¸ªWS2812å½©ç¯çŸ©é˜µçš„ç”µæºè¾“å…¥å£VCCå¤„ï¼ŒåŠ äº†ä¸€ä¸ª1000UFçš„ç”µå®¹ï¼Œé˜²æ­¢å½©ç¯çŸ©é˜µäº®çš„ç¬é—´ç”µå‹ç”µæµä¸è¶³ï¼ŒåŠ äº†ç”µå®¹ä¹‹åï¼Œå¦‚æœå‡ºç°ç”µå‹ç”µæµä¸è¶³çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥ä»è¿™ä¸ªå¤§ç”µå®¹å–ç”µã€‚ ### éŸ³é¢‘é‡‡é›†éƒ¨åˆ† å…³äºæ¨¡æ‹Ÿä¿¡å·ç±»æˆ‘ä¸å¤ªäº†è§£ï¼Œè¿™é‡Œæ˜¯å‚è€ƒçš„ä¸€ä¸ªéŸ³é¢‘é‡‡é›†æ¨¡å—çš„ç”µè·¯ï¼š``MAX4466éŸ³é¢‘é‡‡é›†æ¨¡å—``ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹ç›´æ¥ä¸Šæ·˜å®æœç´¢å°±å¥½ã€‚ ![å›¾ 11](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 34 41.png) åŸç†å›¾è®¾è®¡ï¼š ![å›¾ 12](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 34 45.png) ### æŒ‰é”®éƒ¨åˆ† åœ¨è½¯ä»¶éƒ¨åˆ†å½“ä¸­ä½¿ç”¨ä¸€ä¸ªæŒ‰é”®å»æ§åˆ¶UIç•Œé¢çš„åˆ‡æ¢ã€‚ä½†æ˜¯å½“å‰æˆ‘è™½ç„¶ç”¨ä¸Šäº†æŒ‰é”®ï¼Œç»“æœæˆ‘çš„å¤–å£³éƒ¨åˆ†æ²¡æœ‰åšå¥½ï¼Œå¯¼è‡´æˆ‘ç°åœ¨åˆ‡æ¢ç•Œé¢çš„æ‹†å¼€å¤–å£³å»æŒ‰æŒ‰é”®... å¤§å®¶ç­‰æˆ‘å®Œå–„æˆ–è€…å¤åˆ»çš„æ—¶å€™è‡ªè¡Œå®Œå–„å°±å¥½ã€‚ åŸç†å›¾è®¾è®¡ï¼š ![å›¾ 13](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 34 51.png) ## å¤–å£³éƒ¨åˆ† >! ä¸‹è½½åœ°å€ï¼šhttps://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/3Dfile ### 3Dæ–‡ä»¶è¯´æ˜ **å› ä¸ºå®ç‰©å¾ˆå¤§ï¼Œæ‰“å°çš„å¤–å£³éœ€è¦åˆ†å¼€ï¼Œåˆ†å·¦å³ä¸¤è¾¹ã€‚** LEDGrid2x.stl ä¸ºå…‰æ ï¼Œéœ€è¦ä¸€ä¸ªéƒ¨ä»¶æ‰“ä¸¤ä¸ªï¼Œæ‹¼åˆ°ä¸€èµ·ï¼› > è¯´æ˜ï¼šå…‰æ ä¸€å®šè¦**é»‘è‰²çš„æè´¨ï¼Œä¸ç®¡æ˜¯3Dæ‰“å°æ—¶é€‰æ‹©é»‘è‰²çš„ææ–™è¿˜æ˜¯åé¢æ”¶åˆ°å–·é»‘æ¼†ï¼Œä¸€å®šè®°å¾—ä½¿ç”¨é»‘è‰²çš„å…‰æ ï¼ä¸ç„¶è§‚æ„Ÿå°±å·®å¾ˆå¤š** ![å›¾ 0](../../static/images/docs/diy/picxel clock/download/download 2024 12 05 22 32 35.png) frontFrame2x.stl ä¸ºå¤–å£³è¾¹æ¡†ï¼Œéœ€è¦ä¸€ä¸ªéƒ¨ä»¶æ‰“ä¸¤ä¸ªï¼Œæ‹¼åˆ°ä¸€èµ·ï¼› ![å›¾ 1](../../static/images/docs/diy/picxel clock/download/download 2024 12 05 22 32 50.png) Housing.stl å’Œ Housing_noV.stl ä¸ºåŒä¸€ä¸ªéƒ¨ä»¶ï¼Œé€‰æ‹©ä¸€ä¸ªè¿›è¡Œæ‰“å°å³å¯ï¼Œéƒ½æ˜¯æˆæœ¬è¾ƒé«˜ï¼Œé…Œæƒ…æ‰“å°ï¼› ![å›¾ 2](../../static/images/docs/diy/picxel clock/download/download 2024 12 05 22 32 57.png) å¦‚è¦ç»„å»ºå®Œæ•´çš„å¤–å£³ï¼Œè¿˜éœ€è¦è´­ä¹°é»‘è‰²çš„äºšå…‹åŠ›é€æ˜é¢æ¿ï¼ ``ç”Ÿäº§çš„è§„æ ¼å‚æ•°ï¼šé»‘èŒ¶è‰² é€æ˜äºšå…‹åŠ› 95Ã—330Ã—2mm`` ## é¡¹ç›®å±•ç¤º ### é™æ€å›¾ ![å›¾ 14](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 36 12.png) ### åŠ¨æ€å›¾ ![å›¾ 15](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 36 36.gif) ![å›¾ 16](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 36 45.gif) ![å›¾ 17](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 36 54.gif) ![å›¾ 18](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 37 07.gif) ![å›¾ 19](../../static/images/docs/diy/picxel clock/hardware/hardware 2024 12 06 00 37 16.gif)"},"/diy/picxel-clock/led-oscillating.html":{"title":"FFTéŸ³å¾‹ç¯","content":" title: FFTéŸ³å¾‹ç¯ keywords: keyword1, keyword2 desc: description for this article show_source: false update: date: 2024 12 05 author: è€æ€ªé¸½ version: 1.0.1 content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£ >! æœ¬æ–‡ç»§æ‰¿è‡ªä¹‹å‰çš„ğŸ‘‰[å½©ç¯é©±åŠ¨](ledmatrix.html)ç« èŠ‚ **æœ¬æ–‡å®Œæˆçš„æ•ˆæœï¼š** ![å›¾ 0](../../static/images/docs/diy/picxel clock/led oscillating/led oscillating 2024 12 06 00 05 00.gif) ## ç¡¬ä»¶å‡†å¤‡ ### WS2812çŸ©é˜µå½©ç¯ ![å›¾ 0](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 14 08.png) **è´­ä¹°åœ°å€ï¼š**[WS2812Bå…¨å½©è½¯åƒç´ å±8X8 8X32 16X16å¹»å½©5Væ˜¾ç¤ºå¯ç¼–ç¨‹åƒç´ è½¯å±](https://item.taobao.com/item.htm?spm a1z09.2.0.0.24ee2e8dC5LwBl&id 737696448369&_u r2t4uge57a73&skuId 5263566850408) ### éº¦å…‹é£æ¨¡å— ![å›¾ 1](../../static/images/docs/diy/picxel clock/led oscillating/led oscillating 2024 12 06 00 05 36.png) è´­ä¹°åœ°å€ï¼š[GY MAX4466 å£°éŸ³ä¼ æ„Ÿå™¨æ¨¡å— MAX4466éº¦å…‹é£å‰ç½®æ”¾å¤§å™¨ æä¾›ç¨‹åº](https://item.taobao.com/item.htm?spm a21n57.1.item.2.2af5523csIlNsa&priceTId 2147bfce17220928379633421e49bd&utparam %7B%22aplus_abtest%22:%22c7a787e4caab2b1c51f9ce5bba439f54%22%7D&id 619436010637&ns 1&abbucket 4) ### ESP32S3å¼€å‘æ¿ ![å›¾ 1](../../static/images/docs/diy/picxel clock/ledmatrix/ledmatrix 2024 12 05 23 14 24.png) **è´­ä¹°åœ°å€ï¼š**[ç«‹åˆ›Â·ESP32S3R8N8 å¼€å‘æ¿](https://item.szlcsc.com/22034693.html?fromZone s_s__%2522%25E7%25AB%258B%25E5%2588%259B%25E5%25BC%2580%25E5%258F%2591%25E6%259D%25BF%2522) ## å·¥ç¨‹åˆ›å»º åœ¨VSCodeä¸­æ‰“å¼€PlatformIOæ‰©å±•åˆ›å»ºåä¸º`OscillatingLED`çš„ `Espressif ESP32 S3 DevKitM 1` å·¥ç¨‹ã€‚ å…³äºè¯¦ç»†å›¾æ–‡åˆ›å»ºå·¥ç¨‹çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å·¥ç¨‹åˆ›å»ºå°èŠ‚ã€‚ ## å®‰è£…é©±åŠ¨åº“ åˆ›å»ºå®Œæˆä¹‹åï¼Œæ‰“å¼€é©±åŠ¨åº“ä¸‹è½½ç•Œé¢ã€‚å®ç°åŠŸèƒ½çš„æœ€åº•å±‚çš„é©±åŠ¨ï¼Œéœ€è¦åˆ†åˆ«å®‰è£…ä¸‰ä¸ªåº“ï¼š 1. æœç´¢``Adafruit NeoMatrix``ï¼Œå®‰è£…æ¥è‡ª``Adafruit``çš„``Adafruit NeoMatrix``åº“ã€‚ 2. æœç´¢``Adafruit GFX Library``ï¼Œå®‰è£…æ¥è‡ª``Adafruit``çš„``Adafruit GFX Library``åº“ã€‚ 3. æœç´¢``arduinoFFT``ï¼Œå®‰è£…æ¥è‡ª``Enrique Condes``çš„``arduinoFFT``åº“ã€‚ å°†å®ƒä»¬éƒ½å®‰è£…åˆ°æˆ‘ä»¬çš„å·¥ç¨‹å½“ä¸­ã€‚ > å…³äºè¯¦ç»†å›¾æ–‡å®‰è£…é©±åŠ¨åº“çš„è¿‡ç¨‹è¯·å‚è€ƒğŸ‘‰[RTCæ—¶é’Ÿé©±åŠ¨](ds1302.html)ç« èŠ‚çš„å®‰è£…é©±åŠ¨åº“å°èŠ‚ã€‚ éƒ½å®‰è£…å®Œæˆä¹‹åï¼Œæ‰“å¼€``platformio.ini``æ–‡ä»¶ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…ä¸Šäº†ä¸‰ä¸ªé©±åŠ¨åº“ã€‚ ![å›¾ 2](../../static/images/docs/diy/picxel clock/led oscillating/led oscillating 2024 12 06 00 07 06.png) ## ç¼–è¾‘ä»£ç  åœ¨å·¥ç¨‹ä¸‹çš„``include``æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª ``musicfft.h``æ–‡ä»¶ã€‚ æ¥ä¸‹æ¥å¾€ ``musicfft.h`` æ–‡ä»¶å†™å…¥ä»£ç ï¼š ```c #include <Adafruit_NeoMatrix.h> #include <arduinoFFT.h> #define CHANNEL 1 //éŸ³é¢‘è¾“å…¥å¼•è„š #define xres 32 #define yres 8 const uint16_t samples 64; //é‡‡æ ·ç‚¹æ•°ï¼Œå¿…é¡»ä¸º2çš„æ•´æ•°æ¬¡å¹‚ const double samplingFrequency 4000; //Hz, å£°éŸ³é‡‡æ ·é¢‘ç‡ unsigned int sampling_period_us; unsigned long microseconds; unsigned long lastTime 0; unsigned long fallingTime 0; double vReal[samples]; //FFTé‡‡æ ·è¾“å…¥æ ·æœ¬æ•°ç»„ double vImag[samples]; //FFTè¿ç®—è¾“å‡ºæ•°ç»„ int freq_gain2[xres] {30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30}; int Intensity[xres] {}; // initialize Frequency Intensity to zero int FallingPoint[xres] {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}; int Displacement 1; // Create LED Object //ArduinoFFT FFT ArduinoFFT(); //åˆ›å»ºFFTå¯¹è±¡ ArduinoFFT<double> FFT ArduinoFFT<double>(vReal, vImag, samples, samplingFrequency); void getSamples(){ microseconds micros(); for(int i 0; i < samples; i++){ vReal[i] analogRead(CHANNEL); vImag[i] 0; microseconds + sampling_period_us; } bool reduce false; if ((millis() lastTime) > 16) { lastTime millis(); reduce true; } //FFT FFT.windowing(vReal, 1, FFT_WIN_TYP_HAMMING, FFT_FORWARD); FFT.compute(vReal, vImag, samples, FFT_FORWARD); FFT.complexToMagnitude(vReal, vImag, samples); //Update Intensity Array int t 16; for(int i t; i < (xres*Displacement)+t; i+ Displacement){ vReal[i] constrain(vReal[i], 0 ,3596); // set max value for input data vReal[i] map(vReal[i], freq_gain2[(i t)/Displacement], 1548, 0, yres); // map data to fit our display if(reduce){ Intensity[(i t)/Displacement] ; // Decrease displayed value } if (vReal[i] > Intensity[(i t)/Displacement]) // Match displayed value to measured value Intensity[(i t)/Displacement] vReal[i]; } } void drawYLine(Adafruit_NeoMatrix *matrix, int16_t x, int16_t y, int16_t h, int16_t c){ for(int i y;i<y+h;i++){ matrix >drawPixel(x,7 i,c); } } uint16_t hsv2rgb2(Adafruit_NeoMatrix *matrix, uint16_t hue, uint8_t saturation, uint8_t value) { uint8_t red 0; uint8_t green 0; uint8_t blue 0; uint16_t hi (hue / 60) % 6; uint16_t F 100 * hue / 60 100 * hi; uint16_t P value * (100 saturation) / 100; uint16_t Q value * (10000 F * saturation) / 10000; uint16_t T value * (10000 saturation * (100 F)) / 10000; switch (hi) { case 0: red value; green T; blue P; break; case 1: red Q; green value; blue P; break; case 2: red P; green value; blue T; break; case 3: red P; green Q; blue value; break; case 4: red T; green P; blue value; break; case 5: red value; green P; blue Q; break; default: return matrix >Color(255, 0, 0); } red red * 255 / 100; green green * 255 / 100; blue blue * 255 / 100; return matrix >Color(red, green, blue); } void displayUpdate(Adafruit_NeoMatrix *matrix, int displayPattern){ int color 0; switch(displayPattern){ case 0: for(int i 0; i < xres; i++){ drawYLine(matrix,i,yres Intensity[i],Intensity[i],hsv2rgb2(matrix, color, 80, 80 )); drawYLine(matrix,i,0,yres 1 Intensity[i],hsv2rgb2(matrix, color, 80, 80 )); color + 360/xres; } break; case 1: if ((millis() fallingTime) > 130) { for(int i 0; i < xres; i++){ if(FallingPoint[i]>0){ FallingPoint[i] ; } } fallingTime millis(); } for(int i 0; i < xres; i++){ drawYLine(matrix,i,0,yres 1,matrix >Color(0,0,0)); if(FallingPoint[i]<Intensity[i]){ FallingPoint[i] Intensity[i]; } drawYLine(matrix,i,yres Intensity[i]+1,Intensity[i] 1,hsv2rgb2(matrix, color, 80, 80 )); if(FallingPoint[i]>0){ matrix >drawPixel(i,yres FallingPoint[i],matrix >Color(255,255,255)); } color + 360/xres; } break; case 2: for(int i 0; i < xres; i++){ drawYLine(matrix,i,0,yres,matrix >Color(0,0,0)); drawYLine(matrix,i,0,Intensity[i]+1,hsv2rgb2(matrix, color, 80, 80 )); color + 360/xres; } break; } } ``` æ¥ä¸‹æ¥åœ¨ ``main.cpp``ä¸­ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š ```c #include <Arduino.h> #include <Adafruit_NeoMatrix.h> //ç‚¹äº®LEDçŸ©é˜µéœ€è¦çš„åº“ #include \"musicfft.h\" //éŸ³ä¹é¢‘è°±åº“ //åƒç´ é˜µåˆ—å®šä¹‰ #define kMatrixWidth 32 //å®½åº¦ #define kMatrixHeight 8 //é«˜åº¦ #define BRIGHTNESS 10 //é»˜è®¤äº®åº¦ 0 255 #define BRIGHTNESS_INTERVAL 30 //äº®åº¦è°ƒèŠ‚é—´éš” #define LED_PIN 8 //åƒç´ é˜µåˆ—å¼•è„š Adafruit_NeoMatrix *matrix; //LEDçŸ©é˜µç±»æŒ‡é’ˆ //åƒç´ çŸ©é˜µåˆå§‹åŒ– void InitLED_Matrix(void) { //è®¾ç½®åƒç´ çŸ©é˜µçš„æ–¹å‘ä»¥åŠæ’åˆ—æ–¹å¼ matrix new Adafruit_NeoMatrix(32, 8, LED_PIN, NEO_MATRIX_TOP + NEO_MATRIX_LEFT+ NEO_MATRIX_COLUMNS + NEO_MATRIX_ZIGZAG, NEO_GRB + NEO_KHZ800); matrix >setTextWrap(false); //è®¾ç½®æ–‡å­—æ˜¯å¦è‡ªåŠ¨æ¢è¡Œ matrix >clear(); //æ¸…é™¤å½“å‰æ˜¾ç¤ºå†…å®¹ matrix >setBrightness(BRIGHTNESS);//è®¾ç½®äº®åº¦ } void showFFT(void) { //è¿›è¡Œé‡‡æ · getSamples(); //æ›´æ–°é¢‘è°±æŸ± displayUpdate(matrix, 2); } void setup() { //åˆå§‹åŒ–LEDçŸ©é˜µæ˜¾ç¤º InitLED_Matrix(); } void loop() { matrix >clear(); showFFT(); matrix >show(); delay(50); } ``` ## ç¡¬ä»¶è¿æ¥ ![å›¾ 3](../../static/images/docs/diy/picxel clock/led oscillating/led oscillating 2024 12 06 00 08 04.png) # 6. ä»£ç éªŒè¯ ä»£ç ç¼–å†™å®Œæˆä¹‹åï¼Œå°†ESP32S3å¼€å‘æ¿æ¥å…¥ç”µè„‘ä¸‹è½½ä»£ç ã€‚ç„¶åè§‚å¯Ÿå½©ç¯çŸ©é˜µçš„ç°è±¡ã€‚ å®ç‰©æ˜¾ç¤ºå¦‚ä¸‹ï¼š **ä½¿ç”¨é»‘è‰²äºšå…‹åŠ›é¢æ¿+ç™½çº¸æ ¼æŒ¡å…‰çº¿æ˜¾ç¤º** > å å±‚ä»ä¸Šåˆ°ä¸‹æ˜¯è¿™æ ·çš„ï¼šé»‘è‰²äºšå…‹åŠ›é¢æ¿ > ç™½çº¸ > LEDçŸ©é˜µ ![å›¾ 0](../../static/images/docs/diy/picxel clock/led oscillating/led oscillating 2024 12 06 00 05 00.gif) >! è¯´æ˜ï¼šå¦‚æœä½ æ ¹æ®ä»£ç æ“ä½œè¿è¡Œä¸èµ·æ¥ï¼Œå¯ä»¥ä¸‹è½½ğŸ‘‰[ä¾‹ç¨‹](https://gitee.com/laoguaige/esp32 s3 r8 n8 pixel clock/tree/master/example/OscillatingLED)çœ‹çœ‹"}}
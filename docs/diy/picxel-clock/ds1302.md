---
title: æœ¬åœ°æ—¶é’Ÿè¯»å–ä¸æ˜¾ç¤º
keywords: keyword1, keyword2
desc: description for this article
show_source: false
update:
  - date: 2024-12-05
    author: è€æ€ªé¸½
    version: 1.0.1
    content: æ›´æ–°äº†åŸºæœ¬æ–‡æ¡£

---

## å·¥ç¨‹åˆ›å»º
---
åœ¨VSCodeä¸­æ‰“å¼€PlatformIOæ‰©å±•åˆ›å»ºå·¥ç¨‹ã€‚

![å›¾ 0](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-53-19.png)  


è®¾ç½®å·¥ç¨‹å‘å¯¼

![å›¾ 1](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-53-26.png)  

![å›¾ 2](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-53-32.png)  

ç­‰å¾…åˆ›å»ºå®Œæˆã€‚

![å›¾ 3](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-53-37.png)  

## å®‰è£…é©±åŠ¨åº“
---
åˆ›å»ºå®Œæˆä¹‹åï¼Œæˆ‘ä»¬åœ¨VSCodeä¸­æ‰“å¼€æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„å·¥ç¨‹æ–‡ä»¶å¤¹ã€‚

![å›¾ 4](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-53-42.png)  


åœ¨VSCodeä¸­å›åˆ°PlatformIOçš„ä¸»é¡µï¼Œç»™å·¥ç¨‹å®‰è£…DS1302çš„é©±åŠ¨åº“ã€‚

![å›¾ 5](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-54-05.png)  

![å›¾ 6](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-54-09.png)  

æœç´¢DS1302ï¼Œå®‰è£…læ¥è‡ª``Rafa Couto``çš„``Ds1302``åº“ã€‚

![å›¾ 7](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-54-14.png)  


å°†åº“å®‰è£…åˆ°æˆ‘ä»¬çš„å·¥ç¨‹ä¸­ã€‚

![å›¾ 8](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-54-19.png)  

![å›¾ 9](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-54-29.png)  


æ‰“å¼€``platformio.ini``æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…ä¸Šäº†DS1302çš„é©±åŠ¨åº“ã€‚

![å›¾ 10](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-54-35.png)  

## ç¼–è¾‘ä»£ç 
---
æ‰“å¼€å·¥ç¨‹ä¸‹çš„``src``æ–‡ä»¶å¤¹ä¸‹çš„``main.cpp``ã€‚

è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š
```C
#include <Arduino.h>
#include <Ds1302.h>

//è®¡æ—¶æ¨¡å—DS1302ç›¸å…³å®šä¹‰
#define RST 10    //ds1302çš„RSTå¼•è„šå®šä¹‰
#define DATA 3    //ds1302çš„DATAå¼•è„šå®šä¹‰
#define CLK 2     //ds1302çš„CLKå¼•è„šå®šä¹‰

Ds1302 rtc(RST, CLK, DATA); //åˆ›å»ºDS1302è¿™ä¸ªå¯¹è±¡

void setup()
{
  //åˆå§‹åŒ–ä¸²å£
  Serial.begin(9600);

  //åˆå§‹åŒ–DS1302
  rtc.init();

  //æµ‹è¯•æ—¶é’Ÿæ˜¯å¦åœæ­¢å¹¶è®¾ç½®ä¸€ä¸ªæ—¥æœŸæ—¶é—´æ¥å¯åŠ¨å®ƒ
  if (rtc.isHalted())
  {
      Serial.println("RTC is halted. Setting time...");

      //åˆ›å»ºåŸºäºDS1302åº“ä¸‹çš„æ—¶é—´å‚æ•°
      Ds1302::DateTime dt = {
          .year = 24,
          .month = Ds1302::MONTH_JUL,
          .day = 27,
          .hour = 14,
          .minute = 13,
          .second = 0,
          .dow = Ds1302::DOW_SAT
      };

      //å°†è®¾ç½®çš„æ—¶é—´å†™å…¥DS1302æ¨¡å—
      rtc.setDateTime(&dt);
  }
  else
  {
    Serial.println("RTC is busy.\r\n");
  }
    

  Serial.println("Time start.\r\n");
}


void loop()
{
    char outputString[100]={0};
    Ds1302::DateTime now;
    //è·å–å½“å‰æ—¶é—´å¹¶ä¸”å­˜å‚¨åœ¨nowä¸­
    rtc.getDateTime(&now);

    static uint8_t last_second = 0;
    //å¦‚æœç§’æ•°å‘ç”Ÿæ›´æ–°
    if (last_second != now.second)
    {
        //æ‰‹åŠ¨æ›´æ–°ç§’æ•°ï¼Œæ–¹ä¾¿ä¸‹æ¬¡åˆ¤æ–­
        last_second = now.second;
        //æ ¼å¼åŒ–å­—ç¬¦ä¸²
        sprintf(outputString, 
        "%d-%d-%d %d  %d:%d:%d\r\n",
        now.year+2000,
        now.month,
        now.day,
        now.dow,
        now.hour,
        now.minute,
        now.second );
        //è¾“å‡ºå­—ç¬¦ä¸²
        Serial.println(outputString);
    }
    delay(1000);
}
```

## ç¡¬ä»¶è¿æ¥
---
![å›¾ 11](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-55-19.png)  


> è¿™é‡Œå…¶å®æˆ‘æ˜¯åšäº†ç”µè·¯è®¾è®¡çš„ï¼Œå¦‚æœä½ çš„æ¨¡å—ä¸Šæ²¡æœ‰RSTçš„è¯åº”è¯¥æ˜¯ä¸ç”¨è¿æ¥RSTå¼•è„šçš„ã€‚
> ![å›¾ 12](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-55-34.png)  




## ä»£ç éªŒè¯
---
ä»£ç ç¼–å†™å®Œæˆä¹‹åï¼Œå°†**ESP32S3å¼€å‘æ¿**æ¥å…¥ç”µè„‘ã€‚æˆ‘å½“å‰çš„å¼€å‘æ¿ä¸Šæ˜¯**CH340K**çš„é©±åŠ¨ï¼Œæ•…æˆ‘è¿™é‡Œé€‰æ‹©**COM3ç«¯å£**ã€‚

![å›¾ 13](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-56-05.png)  

ç¼–è¯‘å¹¶ä¸‹è½½åˆ°å¼€å‘æ¿ä¸­ã€‚

![å›¾ 14](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-56-11.png)  

ç‚¹å‡»æ‰“å¼€ä¸²å£ç›‘è§†å™¨ã€‚

![å›¾ 15](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-56-16.png)  

å¯ä»¥çœ‹åˆ°å¼€å‘æ¿å¯ä»¥æ­£å¸¸çš„è¯»å–å’Œè®¾ç½®DS1302çš„æ—¶é—´ã€‚è¾“å‡ºæ­£å¸¸ã€‚

![å›¾ 16](../../static/images/docs/diy/picxel-clock/ds1302/ds1302-2024-12-05-22-56-21.png)  


>! è¯´æ˜ï¼šå¦‚æœä½ æ ¹æ®ä»£ç æ“ä½œè¿è¡Œä¸èµ·æ¥ï¼Œå¯ä»¥ä¸‹è½½ğŸ‘‰[ä¾‹ç¨‹](https://gitee.com/laoguaige/esp32-s3-r8-n8-pixel-clock/tree/master/example/ds1302)çœ‹çœ‹






